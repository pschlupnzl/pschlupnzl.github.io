!function(){!function(styles){var t=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(t);t.type="text/css";for(var k=0;k<styles.length;k+=1){t.sheet.insertRule(styles[k]);}}([".hidden {display: none;}","button.toggleHelp,.laserCanvasBubble [data-about] {padding: 0.2em 1em;color: #333;border: none;background: #e6d12f;border-radius: 1em;}","button.toggleHelp {font-size: inherit;font-family: inherit;transition: background linear 350ms;}","button.toggleHelp:hover {background: #c1af21;}",".laserCanvasBubble {position: absolute;width: 0;height: 0;font-size: 18px;font-family: Helvetica, Arial, sans-serif;}",".laserCanvasBubble [data-about] {position: absolute;white-space: nowrap;box-shadow: 0 0.2em 2em rgba(0, 0, 0, 0.15);z-index: 20563;}",".laserCanvasBubble [data-about=\"#LaserCanvasNewPanel\"]:before,.laserCanvasBubble [data-about=\".interactionSelector\"]:before,.laserCanvasBubble [data-about=\"[data-insert-element]:last-child\"]:before,.laserCanvasBubble [data-about=\"#LaserCanvasToggleInfo\"]:before,.laserCanvasBubble [data-about=\"#LaserCanvasFrame\"]:before {content: \" \";position: absolute;border: 0.5em solid transparent;}",".laserCanvasBubble [data-about=\"#LaserCanvasToggleInfo\"]:before {margin-top: 0.15em;margin-left: -1.9em;border-right-color: #e6d12f;}",".laserCanvasBubble [data-about=\"#LaserCanvasNewPanel\"]:before {margin-top: -1.2em;border-bottom-color: #e6d12f;}",".laserCanvasBubble [data-about=\"#LaserCanvasFrame\"]:before,.laserCanvasBubble [data-about=\"[data-insert-element]:last-child\"]:before,.laserCanvasBubble [data-about=\".interactionSelector\"]:before {margin-top: 1.3em;margin-left: 3em;border-top-color: #e6d12f;}",".laserCanvasBubble [data-about=\"#LaserCanvasFrame\"]:before {margin-left: 11em;}",".laserCanvasBubble [data-about=\"[data-insert-element]:last-child\"]:before {margin-left: 6em;}","body {padding: 0;margin: 0;overflow: hidden;font-size: 16px;font-family: 'Open Sans', sans-serif;}",".progressBarLoading {width: 8em;margin: 8em auto 0 auto;border: 2px solid #449E9E;border-radius: 8px;overflow: hidden;}",".progressBarLoading > div {width: 0;height: 8px;background-color: #29B9B9;}",".helpButton {position: fixed;right: 0;width: 2em;height: 1.5em;background: #f1f52e;font-size: 20px;font-weight: bold;text-align: center;border-top-left-radius: 1em;border-bottom-left-radius: 1em;border: none;cursor: pointer;}",".helpButton.help {top: 0.5em;}",".helpButton.feedback {top: 2.5em;}",".helpButton.docs {top: 4.5em;}",".helpButton.feedback svg,.helpButton.docs svg {width: 1.2em;height: 1.3em;}",".insertElementPreview {position: absolute;opacity: 0.65;top: 0;left: 0;pointer-events: none;}",".insertElementPreview.hidden {display: block;opacity: 0.01;}",".laserCanvasNewPanel {top: 0;left: 0;width: 100%;padding: 0.2em 0;text-align: center;}",".laserCanvasNewPanel button {padding: 0.5em 1em;background-color: #ccc;border: none;border-radius: 1em;cursor: pointer;transition-property: background-color;transition-duration: 350ms;}",".laserCanvasNewPanel button:hover {background-color: #aaa;}",".laserCanvasNewPanel button[data-action=\"openFile\"] {position: relative;overflow: hidden;}",".laserCanvasNewPanel button[data-action=\"openFile\"] > input[type=\"file\"] {position: absolute;right: 0;top: 0;font-size: 100px;opacity: 0;}",".laserCanvasFrame {width: 100%;height: 100%;}","[data-interaction=\"inspect\"] .laserCanvasFrame {cursor: help;}","[data-interaction] .laserCanvasFrame .hoverOverElement {cursor: move;}",".laserCanvasHighlight {position: absolute;}",".laserCanvasHighlight .highlight {position: absolute;left: 40px;top: 40px;width: 0;height: 0;margin-left: 0;margin-top: 0;border: 3px solid #986720;background-color: #d9da39;border-radius: 50%;opacity: 0;transition-property: width, height, margin-left, margin-top, opacity;transition-duration: 150ms;}",".laserCanvasHighlight .highlight[data-state=\"hover\"] {width: 30px;height: 30px;margin-left: -18px;margin-top: -18px;opacity: 0.5;}",".laserCanvasHighlight .highlight[data-state=\"drag\"] {width: 20px;height: 20px;margin-left: -13px;margin-top: -13px;opacity: 1;}",".laserCanvasFrame .laserCanvasInspect {display: none;}","[data-interaction=\"inspect\"] .laserCanvasFrame .laserCanvasInspect {display: block;white-space: nowrap;}","canvas.render2d {background-image: none;}","[data-draggable=\"true\"] {cursor: move;}","[data-draggable=\"x\"] {cursor: ew-resize;}","[data-draggable=\"y\"] {cursor: ns-resize;}","input[type=\"text\"]::placeholder {font-style: italic;}",".lcbuttons {text-align: center;}","button.lcbutton {background: #333;color: white;border: none;border-radius: 1em;padding: 0.25em;margin: 0.5em 0;font-family: inherit;font-size: inherit;}","button.lcbutton.padded {padding: 0.25em 1em;}","button.lcbutton:hover {background: #575757;text-shadow: 0.1em 0.1em 0.2em rgba(0, 0, 0, 0.3);}","button.lcbutton:active {background-color: #2e2e2e;}",".nowrap {white-space: nowrap;}","button[data-action=\"standard\"][data-step],button[data-action=\"increment\"][data-step] {margin: 0 0.1em;padding: 0.1em 0.5em;font-size: 0.8em;}","button[data-step=\"1\"],button[data-step=\"+1\"] {border-top-left-radius: 0;border-bottom-left-radius: 0;}","button[data-step=\"-1\"] {border-top-right-radius: 0;border-bottom-right-radius: 0;}",".propertiesPanel button[data-action=\"close\"],.elementScreenPanel button[data-action=\"compact\"],.sellmeierPanel button[data-action=\"close\"] {position: absolute;right: 0.2em;top: 0.2em;width: 2em;height: 2em;padding: 0.5em;color: white;background: #333;border: none;border-radius: 1em;}",".elementScreenPanel {display: block;left: 310px;top: 3em;font-size: 0.8em;}",".elementScreenPanel table {border-collapse: collapse;}",".elementScreenPanel thead tr,.elementScreenPanel tbody tr:nth-child(2n) {background-color: rgba(255, 255, 255, 0.5);}",".elementScreenPanel thead th,.elementScreenPanel tbody td {padding: 0.2em 0.3em;}",".elementScreenPanel[data-compact-view=\"true\"] {padding-right: 2.5em;}",".elementScreenPanel[data-compact-view=\"true\"] thead,.elementScreenPanel[data-compact-view=\"true\"] h1,.elementScreenPanel[data-compact-view=\"true\"] [data-column=\"name\"],.elementScreenPanel[data-compact-view=\"true\"] [data-column=\"unit\"],.elementScreenPanel[data-compact-view=\"true\"] [data-info=\"r\"],.elementScreenPanel[data-compact-view=\"true\"] [data-info=\"w0\"],.elementScreenPanel[data-compact-view=\"true\"] [data-info=\"z0\"],.elementScreenPanel[data-compact-view=\"true\"] [data-info=\"zR\"],.elementScreenPanel[data-compact-view=\"true\"] .lcbuttons {display: none;}",".elementScreenPanel button[data-action=\"compact\"]:after {content: \" \";position: absolute;top: 0.2em;left: 0.6em;border: 0.5em solid transparent;border-bottom-color: #fff;}",".elementScreenPanel[data-compact-view=\"true\"] button[data-action]:after {top: 0.8em;border-bottom-color: transparent;border-top-color: #fff;}","#LaserCanvasNewPanel,#LaserCanvasFrame, #LaserCanvas,#LaserCanvasInfo,#LaserCanvasToolbar,#LaserCanvasToggleInfo,#LaserCanvasToggleVariables {position: absolute;}",".mainMenuAnchor {position: relative;display: inline-block;vertical-align: top;}",".mainMenuAnchor .mainMenuToggle {position: relative;width: 64px;height: 64px;}",".mainMenuAnchor .mainMenu {position: absolute;left: 0;bottom: 64px;width: 240px;background: #fff;border: 1px solid;}",".mainMenuAnchor .mainMenu ul {margin: 0;padding: 0;list-style-type: none;text-align: left;}",".helpPanel {position: absolute;left: 50%;top: 50%;width: 20em;margin-left: -11em;margin-top: -10em;border: 1px solid #ccc;padding: 1em;background: white;box-shadow: 0 0 3em rgba(0, 0, 0, 0.2);border-radius: 1em;}",".helpPanel .title,.helpPanel .hint {opacity: 0;transition: opacity 350ms;}",".helpPanel .title[data-show=\"true\"],.helpPanel .hint[data-show=\"true\"] {opacity: 1;}",".helpPanel .title {border-bottom: 1px solid #ccc;}",".helpPanel .hint {padding-bottom: 1em;border-bottom: 1px solid #ccc;}",".helpPanel .body {position: relative;height: 11em;overflow: hidden;}",".helpPanel .hint {color: #999;font-size: 0.8em;text-align: center;font-style: italic;}",".helpPanel .body .scroller {position: relative;left: 0;height: 100%;white-space: nowrap;opacity: 1;transition: opacity 350ms;}",".helpPanel .body .scroller > * {white-space: normal;}",".helpPanel .body .scroller .view {display: inline-block;position: relative;height: 100%;width: 100%;vertical-align: top;overflow: hidden;}",".helpPanel .body .scroller[data-hide=\"true\"] {opacity: 0;}",".helpPanel .body .scroller[data-scroll=\"next\"] {left: -100%;transition: left 500ms ease-out;}",".helpPanel .body .scroller[data-scroll=\"prev-pre\"] {left: -100%;}",".helpPanel .body .scroller[data-scroll=\"prev\"] {left: 0;transition: left 500ms ease-out;}",".helpPanel .footer {text-align: right;}",".helpPanel .footer .version {float: left;color: #ccc;font-size: 0.8em;}",".helpPanel .footer button {padding: 0.5em 1em;margin: 0.25em;color: white;background: #333;border: none;border-radius: 1em;cursor: pointer;}",".helpPanel .footer button:hover {background: #575757;}",".helpPanel .footer button[disabled],.helpPanel .footer button[disabled]:hover {background: #999;cursor: default;}",".helpPanel .finger,.helpPanel .concave,.helpPanel .lens,.helpPanel .mode {background-repeat: no-repeat;}",".helpPanel .concave,.helpPanel .lens {width: 16px;height: 64px;}",".helpPanel .finger {width: 31px;height: 48px;transform-origin: 7px 30px;transition: transform 250ms, opacity 250ms;background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzEiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCAxODAgMjgwIj4gPHBhdGggZmlsbD0iIzRhOTBkNiIgc3Ryb2tlPSIjMjIyIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xOCwyMjIgQyAxMiwxOTkgLTMsMTM5IDQsMTE3IEMgMTEsOTYgMjcsMTQ0IDI4LDE2MSBDIDMwLDE3OSAzMSw4MiAzMiwzNCBDIDMzLC0xMyA2OSwtMyA2OCwzNyBDIDY3LDc5IDY1LDE2MiA3MSwxNjIgQyA3NiwxNjIgNzEsMTI3IDczLDEwMSBDIDc1LDc1IDEwNSw3OSAxMDQsMTAxIEMgMTAyLDEyMiAxMDIsMTY1IDEwNiwxNjUgQyAxMTAsMTY1IDEwOCwxMjIgMTA5LDEwNiBDIDEwOSw4OSAxNDAsOTUgMTM4LDExMiBDIDEzNywxMzAgMTM3LDE2NCAxNDEsMTY1IEMgMTQ0LDE2NSAxNDMsMTM3IDE0NiwxMTcgQyAxNDgsOTYgMTcyLDEwOCAxNzMsMTMxIEMgMTc0LDE1MyAxNzQsMjA0IDE2NSwyMTkgQyAxNTYsMjM0IDEzNSwyNjkgOTMsMjY5IEMgNTEsMjY5IDIzLDI0NCAxOCwyMjIgeiIgLz48L3N2Zz4=\");}",".helpPanel .concave {background-image: url(\"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9Ii04IC0zMiAxNiA2NCIgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2NCI+CjxwYXRoIGQ9Ik0gOC4wMCAyNCBMIC00LjgwIDMyIEwgLTIuNzAgMjQgTSA4LjAwIDE2IEwgLTIuNzAgMjQgTCAtMS4yMCAxNiBNIDguMDAgOCBMIC0xLjIwIDE2IEwgLTAuMzAgOCBNIDguMDAgMCBMIC0wLjMwIDggTCAwLjAwIDAgTSA4LjAwIC04IEwgMC4wMCAwIEwgLTAuMzAgLTggTSA4LjAwIC0xNiBMIC0wLjMwIC04IEwgLTEuMjAgLTE2IE0gOC4wMCAtMjQgTCAtMS4yMCAtMTYgTCAtMi43MCAtMjQgTSA4LjAwIC0zMiBMIC0yLjcwIC0yNCBMIC00LjgwIC0zMiIgc3Ryb2tlPSIjMDAwIj48L3BhdGg+CQo8L3N2Zz4=\");}",".helpPanel .concave.l {transform: rotate(180deg);}",".helpPanel .lens {background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTYiIGhlaWdodD0iNjQiIHZpZXdCb3g9Ii04IC0zMiAxNiA2NCI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTSAwLjgwIDMyIEwgMi4yMCAyNCBMIDMuMjAgMTYgTCAzLjgwIDggTCA0LjAwIDAgTCAzLjgwIC04IEwgMy4yMCAtMTYgTCAyLjIwIC0yNCBMIDAuODAgLTMyIEwgLTAuODAgLTMyIEwgLTIuMjAgLTI0IEwgLTMuMjAgLTE2IEwgLTMuODAgLTggTCAtNC4wMCAwIEwgLTMuODAgOCBMIC0zLjIwIDE2IEwgLTIuMjAgMjQgTCAtMC44MCAzMiBaIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMSI+PC9wYXRoPjwvc3ZnPg==\");}",".helpPanel .mode {background-image: url(\"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9Ii0xMjUgLTMyIDI1MCA2NCIgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2NCI+PHBhdGggZD0iTS0xMjUgLTcgTC01OCAtNSBMLTE5IC00IEwwLjAwIC00IEwxOSAtNCBMNTggLTUgTDEyNSAtNyBNMTI1IDcgTDU4IDUgTDE5IDQgTDAuMDAgNCBMLTE5IDQgTC01OCA1IEwtMTI1IDcgTTAgLTQgTDAgNCIgc3Ryb2tlPSIjMzMzM2NjIiBzdHJva2Utd2lkdGg9IjIiIC8+PHBhdGggZD0iIE0tMTI1IC03IEwtNTggLTUgTCAtMTkgLTQgTDAuMDAgLTQgTDE5IC00IEw1OCAtNSBMMTI1IC03IE0xMjUgNyBMNTggNSBMMTkgNCBMMC4wMCA0IEwtMTkgNCBMLTU4IDUgTC0xMjUgNyBNMCAtNCBMMCA0IiBzdHJva2U9IiNjNzM4MzgiIHN0cm9rZS13aWR0aD0iMSIgLz48cGF0aCBkPSJNLTEyNSAwIEwxMjUgMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEiIC8+PC9zdmc+\");}","@keyframes drag-cavity-cavity {0% { width: 250px; }30% { width: 250px; }70% { width: 150px; }100% { width: 150px; }}","@keyframes drag-cavity-hoverer {0% {transform: scale(0); opacity: 0; }20% {transform: scale(0); opacity: 0; }30% {transform: scale(1); opacity: 1; }70% {transform: scale(1); opacity: 1; }80% {transform: scale(0); opacity: 0; }100% {transform: scale(0); opacity: 0; }}","@keyframes drag-cavity-finger {0% {transform: scale(1.5); opacity: 0; }10% {transform: scale(1.5); opacity: 0; }30% {transform: scale(1); opacity: 1; }70% {transform: scale(1); opacity: 1; }90% {transform: scale(1.5); opacity: 0; }100% {transform: scale(1.5); opacity: 0; }}",".helpPanel .drag-cavity {position: relative;margin: 60px 25px 0;padding: 0 8px;animation: drag-cavity-cavity 4s infinite alternate;}",".helpPanel .drag-cavity .hoverer {position: absolute;top: 16px;right: -6px;width: 24px;height: 24px;background: #ffc;border: 3px solid #b36060;border-radius: 50%;transform-origin: 16px 16px;animation: drag-cavity-hoverer 4s infinite alternate;}",".helpPanel .drag-cavity .mode,.helpPanel .add-cavity .mode,.helpPanel .inspect-cavity .mode {position: absolute;top: 0;left: 8px;width: calc(100% - 16px);height: 64px;}",".helpPanel .drag-cavity .concave,.helpPanel .add-cavity .concave,.helpPanel .add-cavity .lens,.helpPanel .add-cavity .finger,.helpPanel .inspect-cavity .concave,.helpPanel .inspect-cavity .finger {position: absolute;}",".helpPanel .drag-cavity .concave.l,.helpPanel .add-cavity .concave.l,.helpPanel .inspect-cavity .concave.l {left: 0;}",".helpPanel .drag-cavity .concave.r,.helpPanel .add-cavity .concave.r,.helpPanel .inspect-cavity .concave.r {right: 0;}",".helpPanel .drag-cavity .finger {position: absolute;right: -12px;top: 28px;animation: drag-cavity-finger 4s infinite alternate;}","@keyframes add-cavity-lens {0% { left: 20%; top: 80px; }30% { left: 20%; top: 80px; }50% { left: 50%; top: 0; }90% { opacity: 1; }100% { left: 50%; top: 0; opacity: 0; }}","@keyframes add-cavity-mode-full {0% { opacity: 1; }50% { opacity: 1; }55% { opacity: 0; }90% { opacity: 0; }100% { opacity: 1; }}","@keyframes add-cavity-mode-half {0% { opacity: 0; }50% { opacity: 0; }55% { opacity: 1; }90% { opacity: 1; }100% { opacity: 0; }}","@keyframes add-cavity-finger {0% { transform: scale(1.5); opacity: 0; }15% { transform: scale(1.5); opacity: 0; }25% { transform: scale(1); opacity: 1; }50% { transform: scale(1); opacity: 1; }55% { transform: scale(1.5); opacity: 0; }100% { transform: scale(1.5); opacity: 0; }}",".helpPanel .add-cavity {position: relative;padding: 0 8px;margin: 1em 25px;width: 250px;}",".helpPanel .add-cavity .mode.full {animation: add-cavity-mode-full 6s infinite;}",".helpPanel .add-cavity .mode.half {width: calc(50% - 8px);background-position: 50% 0;animation: add-cavity-mode-half 6s infinite;}",".helpPanel .add-cavity .mode.half.l {left: 8px;}",".helpPanel .add-cavity .mode.half.r {left: 50%;}",".helpPanel .add-cavity .lens.animated {margin-top: 4px;margin-left: -8px;animation: add-cavity-lens 6s infinite;}",".helpPanel .add-cavity .lens .finger {top: 21px;animation: add-cavity-finger 6s infinite;}",".helpPanel .add-cavity .source {left: 20%;top: 80px;margin-left: -36px;width: 64px;height: 64px;padding: 4px;background-color: #ccc;background-position: 50% 4px;border-radius: 4px;}","@keyframes inspect-cavity-inspector {0% { opacity: 0; }20% { left: 20%; opacity: 0; }30% { opacity: 1; }40% { left: 20%; }70% { left: 60%; }80% { opacity: 1; }90% { opacity: 0; }100% { left: 60%; opacity: 0; }}","@keyframes inspect-cavity-ellipse {0% { width: 1em; height: 0.5em; }40% { width: 1em; height: 0.5em; }60% { width: 0.5em; height: 1em; }100% { width: 0.5em; height: 1em; }}","@keyframes inspect-cavity-dims-in {0% { opacity: 1; }45% { opacity: 1; }55% { opacity: 0; }100% { opacity: 0; }}","@keyframes inspect-cavity-dims-out {0% { opacity: 0; }45% { opacity: 0; }55% { opacity: 1; }100% { opacity: 1; }}","@keyframes inspect-cavity-slider {0% { top: 0; }20% { top: 0; }30% { top: 1.2em; }80% { top: 1.2em; }90% { top: 0; }100% { top: 0; }}","@keyframes inspect-cavity-finger {0% { top: 22px; opacity: 0; }10% { transform: scale(1.5); opacity: 0; }20% { transform: scale(1); opacity: 1; }30% { top: 22px; transform: scale(1.5); opacity: 0; }70% { top: 8px; transform: scale(1.5); opacity: 0; }80% { transform: scale(1); opacity: 1; }90% { transform: scale(1.5); opacity: 0; }100% { top: 8px; opacity: 0; }}",".helpPanel .inspect-cavity {position: relative;padding: 0 8px;margin: 1em 25px;width: 250px;}",".helpPanel .inspect-cavity .laserCanvasInspect {top: 32px;animation: inspect-cavity-inspector 7s infinite;}",".helpPanel .inspect-cavity .laserCanvasInspect .ellipse {display: inline-block;animation: inspect-cavity-ellipse 7s infinite;}",".helpPanel .inspect-cavity .laserCanvasInspect [data-dimension] > span:first-child {position: absolute;animation: inspect-cavity-dims-in 7s infinite;}",".helpPanel .inspect-cavity .laserCanvasInspect [data-dimension] > span:last-child {animation: inspect-cavity-dims-out 7s infinite;}",".helpPanel .inspect-cavity .generalSelector {position: relative;margin-top: 90px;font-size: 13px;}",".helpPanel .inspect-cavity .generalSelector .slider::after {animation: inspect-cavity-slider 7s infinite;}",".helpPanel .inspect-cavity .generalSelector .finger {animation: inspect-cavity-finger 7s infinite;}","@keyframes sidebar-finger {0% { transform: scale(1.5); opacity: 0; }5% { transform: scale(1.5); opacity: 0; }10% { transform: scale(1); opacity: 1; }15% { transform: scale(1.5); opacity: 0; }55% { transform: scale(1.5); opacity: 0; }60% { transform: scale(1); opacity: 1; }65% { transform: scale(1.5); opacity: 0; }100% { transform: scale(1.5); opacity: 0; }}","@keyframes sidebar-sidebar {0% { left: -250px; }15% { left: -250px; }40% { left: 0; }65% { left: 0; }90% { left: -250px; }100% { left: -250px; }}",".helpPanel .sidebar {position: relative;width: 251px;animation: sidebar-sidebar 7s infinite;}",".helpPanel .sidebar table {position: absolute;right: 0;font-size: 0.8em; border-right: 1px solid #333;}",".helpPanel .sidebar .toggle-info {position: absolute;top: 4em;right: -1.5em;width: 1em;padding: 0.7em 0.25em;color: white;background-color: #333;text-align: center;border-bottom-right-radius: 0.5em;border-top-right-radius: 0.5em;}",".helpPanel .sidebar .toggle-info::after {content: \"\\203A\";}",".helpPanel .sidebar .toggle-info .finger {position: absolute;left: 0.25em;top: 1em;animation: sidebar-finger 7s infinite;}",".helpPanel .about {padding: 0;margin: 0;list-style-type: none;}",".helpPanel .about li {padding: 0.3em 0.2em;}",".laserCanvasInfo,[data-action=\"toggleInfo\"] {transition-property: left, width, height;transition-duration: 350ms;}",".laserCanvasInfo {left: -350px;width: 340px;padding: 0 5px;overflow: auto;background: white;}",".laserCanvasInfo {height: calc(100% - 81px);}","[data-variables-visible=\"true\"] .laserCanvasInfo {height: calc(100% - 221px);}","[data-info-visible=\"true\"] .laserCanvasInfo {left: 0;}","button[data-action=\"toggleInfo\"] {left: 0;}","[data-info-visible=\"true\"] button[data-action=\"toggleInfo\"] {left: 349px;}","button[data-action=\"toggleInfo\"],button[data-action=\"toggleVariables\"] {color: white;background: #333;border: none;font-size: 24px;cursor: pointer;}","button[data-action=\"toggleInfo\"] {top: 39%;height: 2em;padding: 1em 0.5em 2.4em 0.5em;border-bottom-right-radius: 1em;border-top-right-radius: 1em;}","button[data-action=\"toggleInfo\"]:after {content: \"\\203A\";}","[data-info-visible=\"true\"] button[data-action=\"toggleInfo\"]:after {content: \"\\2039\";}",".laserCanvasInfo ul {list-style-type: none;padding: 0;margin: 0;}",".laserCanvasInfo ul li {margin: 0.3em 0;}",".laserCanvasInfo .infoPanelOptions {margin-bottom: 2.5em;}",".laserCanvasInfo .versionInfo {font-size: 0.7em;}",".infoPropertiesPanel h1 {margin: 0.5em 0 0 0;padding: 0.2em 0;text-align: center;font-size: 1em;cursor: default;transition: background-color 150ms;}",".infoPropertiesPanel.panel-highlight h1 {background-color: rgba(217, 218, 57, 0.5);}",".infoPropertiesPanel table {width: 100%;border-collapse: collapse;}",".infoPropertiesPanel table td {padding: 0.2em;border-top: 1px solid;border-bottom: 1px solid;border-color: #aaa;}",".infoPropertiesPanel td[data-cell] {text-align: right;}",".infoPropertiesPanel td[data-cell=\"label\"],.infoPropertiesPanel td[data-cell=\"unit\"] {text-align: left;}","[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"abcdSag\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"abcdTan\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"angleOfIncidence\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"curvatureFace1\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"curvatureFace2\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"distanceToNext\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"elementDistanceToNext\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"focalLength\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"groupDelayDispersion\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"groupVelocityDispersion\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"modeSpacing\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"opticalLength\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"physicalLength\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"radiusOfCurvature\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"rayleighLength\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"refractiveIndex\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"thickness\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"waistSize\"],[data-show-advanced=\"false\"] .infoPropertiesPanel [data-property-name=\"wavefrontROC\"] {display: none;}","[data-variables-visible=\"false\"] [data-cell=\"graph\"] > span {display: none;}","[data-cell=\"graph\"] input[type=\"checkbox\"] {position: relative;visibility: hidden;cursor: pointer;}","[data-cell=\"graph\"] input[type=\"checkbox\"]::after {content: \"\\1f441\";position: absolute;left: 0;top: -0.1em;visibility: visible;opacity: 0.2;transition: opacity 150ms;}","[data-cell=\"graph\"] input[type=\"checkbox\"]:checked::after {opacity: 1;}",".checkboxInput input[type=\"checkbox\"],input.laserCanvasInput[type=\"checkbox\"],input.laserCanvasCheckbox[type=\"checkbox\"] {position: relative;width: 2.5em;margin-left: 1em;font-size: inherit;}",".checkboxInput input[type=\"checkbox\"]::before,input.laserCanvasInput[type=\"checkbox\"]::before,input.laserCanvasCheckbox[type=\"checkbox\"]::before {content: \"\";display: inline-block;position: absolute;left: -0.9em;top: -0.2em;width: 3em;height: 1.4em;border-radius: 0.7em;background: #a8a8a8;box-shadow: 0 0 0.5em rgba(0, 0, 0, 0.2) inset;}",".checkboxInput input[type=\"checkbox\"]::after,input.laserCanvasInput[type=\"checkbox\"]::after,input.laserCanvasCheckbox[type=\"checkbox\"]::after {content: \"\";position: absolute;width: 1.2em;height: 1.2em;left: -0.7em;top: -0.1em;border-radius: 0.5em;background: #f4f4f4;text-align: center;transition: left 150ms;}",".checkboxInput input[type=\"checkbox\"]:checked::after,input.laserCanvasInput[type=\"checkbox\"]:checked::after,input.laserCanvasCheckbox[type=\"checkbox\"]:checked::after {content: \"\";left: 0.7em;}",".checkboxInput input[type=\"checkbox\"]::after,input.laserCanvasInput[type=\"checkbox\"]::after {content: \"\\d7\";}",".checkboxInput input[type=\"checkbox\"]:checked::after,input.laserCanvasInput[type=\"checkbox\"]:checked::after {content: \"\\2713\";}",".laserCanvasInspect {position: absolute;margin-left: -24px;margin-top: 8px;padding: 4px 0.6em;border-radius: 1em;background-color: rgba(255, 255, 255, 0.8);pointer-events: none;}",".laserCanvasInspect:before {content: \" \";position: absolute;left: 16px;top: -16px;width: 0;height: 0;border: 8px solid transparent;border-bottom-color: #fff;}",".laserCanvasInspect .ellipse {display: inline-block;vertical-align: middle;border: 1px solid;background: #b7b9c0;border-radius: 50%;}",".laserCanvasToolbar {bottom: 0;width: 100%;height: 80px;margin-top: -1px;border-top: 1px solid #ccc;white-space: nowrap;text-align: center;}",".laserCanvasToolbar .generalSelector,.laserCanvasToolbar button[data-insert-element] {margin-left: 0.15em;margin-right: 0.15em;}",".generalSelector {display: inline-block;margin: 0.5em;font-size: inherit;font-family: inherit;}",".generalSelector .slider,.generalSelector .buttons {display: inline-block;vertical-align: middle;}",".generalSelector button {display: block;padding: 0.2em;border: none;color: inherit;background: none;cursor: pointer;}",".generalSelector .slider {width: 1em;height: 2.2em;padding: 0.2em;background: #999;border-radius: 0.6em;}",".generalSelector .slider:after {content: \" \";position: relative;display: block;top: 0;width: 1em;height: 1em;background: white;border-radius: 0.5em;transition: top ease-out 150ms;}","[data-interaction=\"inspect\"] .interactionSelector .slider:after,[data-theme=\"light\"] .themeSelector .slider:after {top: 1.2em;}","[data-theme=\"dark\"] .themeSelector .slider:after {top: 2.4em;}",".generalSelector.themeSelector .slider {height: 3.4em;}","[data-insert-element] {position: relative;display: inline-block;min-height: 64px;background: #999;border: none;border-radius: 1em;vertical-align: top;}","[data-insert-element]:after {position: absolute;content: \" \";top: -1.9em;left: 50%;width: 0;margin-left: -1em;border: 1em solid transparent;border-bottom-color: #999;}","[data-theme=\"line\"] [data-insert-element] {background: #d7d7d7;}","[data-theme=\"line\"] [data-insert-element]:after {border-bottom-color: #d7d7d7;}","[data-theme=\"line\"] .generalSelector .slider {background-color: #d7d7d7;}",".laserCanvasToolbar .feedbackLink {position: absolute;top: -1.35em;right: 0.5em;text-decoration: none;font-size: 16px;}",".laserCanvasToolbar .feedbackLink > span {animation: gloss 7s linear infinite;}",".laserCanvasToolbar .feedbackLink > span:nth-child(1) { animation-delay: 0; }",".laserCanvasToolbar .feedbackLink > span:nth-child(2) { animation-delay: 50ms; }",".laserCanvasToolbar .feedbackLink > span:nth-child(3) { animation-delay: 100ms; }",".laserCanvasToolbar .feedbackLink > span:nth-child(4) { animation-delay: 150ms; }",".laserCanvasToolbar .feedbackLink > span:nth-child(5) { animation-delay: 200ms; }",".laserCanvasToolbar .feedbackLink > span:nth-child(6) { animation-delay: 250ms; }",".laserCanvasToolbar .feedbackLink > span:nth-child(7) { animation-delay: 300ms; }",".laserCanvasToolbar .feedbackLink > span:nth-child(8) { animation-delay: 350ms; }","@keyframes gloss {0% { color: #339; }96% { color: #339; }98% { color: #99c; }100% { color: #339; }}",".propertiesPanel,.elementScreenPanel,.sellmeierPanel {position: absolute;left: 20px;top: 20px;padding: 0.5em;background: rgba(255, 255, 255, 0.85);border-radius: 1em;box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);}",".propertiesPanel {display: none;}",".propertiesPanel[data-visible=\"true\"] {display: block;}",".propertiesPanel h1,.elementScreenPanel h1,.sellmeierPanel h1 {margin: 0.2em;font-size: 1em;text-align: center;}",".propertiesPanel h1,.elementScreenPanel h1 {text-transform: uppercase;}",".propertiesPanel h1 input[type=\"text\"] {width: 80%;border: none;background: none;text-align: center;font-family: inherit;font-size: inherit;font-weight: inherit;text-transform: inherit;}",".propertiesPanel table {width: 100%;}",".propertiesPanel table th {display: none;border-bottom: 1px solid #666;}",".propertiesPanel table th,.propertiesPanel table td {padding-top: 0.15em;padding-bottom: 0.15em;}","input.laserCanvasInput[type=\"number\"],input.laserCanvasInput[type=\"text\"] {padding: 0.1em 0.5em;background: white;border-radius: 0.5em;font-family: inherit;font-size: inherit;}","input.laserCanvasInput[type=\"number\"],input.laserCanvasInput[type=\"text\"] {width: 3.0em;border: none;box-shadow: 0.1em 0.1em 0.2em rgba(0, 0, 0, 0.3) inset;text-align: right;}",".dragbar {background-image: linear-gradient(to bottom,#555  0%, #555  9%,#fff 10%, #fff 19%,#555 20%, #555 29%, #fff 30%, #fff 39%, #555 40%, #555 49%,transparent 50%);}",".propertiesPanel .dragbar,.elementScreenPanel .dragbar,.sellmeierPanel .dragbar {width: calc(100% + 1em);height: 2em;margin-top: -0.5em;margin-left: -0.5em;margin-bottom: -1em;border-top-left-radius: 1em;border-top-right-radius: 1em;opacity: 0.5;}",".propertiesPanel thead tr[data-property-name] {display: none;}",".propertiesPanel[data-can-delete=\"false\"] button[data-action=\"delete\"],.propertiesPanel[data-has-refractive-index=\"false\"] button[data-action=\"sellmeier\"] {display: none;}",".propertiesPanel[data-can-delete=\"true\"][data-has-refractive-index=\"true\"] button[data-action=\"sellmeier\"] {float: left;}",".propertiesPanel[data-can-delete=\"true\"][data-has-refractive-index=\"true\"] button[data-action=\"delete\"] {float: right;}",".propertyInput {position: relative;display: flex;flex-direction: row;justify-content: flex-end;}",".propertyInput .selector::after,.propertyInput button {margin: 0 0.1em;padding: 0.1em 0.5em;color: white;background: #333;border: none;border-radius: 1em;font-size: 0.8em;font-family: inherit;}",".propertyInput button:hover {background-color: #575757;text-shadow: 0.1em 0.1em 0.2em rgba(0, 0, 0, 0.3);}",".propertyInput button[disabled],.propertyInput button[disabled]:hover {background: #ccc;text-shadow: none;}",".propertyInput button[data-step=\"-1\"] {border-top-right-radius: 0;border-bottom-right-radius: 0;}",".propertyInput .selector::after,.propertyInput button[data-step=\"+1\"] {border-top-left-radius: 0;border-bottom-left-radius: 0;}",".propertyInput span.input {position: relative;width: 4em;}","input.demoPropertyInput,.propertyInput input {padding: 0.1em 0.5em;background: white;border: none;border-radius: 0.5em;box-shadow: 0.1em 0.1em 0.2em rgba(0, 0, 0, 0.3) inset;text-align: right;font-family: inherit;font-size: inherit;transition: all 150ms;}",".propertyInput input {position: absolute;left: 0;top: -0.2em;width: 3.0em;}","input.demoPropertyInput {width: 6em;text-align: center;}","input.demoPropertyInput[data-expression=\"true\"],.propertyInput input[data-expression=\"true\"] {color: #2141bd;background-color: rgb(239, 243, 249);}",".propertyInput input:focus {width: 6em;margin-left: -1.5em;margin-right: -1.5em;}",".propertyInput[disabled] {color: #626262;background-color: #e7e7e7;box-shadow: none;}",".propertyInput .selector::after {content: \"\u25bc\";padding: 0.6em 0.8em;pointer-events: none;border-top-right-radius: 2em;border-bottom-right-radius: 2em;font-size: 0.5em;}",".propertyInput select {position: absolute;width: 2.4em;opacity: 0.01;}",".propertyInput[data-has-standard=\"true\"] button[data-step=\"+1\"],.propertyInput .selector {display: none;}",".propertyInput[data-has-standard=\"true\"] button[data-step=\"-1\"] {visibility: hidden;}",".propertyInput[data-has-standard=\"true\"] .selector {display: unset;}",".selectInput select {padding: 0.1em 0.5em;min-width: 6em;background: white;border-radius: 0.5em;font-family: inherit;font-size: inherit;}",".sellmeierPanel {width: 20em;}",".sellmeierPanel[data-visible=\"false\"] {display: none;}",".sellmeierPanel input,.sellmeierPanel select {color: inherit;font-size: inherit;font-family: inherit;}",".sellmeierPanel .materials input{display: block;width: 95%;text-align: left;}",".sellmeierPanel ul[data-field] {display: inline-block;width: 49%;padding: 0.1em 0;margin: 0;margin-right: 0.5%;height: 8em;overflow: auto;list-style-type: none;vertical-align: top;}",".sellmeierPanel ul[data-field] > li {padding: 0.2em 0.5em;border-radius: 0.3em;cursor: pointer;}",".sellmeierPanel ul[data-field] > li:hover {background-color: #d7d7d7;}",".sellmeierPanel ul[data-field] > li[data-selected=\"true\"] {color: white;background-color: #555;}",".sellmeierPanel a {color: inherit;text-decoration: none;}",".sellmeierPanel a:hover {color: inherit;text-decoration: underline;}",".sellmeierPanel .scroller {max-height: 14em;overflow-y: auto;}",".sellmeierPanel a.attribution {color: #999;border-top: 1px solid;font-size: 0.8em;}",".sellmeierPanel .parameters table {width: 100%;border-collapse: collapse;border: 1px solid;border-left: none;border-right: none;}",".sellmeierPanel .parameters table td {border-bottom: 1px solid #ccc}",".sellmeierPanel .parameters table tr:last-child td {border-bottom: none;}",".sellmeierPanel .wavelengthRange {white-space: nowrap;}",".sellmeierPanel .attribution,.sellmeierPanel [data-field=\"references\"] {display: none;}",".sellmeierPanel[data-show-references=\"true\"] .attribution {display: block;}",".sellmeierPanel[data-show-references=\"true\"] [data-field=\"references\"] {display: block;font-size: 0.8em;}",".sellmeierPanel .toggleReferences {cursor: pointer;}",".sellmeierPanel [data-action=\"apply\"] {display: none;width: 8em;margin: 0.2em auto;}",".sellmeierPanel[data-has-apply-action=\"true\"] [data-action=\"apply\"] {display: block;}",".infrac {display: inline-block;text-align: center;font-size: 0.8em;}",".infrac > span {display: block;}",".infrac > span:first-child {border-bottom: 0.08em solid;}","[data-theme=\"line\"] .laserCanvasInspect,[data-theme=\"light\"] .laserCanvasInfo,[data-theme=\"light\"] .laserCanvasToolbar,[data-theme=\"light\"] .laserCanvasVariablesPanel,[data-theme=\"light\"] .laserCanvasInspect {background-color: #f7f7f7;}","[data-theme=\"light\"] .propertiesPanel {background-color: #f1f1f1;}","[data-theme=\"dark\"] .laserCanvasInfo,[data-theme=\"dark\"] .propertiesPanel,[data-theme=\"dark\"] .helpPanel,[data-theme=\"dark\"] .laserCanvasToolbar,[data-theme=\"dark\"] .laserCanvasVariablesPanel {color: #e7e7e7;background-color: #404040;}","[data-theme=\"dark\"] .helpPanel a {color: #a3a3ff;}","[data-theme=\"line\"] .laserCanvasToolbar,[data-theme=\"line\"] .laserCanvasVariablesPanel {background-color: #fff;}","[data-theme=\"light\"] .laserCanvasToolbar,[data-theme=\"light\"] .laserCanvasVariablesPanel {border-top-color: #676767;}","[data-theme=\"line\"] .laserCanvasInspect,[data-theme=\"light\"] .laserCanvasInspect {border: 1px solid #676767;}","[data-theme=\"line\"] .laserCanvasInspect:before,[data-theme=\"light\"] .laserCanvasInspect:before {border-bottom-color: #676767;}","[data-theme=\"line\"] .laserCanvasInfo,[data-theme=\"light\"] .laserCanvasInfo {border-right: 1px solid #676767;}","[color-theme-plane=\"sag\"] {color: #933;}","[color-theme-plane=\"tan\"] {color: #339;}","[data-theme=\"dark\"] [color-theme-plane=\"sag\"] {color: #c66;}","[data-theme=\"dark\"] [color-theme-plane=\"tan\"] {color: #ccf;}","[color-theme-plane=\"sag\"]::after,[color-theme-plane=\"tan\"]::after {position: relative;bottom: -0.2em;font-size: 0.6em;font-style: italic;}","[color-theme-plane=\"sag\"]::after {content: \"S\";}","[color-theme-plane=\"tan\"]::after {content: \"T\";}",".LaserCanvasGraph2d {position: relative;}",".LaserCanvasGraph2d .plot {position: absolute;border: 1px solid;left: 4em;top: 0.75em;right: 2em;bottom: 1.5em;}",".LaserCanvasGraph2d .Graph2dAxis {position: absolute;}",".LaserCanvasGraph2d .Graph2dAxis[data-direction=\"horizontal\"] {left: 0;bottom: 0;width: 100%;border-top: 1px solid;}",".LaserCanvasGraph2d .Graph2dAxis[data-direction=\"vertical\"] {left: 0;bottom: 0;height: 100%;border-right: 1px solid;}",".LaserCanvasGraph2d .Graph2dAxis .ticks {position: absolute;}",".LaserCanvasGraph2d .Graph2dAxis[data-direction=\"horizontal\"] .ticks {width: 100%;}",".LaserCanvasGraph2d .Graph2dAxis[data-direction=\"vertical\"] .ticks {height: 100%;}",".LaserCanvasGraph2d .Graph2dAxis .ticks label {position: absolute;}",".LaserCanvasGraph2d .Graph2dAxis[data-direction=\"horizontal\"] .ticks label {width: 5em;margin-left: -2.5em;text-align: center;}",".LaserCanvasGraph2d .Graph2dAxis[data-direction=\"vertical\"] .ticks label {width: 5em;height: 1.15em;line-height: 1.15em;margin-left: -5.2em;margin-bottom: -0.45em;text-align: right;}",".LaserCanvasGraph2d .Graph2dAxis .ticks label::before {content: \"\";position: absolute;}",".LaserCanvasGraph2d .Graph2dAxis[data-direction=\"vertical\"] .ticks label::before {bottom: calc(50% - 2px);right: -0.6em;width: 0.5em;border-bottom: 1px solid;}",".LaserCanvasGraph2d .Graph2dAxis[data-direction=\"horizontal\"] .ticks label::before {top: -0.5em;left: 50%;;height: 0.5em;border-left: 1px solid;}",".graphCollection .graphItems {white-space: nowrap;overflow-x: auto;}",".graphCollection .graphItems .graphCollectionPanel {display: inline-block;}",".graphCollectionPanel .title,.graphCollectionPanel .variable {text-align: center;}",".graphCollection .about {max-width: 360px;}",".graphCollection[data-has-graphs=\"true\"] .about {display: none;}",".LaserCanvasNumberSlider {position: relative;}",".LaserCanvasNumberSlider input[data-prop] {width: 3.5em;border: none;background: none;color: inherit;font-size: inherit;font-family: inherit;}",".LaserCanvasNumberSlider .range {margin-top: 2.2em;padding: 0 2.5em;}",".LaserCanvasNumberSlider .trough {position: relative;padding: 0 0.5em;margin: 0.3em 0;height: 0.7em;background-color: #999;border-radius: 1em;}",".LaserCanvasNumberSlider .thumb {position: absolute;top: 0;left: 0;}",".LaserCanvasNumberSlider .handle {margin-left: -0.7em;margin-top: -0.3em;width: 1.4em;height: 1.4em;background-color: #666;border-radius: 1em;}",".LaserCanvasNumberSlider .callout {position: absolute;top: -2.2em;left: -2.5em;width: 5em;text-align: center;}",".LaserCanvasNumberSlider .callout input {width: 100%;text-align: center;}",".LaserCanvasNumberSlider .limits {display: flex;flex-direction: row;justify-content: space-between;padding: 0 2.5em;}",".LaserCanvasNumberSlider input[data-prop=\"min\"] {text-align: left;}",".LaserCanvasNumberSlider input[data-prop=\"max\"] {text-align: right;}","#LaserCanvasVariablesPanel {position: absolute;left: 0;bottom: 0;width: 100%;height: 0;transition-property: height;transition-duration: 350ms;border-top: 1px solid #ccc;overflow-y: hidden;}","[data-variables-visible=\"true\"] #LaserCanvasVariablesPanel {height: 220px;}","button[data-action=\"toggleVariables\"] {left: 1em;width: 1.3em;border-top-left-radius: 0.8em;border-top-right-radius: 0.8em;}","button[data-action=\"toggleVariables\"] {bottom: -2px;transition-property: bottom;transition-duration: 350ms;}","button[data-action=\"toggleVariables\"]:after {content: \"\\3a3\";font-size: 0.8em;}","[data-variables-visible=\"true\"] button[data-action=\"toggleVariables\"] {bottom: 219px;}","[data-variables-visible=\"true\"] button[data-action=\"toggleVariables\"]:after {content: \"\\2304\"}","#LaserCanvasVariablesPanel .content {display: flex;flex-direction: row;}","#LaserCanvasVariablesPanel .variables {width: 15em;}","#LaserCanvasVariablesPanel .variables .heading {margin: 0 0.5em;font-weight: bold;border-bottom: 1px solid;text-align: center;}","#LaserCanvasVariablesPanel .LaserCanvasGraph2d {width: 320px;height: 160px;}",".helpButton.docs { display: none; }"]);!function(){var t=document.createElement("meta");document.getElementsByTagName("head")[0].appendChild(t);t.setAttribute("name","viewport");t.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1");}();!function(){var t=document.createElement("meta");document.getElementsByTagName("head")[0].appendChild(t);t.setAttribute("charset","utf-8");}();!function(){var t=document.createElement("link");document.getElementsByTagName("head")[0].appendChild(t);t.rel="stylesheet";t.href="https://fonts.googleapis.com/css?family=Open+Sans";}();document.body.setAttribute("data-loading","true");document.body.setAttribute("data-info-visible","false");document.body.setAttribute("data-variables-visible","false");document.getElementById("root").innerHTML=' <div id="LaserCanvasFrame" class="laserCanvasFrame"> <div class="laserCanvasHighlight"> <div class="highlight"></div> </div> <canvas id="LaserCanvas" class="hidden"></canvas> <div class="laserCanvasInspect"><span data-dimension="sag" color-theme-plane="sag"></span> <span class="ellipse"></span> <span data-dimension="tan" color-theme-plane="tan"></span> &micro;m</div> </div> <div id="LaserCanvasToolbar" class="laserCanvasToolbar"> <div class="generalSelector themeSelector"> <div class="slider" data-set-theme="toggle"></div> <div class="buttons"> <button data-set-theme="line"  data-localize="buttonLine">Line</button> <button data-set-theme="light" data-localize="buttonLight">Light</button> <button data-set-theme="dark"  data-localize="buttonDark">Dark</button> </div> </div> <div class="generalSelector interactionSelector"> <div class="slider" data-render-interaction="toggle"></div> <div class="buttons"> <button data-render-interaction="layout"  data-localize="buttonLayout">Layout</button> <button data-render-interaction="inspect" data-localize="buttonInspect">Inspect</button> </div> </div> <button data-insert-element="Mirror"     data-theme-image="mirrorPlane"Mirror</button> <button data-insert-element="Lens"       data-theme-image="lensConvex"Lens</button> <button data-insert-element="Dielectric" data-theme-image="block"Dielectric</button> <button data-insert-element="Screen"     data-theme-image="screen"Screen</button> <a href="mailto:lasercanvas@outlook.com" class="feedbackLink"><span>F</span><span>e</span><span>e</span><span>d</span><span>b</span><span>a</span><span>c</span><span>k</span></a> </div> <div id="LaserCanvasVariablesPanel" class="laserCanvasVariablesPanel"> <div class="content"> <div class="variables"><div class="heading">Variables</div></div> <div class="graphs"></div> </div> </div> <div id="LaserCanvasNewPanel" class="laserCanvasNewPanel"> <button data-create-system="linear"<span data-localize="Linear resonator"></span></button> <button data-create-system="endcap"<span data-localize="End coated resonator"></span></button> <button data-create-system="ultrafast"<span data-localize="Ultrafast resonator"></span></button> <button data-create-system="ring"<span data-localize="Ring resonator"></span></button> <button data-create-system="propagation"><span data-localize="Propagation system"></span></button> <button data-action="saveFile"><span data-localize="Download"></span></button> <button data-action="openFile"> <input type="file" /> <span data-localize="Open file..."></span> </button> </div> <div id="LaserCanvasInfo" class="laserCanvasInfo"  data-show-advanced="false"> <div class="systems"> </div> <div class="elements"> <div class="template" data-index="" data-element-type=""> <h1></h1> <table> <tbody> </tbody> </table> </div> </div> <ul class="infoPanelOptions"> <li><label><input type="checkbox" data-action="toggleInfopanel" data-attribute="show-advanced" class="laserCanvasInput" /> &nbsp; <span data-localize="Extended data"></span></label></li> <li><button class="lcbutton padded" data-action="download-svg" data-localize="Download SVG"></button></li> <li><span class="versionInfo"></span></li> </ul> </div> <button id="LaserCanvasToggleInfo" data-action="toggleInfo"></button> <button id="LaserCanvasToggleVariables" data-action="toggleVariables"></button> <div class="helpButton help" onclick="LaserCanvas.HelpPanel.show()">?</div> <div class="helpButton feedback"> <a href="mailto:lasercanvas@outlook.com" title="Send feedback"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 -10 20 20"> <ellipse cx="0" cy="0" rx="8" ry="5" /> <path d="M-7,8 L-4,0 L2,4 Z" /> </svg> </a> </div> <div class="helpButton docs"> <a href="lc5docs/" title="LaserCanvas 5 documentation" target="_blank"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"> <path d="M2,1 L6,1 L8,3 L8,9 L2,9 L2,1  M3,3 L7,3  M3,5 L7,5  M3,7 L7,7" stroke="black" fill="none"/> </svg> </a> </div> <div class="progressBarLoading"><div></div></div> ';"use strict";window.LaserCanvas={Element:{},theme:{current:{}},getScript:(function(){var loadedScripts={};return function(src,fn,thisArg){var s,loaded=function(){fn.call(thisArg||this);},cm=function(){if(s.readyState==='loaded'||s.readyState==='completed'||s.readyState==='complete'){loaded();}else{setTimeout(cm,100);}};if(loadedScripts[src]){loaded();}else{s=document.createElement('script');s.src=src;document.getElementsByTagName('head')[0].appendChild(s);if(fn){if(s.addEventListener){s.addEventListener('load',loaded);}else{cm();}}}};}()),getStyle:(function(){var loadedStyles={};return function(href,fn,thisArg){var s,loaded=function(){fn.call(thisArg||this);};if(loadedStyles[href]){loaded();}else{s=document.createElement('link');s.rel='stylesheet';s.href=href;s.onload=loaded;(document.head||document.getElementsByTagName('head')[0]).appendChild(s);}};}())};(function(){"use strict";var progressFill=null,files=["js/LaserCanvas.js","css/HelpPanel.css","css/InfoPanel.css","css/InfoPropertiesPanel.css","css/LaserCanvasCheckbox.css","css/LaserCanvasInspect.css","css/LaserCanvasToolbar.css","css/PropertiesPanel.css","css/PropertyInput.css","css/SelectInput.css","css/SellmeierPanel.css","css/Themes.css","js/Graph2d/Graph2d.css","js/GraphCollection/GraphCollection.css","js/NumberSlider/NumberSlider.css","js/VariablePanel/VariablePanel.css","js/element/Element.js","js/element/ElementDielectric.js","js/element/ElementDispersion.js","js/element/ElementGroups.js","js/element/ElementLens.js","js/element/ElementMirror.js","js/element/ElementScreen.js","js/Graph2d/Graph2d.js","js/Graph2d/Graph2dAxis.js","js/GraphCollection/GraphCollection.js","js/GraphCollection/GraphItem.js","js/NumberSlider/NumberSlider.js","js/panel/CheckboxInput.js","js/panel/HelpPanel.js","js/panel/InfoPanel.js","js/panel/InfoPropertiesPanel.js","js/panel/InputPropertyRow.js","js/panel/PropertiesPanel.js","js/panel/PropertyInput.js","js/panel/SelectInput.js","js/Renderer/Render.js","js/Renderer/RenderSvg.js","js/system/System.js","js/system/SystemAbcd.js","js/system/SystemAdjustLite.js","js/system/SystemJson.js","js/system/SystemLoad.js","js/system/SystemMigrate.js","js/system/SystemNew.js","js/system/SystemRing.js","js/Toolbar/Toolbar.js","js/VariablePanel/VariablePanel.js","js/Equation.js","js/LaserCanvasTheme.js","js/Localize.js","js/Math.js","js/Sellmeier.js","js/Utilities.js","js/Variables.js","js/refractiveIndex.js",],items=2
,loaded=0,updateBar=function(){if(progressFill){progressFill.style.width=Math.round(100*(loaded+1)/items)+'%';}},ready=function(){var LaserCanvas=window.LaserCanvas;updateBar();if((loaded+=1,loaded)<items)return;LaserCanvas.localize.elements();if(progressFill){progressFill.parentNode.parentNode.removeChild(progressFill.parentNode);}
LaserCanvas.theme.set('light',function(){var
cnv=document.getElementById('LaserCanvas'),info=document.getElementById('LaserCanvasInfo');cnv.className='render2d';LaserCanvas.app=new LaserCanvas.Application(cnv,info);LaserCanvas.app.init();});},loadFiles=function(){var getScript=window.LaserCanvas.getScript,getStyle=window.LaserCanvas.getStyle;getScript(files[0],function(){var k,fileName;for(k=1;k<files.length;k+=1){fileName=files[k];if(fileName.substr(fileName.length-4)==='.css'){getStyle(fileName,ready);}else{getScript(fileName,ready);}}
ready();});},get=function(url,callback){if(!url){return;}
var xhr=new XMLHttpRequest();xhr.open("GET",url);xhr.addEventListener("load",function(){callback(this.responseText);});xhr.send();};document.addEventListener('DOMContentLoaded',function(){progressFill=document.querySelector('.progressBarLoading > div');ready();get("",function(info){console.log(info);if(/^Version/.test(info)){document.querySelector(".versionInfo").innerText=info;}});},false);;ready();}());window.LaserCanvas=window.LaserCanvas||{Element:{},};window.LaserCanvas.Application=function(canvas,info){"use strict";var msystem,mrender,minfo,mvariables,mvariablePanel,mpropertiesPanel,mgraphCollection,mlisteners={interactionchange:[],insertelement:[]},addEventListener=function(name,fn){if(mlisteners.hasOwnProperty(name.toLowerCase())){mlisteners[name.toLowerCase()].push(fn);}
return this;},fireEventListeners=function(name,args){var k,listeners=mlisteners[name.toLowerCase()];if(listeners&&listeners.length>0){for(k=0;k<listeners.length;k+=1){listeners[k].apply(this,Array.prototype.slice.call(arguments,1));}}},onResize=function(){var id,el,key,sliver=0,w=window.innerWidth-sliver,h=window.innerHeight-sliver,ht=80,pos={'#LaserCanvas':{width:w,height:h-ht},};for(id in pos){if(pos.hasOwnProperty(id)&&(el=document.querySelector(id))){for(key in pos[id]){if(pos[id].hasOwnProperty(key)){el.style[key]=pos[id][key]+'px';}}
if(el.nodeName==='CANVAS'){el.width=pos[id].width;el.height=pos[id].height;}}}
mrender.onResize();},init=function(){var LaserCanvas=window.LaserCanvas;msystem=new LaserCanvas.System();minfo=new LaserCanvas.InfoPanel(info);mrender=new LaserCanvas.Render(msystem,minfo,canvas);mpropertiesPanel=new LaserCanvas.PropertiesPanel(mrender,msystem);mgraphCollection=new LaserCanvas.GraphCollection();mvariables=new LaserCanvas.Variables();mvariablePanel=new LaserCanvas.VariablePanel(mvariables);onResize();window.addEventListener('resize',onResize,false);var makeToggle=function(attr){return function(){var el=document.body;el.setAttribute(attr,el.getAttribute(attr)==='true'?'false':'true');onResize();};};document.querySelector('#LaserCanvasToggleInfo').onclick=makeToggle("data-info-visible");document.querySelector('#LaserCanvasToggleVariables').onclick=makeToggle("data-variables-visible");var scanVariables=function(){for(var variableName of["x","y"]){if(mgraphCollection.hasRange(variableName)){mgraphCollection.scanStart(variableName);mvariablePanel.scan(variableName,function(variableValue){msystem.onVariablesChange();msystem.calculateAbcd();mgraphCollection.scanValue(variableName,variableValue);});mgraphCollection.scanEnd(variableName,mvariables.value()[variableName]);msystem.onVariablesChange();}}};var updateAll=function(){mrender.update();mpropertiesPanel.update();minfo.update(msystem,mrender);};msystem.addEventListener('update',function(){scanVariables();msystem.calculateAbcd();updateAll();});msystem.addEventListener('change',function(){scanVariables();msystem.calculateAbcd();mgraphCollection.change(msystem.elements());minfo.change();updateAll();});mvariables.addEventListener("change",function(){msystem.onVariablesChange(true);msystem.update();});mgraphCollection.addEventListener("change",function(){scanVariables();});var variablesGetter=mvariables.value.bind(mvariables),variablesSetter=mvariablePanel.setVariables.bind(mvariablePanel);msystem.setVariablesGetter(variablesGetter);mrender.setVariablesGetter(variablesGetter);minfo.init(msystem,mrender,variablesGetter,mgraphCollection.toggleGraph.bind(mgraphCollection));mvariablePanel.appendTo(document.querySelector("#LaserCanvasVariablesPanel .variables"));mgraphCollection.appendTo(document.querySelector("#LaserCanvasVariablesPanel .graphs"));var toLocalStorageDelayed=new LaserCanvas.Utilities.Debounce(2500);msystem.addEventListener("update",function(){toLocalStorageDelayed.delay(saveJson,null,LaserCanvas.SystemUtil.toLocalStorage)});var loadJson=function(json){json=LaserCanvas.SystemUtil.migrateJson(json);mvariablePanel.setVariables(json.variables);msystem.fromJson(json.system);mgraphCollection.fromJson(json.graphs,msystem,msystem.elements());minfo.updateGraphs(mgraphCollection);mrender.resetTransform();};var saveJson=function(destination){var json={version:LaserCanvas.SystemUtil.CURRENT_VERSION,system:msystem.toJson(),variables:mvariablePanel.toJson(),graphs:mgraphCollection.toJson()};destination(json);};new LaserCanvas.Toolbar(msystem,mrender,fireEventListeners).init(variablesGetter,variablesSetter).initDrag().initFileOpen(loadJson).initFileSave(saveJson).initSystemNew(launch);var useLocalStorage=true;if(useLocalStorage){try{LaserCanvas.SystemUtil.fromLocalStorage(loadJson);}catch(e){msystem.createNew(LaserCanvas.System.configuration.linear);}}else{msystem.createNew(LaserCanvas.System.configuration.linear);}},launch=function(configuration){mrender.resetTransform();mrender.setInteraction(window.LaserCanvas.Render.interaction.layout);msystem.createNew(configuration);};this.addEventListener=addEventListener;this.fireEventListeners=fireEventListeners;this.init=init;};window.LaserCanvas.Enum={renderLayer:{axis:'axis',sagittal:'sagittal',tangential:'tangential',optics:'optics',distance:'distance',annotation:'annotation'},modePlane:{sagittal:0,tangential:1}};window.LaserCanvas.clone=function(obj){var
cloneRecursive=function(o){var k,ret;if(typeof o==='string'||typeof o==='number'||o===null){return o;}else if(o.constructor===Array.prototype.constructor){ret=[];for(k=0;k<o.length;k+=1){ret[k]=cloneRecursive(o[k]);}}else{ret={};for(k in o){if(o.hasOwnProperty(k)){ret[k]=cloneRecursive(o[k]);}}}
return ret;};return cloneRecursive(obj);};window.LaserCanvas.constant={c:0.299792458};window.LaserCanvas.unit={angleOfIncidence:'°',curvatureFace1:'mm',curvatureFace2:'mm',distanceToNext:'mm',distanceToWaist:'mm',faceAngle:'°',focalLength:'mm',groupDelayDispersion:'fs²',groupVelocityDispersion:'µm⁻²',indexDispersion:'µm⁻¹',indexSecondDerivative:'µm⁻²',initialWaist:'µm',modeSize:'µm',modeSpacing:'MHz',opticalLength:'mm',physicalLength:'mm',prismInsertion:'mm',radiusOfCurvature:'mm',raleighLength:'mm',thermalLens:'mm',thickness:'mm',waistSize:'µm',wavefrontROC:'mm',wavelength:'nm'};(function(LaserCanvas){LaserCanvas.Element.atLocation=function(pt,tol){return Math.abs(this.loc.x-pt.x)<tol&&Math.abs(this.loc.y-pt.y)<tol;};LaserCanvas.Element.groupDelayDispersion=function(lam,L){var c=LaserCanvas.constant.c;return this===this.group[0]?1e-6*lam*lam*lam/(2*Math.PI*c*c)*this.get("groupVelocityDispersion")*L:false;};}(window.LaserCanvas));(function(LaserCanvas){LaserCanvas.Element.Dielectric=function(variablesGetter,blockType){this.type="Dielectric";this.name="D";this.variablesGetter=variablesGetter;this.loc={x:0,y:0,p:0,q:0};this.group=[];this.prop=this.getDefaultProp(blockType);this.priv=this.getDefaultPriv(blockType);this.abcdQ={};};LaserCanvas.Element.Dielectric.Type="Dielectric";LaserCanvas.Element.Dielectric.eType={Plate:"Plate",Brewster:"Brewster",Crystal:"Crystal",Prism:"Prism",Endcap:"Endcap"};LaserCanvas.Element.Dielectric.propertyDefault={refractiveIndex:1.5,thickness:20};LaserCanvas.Element.Dielectric.createGroup=function(prevElement,segZ,variablesGetter){var Dielectric=LaserCanvas.Element.Dielectric,segLen=prevElement.get("distanceToNext"),propertyDefault=Dielectric.propertyDefault,len=propertyDefault.thickness,n=propertyDefault.refractiveIndex,group=[new this(variablesGetter,Dielectric.eType.Plate),new LaserCanvas.Element.Lens(variablesGetter),new this(variablesGetter)];group[0].group=group[2].group=group;group[0].set("thickness",len);group[0].set("refractiveIndex",n);group[0].updateThermalLens();group[2].set("distanceToNext",Math.max(0,segLen-segZ-len/2));prevElement.set("distanceToNext",Math.max(0,segZ-len/2));return group;};LaserCanvas.Element.Dielectric.prototype={toJson:function(){return{type:this.type,name:this.name,loc:LaserCanvas.Utilities.extend({},this.loc),priv:LaserCanvas.Utilities.extend({},this.priv),prop:LaserCanvas.Utilities.extend({},this.prop)};},fromJson:function(json){this.name=json.name;this.prop=this.getDefaultProp(json.prop.type);this.priv=this.getDefaultPriv(json.prop.type);LaserCanvas.Utilities.extend(this.loc,json.loc);LaserCanvas.Utilities.extend(this.priv,json.priv);for(var propertyName in this.prop){if(this.prop.hasOwnProperty(propertyName)){if(typeof this.prop[propertyName]==="object"){this.prop[propertyName].set(json.prop[propertyName]);}else{this.prop[propertyName]=json.prop[propertyName];}}}},getDefaultProp:function(blockType){return{type:blockType,flip:false,distanceToNext:new LaserCanvas.Equation(0),refractiveIndex:new LaserCanvas.Equation(1),groupVelocityDispersion:new LaserCanvas.Equation(0),angleOfIncidence:new LaserCanvas.Equation(0),faceAngle:new LaserCanvas.Equation(0),curvatureFace1:new LaserCanvas.Equation(0),curvatureFace2:new LaserCanvas.Equation(0),thermalLens:new LaserCanvas.Equation(0),thickness:new LaserCanvas.Equation(0)};},getDefaultPriv:function(blockType){return{derivedFaceAngle:0,derivedAngleOfIncidence:0,deflectionAngle:0}},onVariablesChange:function(){if(this===this.group[0]){this.updateAngles();}},updateAngles:function(){var eType=LaserCanvas.Element.Dielectric.eType,angleLimit=80*Math.PI/180,A,B,C,nsinB,type=this.get("type"),isBrewster=type===eType.Brewster,isPrism=type===eType.Prism,sign=this.get("flip")?-1:1,angleOfIncidence=this.get("angleOfIncidence")*Math.PI/180,faceAngle=this.get("faceAngle")*Math.PI/180,n=Math.max(1,this.get("refractiveIndex"));if(isBrewster||isPrism){angleOfIncidence=sign*Math.atan(n);}
angleOfIncidence=Math.max(-angleLimit,Math.min(angleLimit,angleOfIncidence));switch(type){case eType.Plate:case eType.Brewster:case eType.Prism:A=angleOfIncidence;B=Math.asin(Math.sin(A)/n);break;case eType.Crystal:case eType.Endcap:B=faceAngle;nsinB=n*Math.sin(B);A=nsinB<-1?-Math.PI/2:nsinB>+1?+Math.PI/2:Math.asin(nsinB);break;}
C=A-B;this.set("derivedFaceAngle",B)
this.set("derivedAngleOfIncidence",A);this.set("deflectionAngle",C);this.updateThermalLens();},updateThermalLens:function(){var isEndcap=this.get("type")===LaserCanvas.Element.Dielectric.eType.Endcap,thickness=this.get("thickness"),thermalLens=this.get("thermalLens"),n=this.get("refractiveIndex"),faceAngle=this.get("derivedFaceAngle"),len=isEndcap?thickness:thickness/Math.cos(faceAngle),l1=thermalLens===0?len:len/2,l2=len-l1;this.group[0].set("distanceToNext",l1);this.group[1].setThermalLens(thermalLens,n,l2);},removeGroup:function(prevElement){prevElement.set("distanceToNext",prevElement.get("distanceToNext")
+this.get("thickness")
+this.group[this.group.length-1].get("distanceToNext"));return this.group.length;},location:function(ax){var isFirst=this===this.group[0],isPrism=this.get("type")===LaserCanvas.Element.Dielectric.eType.Prism,deflectionAngle=this.get("deflectionAngle");if(ax){this.loc.x=ax.x;this.loc.y=ax.y;this.loc.q=this.loc.p=ax.q;this.loc.q+=isFirst||isPrism?deflectionAngle:-deflectionAngle;}
return LaserCanvas.Utilities.extend(LaserCanvas.clone(this.loc),{x0:(this.group[0].loc.x+this.group[2].loc.x)/2,y0:(this.group[0].loc.y+this.group[2].loc.y)/2});},userProperties:function(){var k,eType=LaserCanvas.Element.Dielectric.eType,props=[],allProps={type:{propertyName:"type",options:["Plate","Brewster","Crystal","Prism"],infoPanel:false},elementDistanceToNext:{propertyName:"elementDistanceToNext",increment:5,min:0},refractiveIndex:{propertyName:"refractiveIndex",increment:0.1,min:1},groupVelocityDispersion:{propertyName:"groupVelocityDispersion",increment:0.001},thickness:{propertyName:"thickness",increment:1,min:1},curvatureFace1:{propertyName:"curvatureFace1",increment:10},curvatureFace2:{propertyName:"curvatureFace2",increment:10},angleOfIncidence:{propertyName:"angleOfIncidence",increment:1,min:-85,max:+85},flip:{propertyName:"flip",dataType:"boolean",infoPanel:false,propertyPanel:this.prop.type===eType.Brewster||this.prop.type===eType.Prism},faceAngle:{propertyName:"faceAngle",increment:1,min:-85,max:+85},thermalLens:{propertyName:"thermalLens",increment:10}},elementProps=this.prop.type===eType.Plate?["type","elementDistanceToNext","refractiveIndex","groupVelocityDispersion","thickness","curvatureFace1","curvatureFace2","angleOfIncidence","flip"]:this.prop.type===eType.Brewster?["type","elementDistanceToNext","refractiveIndex","groupVelocityDispersion","thickness","flip"]:this.prop.type===eType.Crystal?["type","elementDistanceToNext","refractiveIndex","groupVelocityDispersion","thickness","curvatureFace1","curvatureFace2","flip","faceAngle","thermalLens"]:this.prop.type===eType.Prism?["type","elementDistanceToNext","refractiveIndex","thickness","flip"]:this.prop.type===eType.Endcap?["elementDistanceToNext","refractiveIndex","groupVelocityDispersion","thickness","curvatureFace1","curvatureFace2","flip","faceAngle","thermalLens"]:[];if(this===this.group[0]){for(k=0;k<elementProps.length;k+=1){props.push(allProps[elementProps[k]]);}}
return props;},canSetProperty:function(propertyName){var eType=LaserCanvas.Element.Dielectric.eType,firstElement=this===this.group[0],lastElement=this===this.group[this.group.length-1],endcap=firstElement&&this.prop.type===eType.Endcap,brewster=this.prop.type===eType.Brewster||this.prop.type===eType.Prism;return{type:!endcap,thickness:firstElement,refractiveIndex:firstElement,groupVelocityDispersion:firstElement,angleOfIncidence:this.prop.type===eType.Plate,faceAngle:this.prop.type===eType.Crystal||this.prop.type===eType.Endcap,flip:brewster,insertElement:this===this.group[this.group.length-1],thermalLens:!brewster,curvatureFace1:!brewster,curvatureFace2:!brewster,distanceToNext:lastElement,elementDistanceToNext:true,outgoingAngle:endcap}[propertyName]||false;},set:function(propertyName,newValue,arg){var eType=LaserCanvas.Element.Dielectric.eType;switch(propertyName){case"type":switch(newValue){case eType.Plate:this.prop.thermalLens.set(0);break;case eType.Brewster:case eType.Prism:this.prop.thermalLens.set(0);this.prop.curvatureFace1.set(0);this.prop.curvatureFace2.set(0);break;}
this.prop[propertyName]=newValue;this.updateAngles();break;case"flip":this.prop[propertyName]=newValue;this.updateAngles();break;case"refractiveIndex":case"curvatureFace1":case"curvatureFace2":this.prop[propertyName].set(newValue);this.updateAngles();break;case"thickness":this.prop[propertyName].set(newValue);this.updateThermalLens();break;case"angleOfIncidence":case"faceAngle":this.prop[propertyName].set(newValue);this.updateAngles();break;case"thermalLens":this.prop[propertyName].set(newValue);this.updateThermalLens();break;case"outgoingAngle":if(arg){this.loc.q=newValue;}
break;case"distanceToNext":case"groupVelocityDispersion":this.prop[propertyName].set(newValue);break;case"elementDistanceToNext":this.group[this.group.length-1].prop.distanceToNext.set(newValue);break;case"derivedFaceAngle":case"derivedAngleOfIncidence":case"deflectionAngle":this.priv[propertyName]=newValue;break;case"startOptic":case"endOptic":break;default:console.warn(`Set property ${propertyName}=${newValue} not implemented`);break;}},get:function(propertyName){var variables=this.variablesGetter(),value=this.prop[propertyName]&&this.prop[propertyName].value&&this.prop[propertyName].value(variables);switch(propertyName){case"type":case"flip":return this.group[0].prop[propertyName];case"angleOfIncidence":case"faceAngle":return value;case"distanceToNext":case"thickness":return Math.max(0,value);case"refractiveIndex":return Math.max(1,value);case"curvatureFace1":case"curvatureFace2":case"groupVelocityDispersion":case"thermalLens":return value;case"elementDistanceToNext":return this.group[this.group.length-1].get("distanceToNext");case"derivedFaceAngle":case"derivedAngleOfIncidence":case"deflectionAngle":return this.group[0].priv[propertyName];}},expression:function(propertyName){switch(propertyName){case"elementDistanceToNext":return this.group[this.group.length-1].expression("distanceToNext");}
return this.prop[propertyName].expression();},groupDelayDispersion:LaserCanvas.Element.groupDelayDispersion,elementAbcd:function(dir,plane){var Matrix2x2=LaserCanvas.Math.Matrix2x2,abcd,n1,n2,q1,q2,cosq1,cosq2,dn,start=this.group[0],isFirst=this===this.group[0],type=this.get("type"),nint=start.get("refractiveIndex"),qext=start.get("derivedAngleOfIncidence"),qint=Math.asin(Math.sin(qext)/nint),roc=isFirst?start.get("curvatureFace1"):start.get("curvatureFace2"),dnR=0;if(isFirst&&type===LaserCanvas.Element.Dielectric.eType.Endcap){return new Matrix2x2(1,0,roc===0?0:2/roc,1);}
if((isFirst&&dir>0)||(!isFirst&&dir<0)){n1=1.00;n2=nint;q1=qext;q2=qint;}else{n1=1.00;n2=nint;q1=qint;q2=qext}
cosq1=Math.cos(q1);cosq2=Math.cos(q2);if(plane===LaserCanvas.Enum.modePlane.sagittal){if(roc===0){dnR=0;}else{dn=nint*Math.cos(qint)-1.00*Math.cos(qext);dnR=dn/roc;}
abcd=new Matrix2x2(1,0,dnR,1);}else{if(roc===0){dnR=0;}else{dn=(nint*Math.cos(qint)-1.00*Math.cos(qext))/(cosq1*cosq2);dnR=dn/roc;}
abcd=new Matrix2x2(cosq2/cosq1,0,dnR,cosq1/cosq2);}
return abcd;},atLocation:function(pt,tol){var U,Vector=LaserCanvas.Math.Vector;if(this===this.group[0]){U=new Vector([pt.x-this.loc.x,pt.y-this.loc.y]).rotate(this.loc.q);return Math.abs(U[1])<tol&&U[0]>-tol&&U[0]<this.get("thickness")+tol;}
return false;},draw:function(render,layer){var
eType=LaserCanvas.Element.Dielectric.eType,renderLayer=LaserCanvas.Enum.renderLayer,r=20,l,qf,tan1,tan2,path,endcap,cmd=function(type,x,y){return[type,x.toFixed(2),y.toFixed(2)].join(' ');},createFace=function(roc,l,s,tan){var c,k,kk,x,y,cmds=[],dx=[0.0,-0.01,-0.02,-0.05,-0.09],n=dx.length-1;if(roc===0){cmds=[cmd("L",l-s*tan,-s*r),cmd("L",l+s*tan,s*r)];}else{c=s*20*(roc<0?-1:+1)*(Math.abs(roc)<300?2:1);for(k=-n;k<=n;k+=1){kk=k<0?-k:k;x=c*dx[kk];y=k/n;cmds.push(cmd("L",l+s*y*tan+x,s*r*y));}}
return cmds;},createPrismPath=function(n,s){var
qB=Math.atan(n),a=Math.PI-2*qB,h=l/2/Math.tan(a/2),rApex=5,cmds=[cmd("M",l/2,-s*h),cmd("L",l-s*tan2,s*r),cmd("L",0+s*tan2,s*r)];return cmds;};if(this===this.group[0]){switch(layer){case renderLayer.optics:endcap=this.prop.type===eType.Endcap;r=20;l=this.get("distanceToNext")
+this.group[1].get("distanceToNext");qf=-this.get("derivedFaceAngle");tan2=r*Math.tan(qf||1e-3);tan1=endcap?0:tan2;if(this.group[0].prop.type===eType.Prism){path=createPrismPath(this.get("refractiveIndex"),this.prop.flip?-1:+1).concat("ZFS").join(' ');}else{path=[cmd("M",0.5*l+tan1,r)].concat(createFace(this.get("curvatureFace2"),l,-1,tan2),createFace(this.get("curvatureFace1"),0,+1,tan1),"ZFS").join(' ');}
render.save().setStroke('#000',1).createPattern(LaserCanvas.theme.current.blockFill).drawPath(path,this.loc.x,this.loc.y,-this.loc.q).restore();break;case renderLayer.annotation:render.fillText(LaserCanvas.Utilities.numberFormat(this.get("refractiveIndex")),this.loc.x,this.loc.ylog);break;}}
if(layer===renderLayer.annotation){if(this===this.group[0]||this===this.group[this.group.length-1]){render.fillText(this.name,this.loc.x,this.loc.y,-0.3*this.name.length,1.2);}}},wireframe:function(render,layer){return this.draw(render,layer);}};}(window.LaserCanvas));(function(LaserCanvas){LaserCanvas.Element.Dispersion=function(variablesGetter){this.type="Dispersion";this.name="DC";this.variablesGetter=variablesGetter;this.loc={x:0,y:0,p:0,q:0};this.group=[];this.prop=this.getDefaultProp();this.priv=this.getDefaultPriv();this.abcdQ={};};LaserCanvas.Element.Dispersion.Type="Dispersion";LaserCanvas.Element.Dispersion.eType={Prism:"Prism"
};LaserCanvas.Element.Dispersion.createGroup=function(prevElement,segZ){var Dispersion=LaserCanvas.Element.Dispersion,segLen=prevElement.get("distanceToNext"),elements=[new this(Dispersion.eType.Prism),new this()];elements[0].group=elements[1].group=elements;elements[0].setDefaults();elements[2].set("distanceToNext",Math.max(0,segLen-segZ));prevElement.set("distanceToNext",Math.max(0,segZ));return elements;};LaserCanvas.Element.Dispersion.brewsterPrism=function(refractiveIndex,prismInsertion,flip,priv){var sign=flip?-1:+1,n=refractiveIndex,qB=Math.atan(n),a=Math.PI-2*qB,q2=Math.asin(Math.sin(qB)/n),d=2*(qB-q2);priv.apexAngle=a;priv.deflectionAngle=-d*sign;priv.internalLength=2*prismInsertion*Math.tan(a);};LaserCanvas.Element.Dispersion.prototype={toJson:function(){return{type:this.type,name:this.name,loc:LaserCanvas.Utilities.extend({},this.loc),priv:LaserCanvas.Utilities.extend({},this.priv),prop:LaserCanvas.Utilities.extend({},this.prop)};},fromJson:function(json){this.name=json.name;this.prop=this.getDefaultProp(json.prop.type);this.priv=this.getDefaultPriv(json.prop.type);LaserCanvas.Utilities.extend(this.loc,json.loc);LaserCanvas.Utilities.extend(this.priv,json.priv);for(var propertyName in this.prop){if(this.prop.hasOwnProperty(propertyName)){if(typeof this.prop[propertyName]==="object"){this.prop[propertyName].set(json.prop[propertyName]);}else{this.prop[propertyName]=json.prop[propertyName];}}}},getDefaultProp:function(dispersionType){return{type:LaserCanvas.Element.Dispersion.eType.Prism,flip:false,distanceToNext:new LaserCanvas.Equation(0),prismInsertion:new LaserCanvas.Equation(0),refractiveIndex:new LaserCanvas.Equation(1.5),indexDispersion:new LaserCanvas.Equation(0),groupVelocityDispersion:new LaserCanvas.Equation(0)}
},getDefaultPriv:function(disperisonType){return{apexAngle:0.1,deflectionAngle:0,internalLength:0};},updateAngles:function(){var eType=LaserCanvas.Element.Dispersion.eType;if(this===this.group[0]){switch(this.get("type")){case eType.Prism:LaserCanvas.Element.Dispersion.brewsterPrism(this.get("refractiveIndex"),this.get("prismInsertion"),this.get("flip"),this.priv);break;}}},location:function(ax){if(ax){this.loc.x=ax.x;this.loc.y=ax.y;this.loc.p=this.loc.q=ax.q;this.loc.q+=this.get("deflectionAngle");}
return LaserCanvas.clone(this.loc);},userProperties:function(){var eType=LaserCanvas.Element.Dispersion.eType,firstElement=this===this.group[0],props=[{propertyName:"type",options:["Prism"],infoPanel:false},{propertyName:"flip",dataType:"boolean",infoPanel:firstElement},{propertyName:"distanceToNext",increment:5,min:0}];switch(this.get("type")){case eType.Prism:props=props.concat([{propertyName:"prismInsertion",increment:0.5,min:0,infoPanel:firstElement},{propertyName:"refractiveIndex",increment:0.1,min:1,infoPanel:firstElement},{propertyName:"indexDispersion",increment:0.001,infoPanel:firstElement},{propertyName:"groupVelocityDispersion",increment:0.001,infoPanel:firstElement}
]);break;}
props.canDelete=false;return props;},canSetProperty:function(propertyName,adjustingElement){var eType=LaserCanvas.Element.Dispersion.eType,isPrism=this.get("type")===eType.Prism,lastElement=this===this.group[this.group.length-1];return{type:true,flip:true,distanceToNext:true,insertElement:lastElement,prismInsertion:isPrism,refractiveIndex:isPrism,indexDispersion:isPrism,groupVelocityDispersion:isPrism,}[propertyName]||false;},set:function(propertyName,newValue){switch(propertyName){case"type":case"flip":this.group[0].prop[propertyName]=newValue;this.group[0].updateAngles();break;case"distanceToNext":this.prop[propertyName].set(newValue);break;case"prismInsertion":case"refractiveIndex":case"indexDispersion":case"groupVelocityDispersion":case"type":this.group[0].prop[propertyName].set(newValue);this.group[0].updateAngles();break;}},get:function(propertyName){var variables=this.variablesGetter();switch(propertyName){case"type":case"flip":return this.group[0].prop[propertyName];case"distanceToNext":return Math.max(0,this.prop[propertyName].value(variables));case"prismInsertion":case"refractiveIndex":case"indexDispersion":case"groupVelocityDispersion":return this.group[0].prop[propertyName].value(variables);case"deflectionAngle":return this.group[0].priv.deflectionAngle*(this===this.group[0]?+1:-1);case"apexAngle":return this.group[0].priv.apexAngle;}},expression:function(propertyName){return this.prop[propertyName].expression();},spaceRefractiveIndex:function(){return 1.0;},groupDelayDispersion:function(lam){var gdd,A,B,c,l3pic2,dndl,d2ndl2;if(this===this.group[0]){dndl=this.get("indexDispersion");d2ndl2=this.get("groupVelocityDispersion");c=LaserCanvas.constant.c;l3pic2=lam*lam*lam/(Math.PI*c*c);A=this.get("distanceToNext");B=0;gdd=B*l3pic2*d2ndl2
-A*2*l3pic2*dndl*dndl;gdd*=1e-6;gdd+=LaserCanvas.Element.groupDelayDispersion.call(this,lam,this.priv.internalLength);return gdd;}else{return false;}},elementAbcd:function(dir,plane){var abcd=LaserCanvas.Math.Matrix2x2.eye();return abcd;},atLocation:LaserCanvas.Element.atLocation,draw:function(render,layer){var qf,tan,path,i=this===this.group[0]?0:this.get("prismInsertion"),r=Math.max(40,1.5*i),qc=-this.loc.p-this.get("deflectionAngle")/2,renderLayer=LaserCanvas.Enum.renderLayer;if(this!==this.group[0]){qc+=Math.PI;}
if(this.get("flip")){qc+=Math.PI;}
switch(layer){case renderLayer.optics:qf=this.get("apexAngle")/2;tan=r*Math.tan(qf);path=LaserCanvas.Utilities.stringFormat("M 0 {0} L {1} {2} L {3} {4} ZFS",i.toFixed(2),-tan.toFixed(2),(i-r).toFixed(2),+tan.toFixed(2),(i-r).toFixed(2));render.save().setStroke("#000",1).createPattern(LaserCanvas.theme.current.blockFill).drawPath(path,this.loc.x,this.loc.y,qc).restore();break;case renderLayer.annotation:render.fillText(this.name,this.loc.x,this.loc.y,-2*Math.sin(qc)-0.3*this.name.length,+2*Math.cos(qc)+0.5);break;}},wireframe:function(render,layer){return this.draw(render,layer);}};}(window.LaserCanvas));(function(LaserCanvas){LaserCanvas.Element.collectGroups=function(elements){var groupable,group=null;for(var element of elements){groupable=element.hasOwnProperty("group");if(!group&&groupable){group=[element];}else if(group&&element.type==="Lens"){group.push(element);}else if(group&&groupable){group.push(element);for(var m=0;m<group.length;m+=1){if(group[m].hasOwnProperty("group")){group[m].group=group;}}
group[0].updateAngles();group=null;}}};}(window.LaserCanvas));(function(LaserCanvas){LaserCanvas.Element.Lens=function(variablesGetter){this.type='Lens';this.name='L';this.variablesGetter=variablesGetter;this.loc={x:0,y:0,p:0,q:0};this.prop={distanceToNext:new LaserCanvas.Equation(0),focalLength:new LaserCanvas.Equation(0)};this.priv={refractiveIndex:0};this.abcdQ={};};LaserCanvas.Element.Lens.Type="Lens";LaserCanvas.Element.Lens.standard=[-1000,-750,-500,-400,-300,-250,-200,-175,-150,-125,-100,-75,-50,-25,{label:"Diverging",value:undefined},{label:"No lens",value:0},+25,+50,+75,+100,+125,+150,+175,+200,+250,+300,+400,+500,+750,+1000,{label:"Focusing",value:undefined},];LaserCanvas.Element.Lens.prototype={toJson:function(){return{type:this.type,name:this.name,loc:LaserCanvas.Utilities.extend({},this.loc),prop:LaserCanvas.Utilities.extend({},this.prop)};},fromJson:function(json){this.name=json.name;LaserCanvas.Utilities.extend(this.loc,json.loc||{});for(var propertyName in this.prop){if(this.prop.hasOwnProperty(propertyName)){this.prop[propertyName].set(json.prop[propertyName]);}}},setThermalLens:function(focalLength,refractiveIndex,distanceToNext){this.set("focalLength",focalLength);this.set("refractiveIndex",refractiveIndex);this.set("distanceToNext",distanceToNext);},isThermalLens:function(){return this.priv.refractiveIndex!==0;},location:function(ax){if(ax){this.loc.x=ax.x;this.loc.y=ax.y;this.loc.q=this.loc.p=ax.q;}
return LaserCanvas.clone(this.loc);},userProperties:function(){return[{propertyName:'focalLength',increment:10,standard:LaserCanvas.Element.Lens.standard},{propertyName:'distanceToNext',increment:5,min:0}];},canSetProperty:function(propertyName){var isThermalLens=this.isThermalLens();return{distanceToNext:!isThermalLens,focalLength:true,insertElement:!isThermalLens}[propertyName]||false;},set:function(propertyName,newValue){switch(propertyName){case"distanceToNext":case"focalLength":this.prop[propertyName].set(newValue);break;case"refractiveIndex":this.priv.refractiveIndex=newValue;break;}},get:function(propertyName){var variables=this.variablesGetter(),value=this.prop[propertyName]&&this.prop[propertyName].value(variables);switch(propertyName){case"distanceToNext":return Math.max(0,value);case"focalLength":return value;case"refractiveIndex":return this.priv.refractiveIndex===0?1:this.priv.refractiveIndex;case'unused':return this.isThermalLens()&&this.get("focalLength")===0;}
return value;},expression:function(propertyName){return this.prop[propertyName].expression();},elementAbcd:function(dir_notused,plane_notused){var f=this.get("focalLength");return new LaserCanvas.Math.Matrix2x2(1,0,f===0?0:-1/f,1);},draw:function(render,layer){var image,f=this.get("focalLength"),qc=-this.loc.p,renderLayer=LaserCanvas.Enum.renderLayer;if(!this.isThermalLens()||f!==0){switch(layer){case renderLayer.optics:image=LaserCanvas.theme.current[f<0?'lensConcave':'lensConvex'];render.drawImage(image,this.loc.x,this.loc.y,qc);break;case renderLayer.annotation:render.fillText(this.name,this.loc.x,this.loc.y,-1.5*Math.sin(qc)-0.3*this.name.length,1.5*Math.cos(qc)+0.2);break;}}},wireframe:function(render,layer){var k,dx,renderLayer=LaserCanvas.Enum.renderLayer,Utilities=LaserCanvas.Utilities,d=[],r=8,qc=-this.loc.p,f=this.get("focalLength"),dx=function(k){return f===0?0:(f>0?0.5:0.2)*r+0.2*(k*k)*(f>0?-1:+1);};if(!this.isThermalLens()||f!==0){switch(layer){case renderLayer.optics:k=-4;d.push(Utilities.stringFormatPrecision(2,'M {0} {1}',dx(k),r*k));for(k+=1;k<=+4;k+=1){d.push(Utilities.stringFormatPrecision(2,'L {0} {1}',dx(k),r*k));}
for(k=+4;k>=-4;k-=1){d.push(Utilities.stringFormatPrecision(2,'L {0} {1}',-dx(k),r*k));}
d.push('Z');render.save().setStroke('#000',1).beginPath().drawPath(d.join(' '),this.loc.x,this.loc.y,qc).stroke().restore();break;case renderLayer.annotation:if(!this.isThermalLens()||f!==0){render.fillText(this.name,this.loc.x,this.loc.y,-1.5*Math.sin(qc)-0.3*this.name.length,1.5*Math.cos(qc)+0.2);}
break;}}}};}(window.LaserCanvas));(function(LaserCanvas){LaserCanvas.Element.Mirror=function(variablesGetter){this.type="Mirror";this.name="M";this.variablesGetter=variablesGetter;this.loc={x:0,y:0,p:0,q:0};this.prop={distanceToNext:new LaserCanvas.Equation(0),radiusOfCurvature:new LaserCanvas.Equation(0),angleOfIncidence:new LaserCanvas.Equation(90)};this.priv={startOptic:false,endOptic:false,deflectionAngle:0,};this.abcdQ={};};LaserCanvas.Element.Mirror.Type="Mirror";LaserCanvas.Element.Mirror.standard=[-1000,-750,-500,-400,-300,-250,-200,-175,-150,-125,-100,-75,-50,-25,{label:"Convex",value:undefined},{label:"Plane",value:0},+25,+50,+75,+100,+125,+150,+175,+200,+250,+300,+400,+500,+750,+1000,{label:"Concave",value:undefined},];LaserCanvas.Element.Mirror.prototype={toJson:function(){return{type:this.type,name:this.name,loc:LaserCanvas.Utilities.extend({},this.loc),prop:LaserCanvas.Utilities.extend({},this.prop)};},fromJson:function(json){this.name=json.name;LaserCanvas.Utilities.extend(this.loc,json.loc);for(var propertyName in this.prop){if(this.prop.hasOwnProperty(propertyName)){this.prop[propertyName].set(json.prop[propertyName]);}}},location:function(ax){if(ax){this.loc.x=ax.x;this.loc.y=ax.y;this.loc.p=this.loc.q=ax.q;this.loc.q+=this.get("deflectionAngle");}
return LaserCanvas.clone(this.loc);},userProperties:function(){var props=[{propertyName:"radiusOfCurvature",increment:5,standard:LaserCanvas.Element.Mirror.standard}];if(!(this.priv.startOptic||this.priv.endOptic)){props=props.concat([{propertyName:"angleOfIncidence",increment:1,wrap:90}]);}
if(!this.priv.endOptic){props.push({propertyName:"distanceToNext",increment:5,min:0});}
if(this.priv.startOptic||this.priv.endOptic){props.canDelete=false;}
return props;},canSetProperty:function(propertyName){return{angleOfIncidence:!(this.priv.startOptic||this.priv.endOptic),deflectionAngle:!(this.priv.startOptic||this.priv.endOptic),distanceToNext:!this.priv.endOptic,insertElement:!this.priv.endOptic,outgoingAngle:true,radiusOfCurvature:true}[propertyName]||false;},set:function(propertyName,newValue,arg){switch(propertyName){case"distanceToNext":case"radiusOfCurvature":case"angleOfIncidence":this.prop[propertyName].set(newValue);break;case"deflectionAngle":while(newValue<-Math.PI){newValue+=2*Math.PI;}
while(newValue>Math.PI){newValue-=2*Math.PI;}
this.set("angleOfIncidence",(newValue<0?-1:+1)*(Math.PI-Math.abs(newValue))/2*(180/Math.PI));break;case"outgoingAngle":if(arg){this.loc.q=newValue;}else{this.set("deflectionAngle",newValue-this.loc.p);}
break;case"startOptic":case"endOptic":this.priv[propertyName]=newValue;break;}},get:function(propertyName){var i,variables=this.variablesGetter(),value=this.prop[propertyName]&&this.prop[propertyName].value(variables);switch(propertyName){case"distanceToNext":return Math.max(0,value);case"radiusOfCurvature":return value;case"angleOfIncidence":return Math.max(-180,Math.min(180,value));case"angleOfIncidenceRad":return this.get("angleOfIncidence")*Math.PI/180;case"deflectionAngle":i=this.get("angleOfIncidenceRad");return(i<0?-1:+1)*(Math.PI-2*Math.abs(i));}},expression:function(propertyName){return this.prop[propertyName].expression();},elementAbcd:function(dir,plane){var R=this.get("radiusOfCurvature"),cosq=Math.cos(this.get("angleOfIncidenceRad")),Re=plane===LaserCanvas.Enum.modePlane.sagittal?R/cosq:R*cosq,c2_Re=R===0?0:-2/Re,abcd=new LaserCanvas.Math.Matrix2x2(1,0,c2_Re,1);return abcd;},draw:function(render,layer){var image,roc,qc=-this.loc.p+this.get("angleOfIncidenceRad"),renderLayer=LaserCanvas.Enum.renderLayer;switch(layer){case renderLayer.optics:roc=this.get("radiusOfCurvature");image=LaserCanvas.theme.current[roc>300?"mirrorConcave":roc<-300?"mirrorConvex":roc>0?"mirrorConcaveMore":roc<0?"mirrorConvexMore":"mirrorPlane"];render.drawImage(image,this.loc.x,this.loc.y,qc);break;case renderLayer.annotation:render.fillText(this.name,this.loc.x,this.loc.y,Math.cos(qc)-0.3*this.name.length,Math.sin(qc)+0.5);break;}},wireframe:function(render,layer){var k,dx,renderLayer=LaserCanvas.Enum.renderLayer,d=[],r=8,qc=-this.loc.p+this.get("angleOfIncidenceRad"),roc=this.get("radiusOfCurvature"),dx=function(k){return roc===0?0:1.0*(k*k)*(Math.abs(roc)>300?0.15:0.3)*(roc>0?-1:+1);};switch(layer){case renderLayer.optics:for(k=-4;k<+4;k+=1){d.push(LaserCanvas.Utilities.stringFormatPrecision(2,"M {0} {1} L {2} {3} L {4} {5}",r,(k+1)*r,dx(k),k*r,dx(k+1),(k+1)*r));}
render.save().setStroke("#000",1).beginPath().drawPath(d.join(" "),this.loc.x,this.loc.y,qc).stroke().restore();break;case renderLayer.annotation:render.fillText(this.name,this.loc.x,this.loc.y,Math.cos(qc)-0.3*this.name.length,Math.sin(qc)+0.5);break;}}};}(window.LaserCanvas));(function(LaserCanvas){LaserCanvas.Element.Screen=function(variablesGetter){this.type="Screen";this.name='I';this.variablesGetter=variablesGetter;this.loc={x:0,y:0,p:0,q:0};this.prop={distanceToNext:new LaserCanvas.Equation(0)};this.priv={startOptic:false,endOptic:false,};this.panel=null;this.showProperties=false;this.abcdQ={};};LaserCanvas.Element.Screen.Type="Screen";LaserCanvas.Element.Screen.prototype={toJson:function(){return{type:this.type,name:this.name,loc:LaserCanvas.Utilities.extend({},this.loc),prop:LaserCanvas.Utilities.extend({},this.prop)};},fromJson:function(json){this.name=json.name;LaserCanvas.Utilities.extend(this.loc,json.loc);for(var propertyName in this.prop){if(this.prop.hasOwnProperty(propertyName)){this.prop[propertyName]=new LaserCanvas.Equation(json.prop[propertyName]);}}},init:function(system){this.panel=this.createPanel(system);},setName:function(name){if(this.panel){this.name=this.panel.querySelector('h1').innerHTML=name;}},createPanel:function(system){var self=this,el,panel=document.createElement('div');panel.className='elementScreenPanel';panel.setAttribute('data-compact-view','true');panel.innerHTML=LaserCanvas.Element.Screen.panelHtml;panel.querySelector('button[data-action="compact"]').onclick=function(){panel.setAttribute('data-compact-view',panel.getAttribute('data-compact-view')!=='true');};el=panel.querySelector('button[data-action="delete"]');if(this.priv.endOptic){el.parentNode.removeChild(el);}else{el.onclick=function(){system.removeElement(self);};}
if(!this.priv.startOptic){document.body.appendChild(panel);LaserCanvas.localize(panel);LaserCanvas.Utilities.draggable(panel,{handle:panel.querySelector('.dragbar')});}
return panel;},location:function(ax){if(ax){this.loc.x=ax.x;this.loc.y=ax.y;this.loc.q=this.loc.p=ax.q;}
return LaserCanvas.clone(this.loc);},userProperties:function(){return[{propertyName:'distanceToNext',increment:5,min:0}];},canSetProperty:function(propertyName){return{distanceToNext:!this.priv.endOptic,insertElement:true,outgoingAngle:this.priv.startOptic||this.priv.endOptic}[propertyName]||false;},set:function(propertyName,newValue,arg){switch(propertyName){case"outgoingAngle":if(arg){this.loc.q=newValue;}
break;case"startOptic":case"endOptic":this.priv[propertyName]=newValue;break;case"distanceToNext":this.prop[propertyName].set(newValue);break;}},get:function(propertyName){var variables=this.variablesGetter();switch(propertyName){case"startOptic":case"endOptic":return this.prop[propertyName];case"distanceToNext":return this.prop[propertyName].value(variables);}},expression:function(propertyName){return this.prop[propertyName].expression();},elementAbcd:function(dir,plane){return new LaserCanvas.Math.Matrix2x2.eye();},updateAbcdQ:function(abcdQ,plane){var k,info,el,sel='[data-column="{0}"]'.replace('{0}',plane===LaserCanvas.Enum.modePlane.sagittal?'sag':'tan'),rows=this.panel.querySelectorAll('[data-info]');for(k=0;k<rows.length;k+=1){info=rows[k].getAttribute('data-info');el=rows[k].querySelector(sel);el.innerHTML=!abcdQ||!abcdQ.hasOwnProperty(info)||isNaN(abcdQ[info])?'-':!isFinite(abcdQ[info])?'&infin;':LaserCanvas.Utilities.numberFormat(abcdQ[info]);}},destroy:function(){if(this.panel&&this.panel.parentNode){this.panel.parentNode.removeChild(this.panel);}},atLocation:LaserCanvas.Element.atLocation,draw:function(render,layer,wireframe){var
renderLayer=LaserCanvas.Enum.renderLayer,qc=-this.loc.q;switch(layer){case renderLayer.optics:if(wireframe){render.save().setStroke('#000',1).drawPath(LaserCanvas.Utilities.stringFormat(LaserCanvas.Element.Screen.wireframePath,3,20),this.loc.x,this.loc.y,qc).restore();}else{render.drawImage(LaserCanvas.theme.current.screen,this.loc.x,this.loc.y,qc);}
break;case renderLayer.annotation:render.fillText(this.name,this.loc.x,this.loc.y,-1.5*Math.sin(qc),1.5*Math.cos(qc)+0.2);break;}},wireframe:function(render,layer){this.draw(render,layer,true);}};LaserCanvas.Element.Screen.wireframePath='M {0} -{1} L 0 -{1} L 0 {1} L {0} {1} S';LaserCanvas.Element.Screen.panelHtml=['<div class="dragbar"></div>','<h1></h1>','<button data-action="compact"></button>','<table><thead>','<tr>','<th data-column="name" data-localize="Property"></th>','<th data-column="symbol" data-localize="Symbol"></th>','<th data-column="sag" data-localize="Sagittal"></th>','<th data-column="tan" data-localize="Tangential"></th>','<th data-column="unit" data-localize="Unit"></th>','</tr>','</thead><tbody>','<tr data-info="w">','<td data-column="name" data-localize="Mode"></td>','<td data-column="symbol"><i>w</i></td>','<td data-column="sag"></td>','<td data-column="tan"></td>','<td data-column="unit">&micro;m</td>','</tr>','<tr data-info="r">','<td data-column="name" data-localize="Curvature"></td>','<td data-column="symbol"><i>r</i></td>','<td data-column="sag"></td>','<td data-column="tan"></td>','<td data-column="unit">mm</td>','</tr>','<tr data-info="w0">','<td data-column="name" data-localize="Waist"</td>','<td data-column="symbol"><i>w</i><sub>0</sub></td>','<td data-column="sag"></td>','<td data-column="tan"></td>','<td data-column="unit">&micro;m</td>','</tr>','<tr data-info="z0">','<td data-column="name" data-localize="Distance"></td>','<td data-column="symbol"><i>z</i><sub>0</sub></td>','<td data-column="sag"></td>','<td data-column="tan"></td>','<td data-column="unit">mm</td>','</tr>','<tr data-info="zR">','<td data-column="name" data-localize="Rayleigh"></td>','<td data-column="symbol"><i>z</i><sub><i>R</i></sub></td>','<td data-column="sag"></td>','<td data-column="tan"></td>','<td data-column="unit">mm</td>','</tr>','</tbody></table>','<div class="lcbuttons">','<button class="lcbutton padded" data-action="delete">','<label data-localize="Delete"></label>','</button>','</div>'].join('');}(window.LaserCanvas));(function(LaserCanvas){var Graph2d=function(){this.lines=[];this.axes=this.initAxes();this.el=this.init();this.events={variableChange:[]};};Graph2d.template=['<div class="plot">','<canvas/>','</div>'].join("");Graph2d.prototype.init=function(){var plot,el=document.createElement("div")
el.className="LaserCanvasGraph2d";el.innerHTML=Graph2d.template;plot=el.querySelector(".plot");this.axes.x.appendTo(plot);this.axes.y.appendTo(plot);return el;};Graph2d.prototype.appendTo=function(container){container.appendChild(this.el);return this;};Graph2d.prototype.destroy=function(){this.el.parentElement&&this.el.parentElement.removeChild(this.el);return this;};Graph2d.prototype.initAxes=function(){var Graph2dAxis=LaserCanvas.Graph2dAxis;return{x:new Graph2dAxis(Graph2dAxis.Direction.HORIZONTAL),y:new Graph2dAxis(Graph2dAxis.Direction.VERTICAL)};};Graph2d.prototype.addEventListener=function(eventName,handler){this.events[eventName].push(handler);};Graph2d.prototype.fireEvent=function(eventName){this.events[eventName].forEach(function(handler){handler();});};Graph2d.prototype.clearDataPoints=function(){this.lines=[];};Graph2d.prototype.addDataPoints=function(dataPoints){dataPoints.forEach(function(dataPoint,index){if(!this.lines[index]){this.lines[index]={x:[],y:[]};}
this.lines[index].x.push(dataPoint.x);this.lines[index].y.push(dataPoint.y);}.bind(this));};Graph2d.prototype.createVerticalMarker=function(x){this.lines.push({x:[x,x],y:[this.axes.y.min(),this.axes.y.max()]});};Graph2d.prototype.getDataExtents=function(){var firstPoint=true,extents={x:{min:0,max:1,firstPoint:true},y:{min:0,max:1,firstPoint:true}};this.lines.forEach(function(line){var p;for(var ax of["x","y"]){for(var k=0;k<line[ax].length;k+=1){p=line[ax][k];if(isNaN(p)||!isFinite(p)){}else if(extents[ax].firstPoint){extents[ax].min=extents[ax].max=p;delete extents[ax].firstPoint;}else{extents[ax].min=Math.min(extents[ax].min,p);extents[ax].max=Math.max(extents[ax].max,p);}}}});return extents;};Graph2d.prototype.calcTicks=function(){var size=this.canvasSize(),extents=this.getDataExtents(),fontSize=this.getFontSize();this.axes.x.calcTicks(extents.x,size.width,{minTickSpacing:2.5*fontSize,tightLimits:true});this.axes.y.calcTicks(extents.y,size.height,{minTickSpacing:1.5*fontSize});};Graph2d.prototype.canvasSize=function(){var canvas=this.el.querySelector("canvas"),container=canvas.parentElement,width=container.offsetWidth,height=container.offsetHeight;canvas.width=parseInt(width);canvas.height=parseInt(height);return{width:width,height:height};};Graph2d.prototype.getFontSize=function(){var el=this.el,style=window.getComputedStyle(el),match=style.fontSize.match(/^(\d+)px$/);if(match){return+match[1];}
return 16;};Graph2d.prototype.render=function(){this.axes.x.render();this.axes.y.render();this.renderPlotLines();};Graph2d.prototype.renderPlotLines=function(){var canvas=this.el.querySelector("canvas"),ctx=canvas.getContext("2d"),axisX=this.axes.x,axisY=this.axes.y;ctx.clearRect(0,0,canvas.width,canvas.height);this.lines.forEach(function(line,lineIndex){var k,ptx,pty,x,y,moveTo=true;ctx.save();ctx.beginPath();for(k=0;k<line.x.length&&k<line.y.length;k+=1){ptx=line.x[k];pty=line.y[k];if(isNaN(ptx)||isNaN(pty)){moveTo=true;}else{x=axisX.transform(ptx);y=axisY.transform(pty,true);if(moveTo){ctx.moveTo(x,y);moveTo=false;}else{ctx.lineTo(x,y);}}}
ctx.strokeStyle=LaserCanvas.theme.current.mode[lineIndex]||"#333";ctx.stroke();ctx.restore();});};LaserCanvas.Graph2d=Graph2d;}(window.LaserCanvas));(function(LaserCanvas){var Graph2dAxis=function(dir){this.dir=dir;this.el=this.init();this._min=0;this._max=1;this._tickMin=0;this._tickSpacing=1;this._scale=1;this._length=1;this.render();};Graph2dAxis.Direction={HORIZONTAL:"horizontal",VERTICAL:"vertical"};Graph2dAxis.prototype.min=function(){return this._min;};Graph2dAxis.prototype.max=function(){return this._max;};Graph2dAxis.prototype.transform=function(val,flip){var p=this._scale*(val-this._min);return flip?this._length-p:p;};Graph2dAxis.prototype.init=function(){var el=document.createElement("div");el.className="Graph2dAxis";el.setAttribute("data-direction",this.dir);el.innerHTML=['<div class="axisLine"></div>','<div class="ticks">','</div>'].join("");return el;};Graph2dAxis.standardTicks=[0.1,0.2,0.5,1,5,10];Graph2dAxis.defaultMaxTicks=5;Graph2dAxis.prototype.calcTicks=function(extent,length,options){var pow,scl,mn,mx,maxTicks=Math.max(3,options.minTickSpacing?Math.floor(length/options.minTickSpacing):Graph2dAxis.defaultMaxTicks),min=extent.min,max=extent.max;if(max-min<1e-7){max=min+1;}
pow=Math.pow(10,Math.floor(Math.log10(max-min)));max/=pow;min/=pow;for(scl of Graph2dAxis.standardTicks){mx=Math.ceil(max/scl);mn=Math.floor(min/scl);if((mx-mn)/scl<maxTicks){break;}}
if(!options.tightLimits){this._max=mx*scl*pow;this._min=mn*scl*pow;}else{this._max=extent.max;this._min=extent.min;}
this._tickMin=mn*scl*pow;this._tickSpacing=scl*pow;this._length=length;this._scale=length/(this._max-this._min);};Graph2dAxis.prototype.appendTo=function(container){container.appendChild(this.el);return this;};Graph2dAxis.prototype.render=function(){var el=this.el.querySelector(".ticks"),styleRule=this.dir===Graph2dAxis.Direction.HORIZONTAL?"left":"bottom",min=this._min,max=this._max,createTick=function(value,text){var label=document.createElement("label");label.innerHTML=text||LaserCanvas.Utilities.numberFormat(value,true);label.style[styleRule]=`${100 * (value - min) / (max - min)}%`;el.appendChild(label);return el;};el.innerHTML="";for(var tickValue=this._tickMin;tickValue<=this._max;tickValue+=this._tickSpacing){if(tickValue>=this._min){createTick(tickValue);}}};LaserCanvas.Graph2dAxis=Graph2dAxis;}(window.LaserCanvas));(function(LaserCanvas){var GraphCollection=function(){this.graphs=[];this.el=this.init();this.events={change:[]};};GraphCollection.template=['<div class="about">','<ul>','<li>Variables  <em>x</em>, <em>y</em> in properties: <input class="demoPropertyInput" disabled data-expression="true" value="200 * cos(x)" /></li>','<li>Sliders change values</li>','<li>Toggle graphs with <span>👁</span></li>','</ul>','</div>','<vid class="graphItems"></div>'].join("");GraphCollection.prototype.init=function(){var el=document.createElement("div");el.className="graphCollection";el.innerHTML=GraphCollection.template;return el;};GraphCollection.prototype.appendTo=function(container){container.appendChild(this.el);return this;};GraphCollection.prototype.addEventListener=function(eventName,handler){this.events[eventName].push(handler);};GraphCollection.prototype.fireEvent=function(eventName){this.events[eventName].forEach(function(handler){handler();});};GraphCollection.prototype.hasRange=function(variableName){return this.graphs.some(function(graph){return graph.variableName()===variableName;});};GraphCollection.prototype.scanStart=function(variableName){this.graphs.forEach(function(graph){graph.scanStart(variableName);});};GraphCollection.prototype.scanValue=function(variableName,variableValue){this.graphs.forEach(function(graph){graph.scanValue(variableName,variableValue);});};GraphCollection.prototype.scanEnd=function(variableName,currentValue){this.graphs.forEach(function(graph){graph.scanEnd(variableName,currentValue);});};GraphCollection.prototype.onVariableChange=function(){this.fireEvent("change");};GraphCollection.prototype.graphIndex=function(source,propertyName,fieldName){return this.graphs.findIndex(function(graph){return graph.isEqual(source,propertyName,fieldName);});};GraphCollection.prototype.hasGraph=function(source,propertyName,fieldName){return this.graphIndex(source,propertyName,fieldName)>=0;};GraphCollection.prototype.toggleGraph=function(source,propertyName,fieldName){var index=this.graphIndex(source,propertyName,fieldName);if(index>=0){this.removeGraphAt(index);}else{this.addGraph(source,propertyName,fieldName);}};GraphCollection.prototype.addGraph=function(source,propertyName,fieldName,variableName){this.graphs.push(new LaserCanvas.GraphItem(source,propertyName,fieldName,variableName).appendTo(this.el.querySelector(".graphItems")).addEventListener("variableChange",this.onVariableChange.bind(this)));this.fireEvent("change");this.el.setAttribute("data-has-graphs",this.graphs.length?"true":"false");};GraphCollection.prototype.removeGraphAt=function(index){this.graphs[index].destroy();this.graphs.splice(index,1);this.el.setAttribute("data-has-graphs",this.graphs.length?"true":"false");};GraphCollection.prototype.removeAllGraphs=function(){for(var index=this.graphs.length-1;index>=0;index-=1){this.removeGraphAt(index);}};GraphCollection.prototype.toJson=function(){return this.graphs.map(function(graph){return graph.toJson();});};GraphCollection.prototype.fromJson=function(json,system,elements){var source;this.removeAllGraphs();for(var graphJson of json||[]){source=LaserCanvas.GraphItem.sourceFromJson(graphJson,system,elements);if(source){this.addGraph(source,graphJson.propertyName,graphJson.fieldName,graphJson.variableName);}};};GraphCollection.prototype.change=function(elements){var graph;for(var index=this.graphs.length-1;index>=0;index-=1){graph=this.graphs[index];if(!elements.find(function(element){return element===graph.source();})){this.removeGraphAt(index);}}
return this;};LaserCanvas.GraphCollection=GraphCollection;}(window.LaserCanvas));(function(LaserCanvas){var GraphItem=function(source,propertyName,fieldName,variableName){this._source=source;this._propertyName=propertyName;this._fieldName=fieldName;this._variableName=variableName||"x";this.graph2d=new LaserCanvas.Graph2d();this.el=this.init();this.variableInput=this.el.querySelector('.variable input[type="checkbox"]');this.variableInput.onchange=this.onVariableChange.bind(this);this.events={variableChange:[]};};GraphItem.template=['<div class="title"></div>','<div class="graph2dContainer"></div>','<div class="variable">','<span>x</span>','<input type="checkbox" class="laserCanvasCheckbox" />','<span>y</span>',].join("");GraphItem.prototype.init=function(){var el=document.createElement("div");el.className="graphCollectionPanel";el.innerHTML=GraphItem.template;this.graph2d.appendTo(el.querySelector(".graph2dContainer"))
el.querySelector(".title").innerText=this.getTitle();el.querySelector("input[type=checkbox]").checked=this._variableName!=="x";return el;};GraphItem.prototype.appendTo=function(container){container.appendChild(this.el);return this;};GraphItem.prototype.destroy=function(){this.el.parentElement.removeChild(this.el);return this;};GraphItem.prototype.addEventListener=function(eventName,handler){this.events[eventName].push(handler);return this;};GraphItem.prototype.fireEvent=function(eventName){this.events[eventName].forEach(function(handler){handler();});};GraphItem.prototype.onVariableChange=function(){this._variableName=this.variableInput.checked?"y":"x";this.fireEvent("variableChange");};GraphItem.prototype.getTitle=function(){var source=this._source.name,property=LaserCanvas.Utilities.prettify(this._propertyName);return source?`${source}: ${property}`:property;};GraphItem.prototype.getGraphValue=function(variableValue){var value;if(this._fieldName){return[{x:variableValue,y:this._source.abcdQ[0][this._fieldName]},{x:variableValue,y:this._source.abcdQ[1][this._fieldName]}];}else{value=this._source.get(this._propertyName);if(Array.isArray(value)){return value.map(function(val){return{x:variableValue,y:val};});}else{return[{x:variableValue,y:value}];}}};GraphItem.prototype.variableName=function(){return this._variableName;};GraphItem.prototype.source=function(){return this._source;};GraphItem.prototype.toJson=function(){return{sourceType:this._source.type,sourceName:this._source.name,propertyName:this._propertyName,fieldName:this._fieldName,variableName:this._variableName};};GraphItem.sourceFromJson=function(json,system,elements){if(json.sourceType==="System"){return system;}
return elements.find(function(element){return element.type===json.sourceType&&element.name===json.sourceName;});};GraphItem.prototype.isEqual=function(source,propertyName,fieldName){return source===this._source&&propertyName===this._propertyName&&(!fieldName||fieldName===this._fieldName);};GraphItem.prototype.scanStart=function(variableName){if(variableName===this._variableName){this.graph2d.clearDataPoints();}};GraphItem.prototype.scanValue=function(variableName,variableValue){if(variableName===this._variableName){this.graph2d.addDataPoints(this.getGraphValue(variableValue));}};GraphItem.prototype.scanEnd=function(variableName,currentValue){if(variableName===this._variableName){this.graph2d.calcTicks();this.graph2d.createVerticalMarker(currentValue);this.graph2d.render();}};LaserCanvas.GraphItem=GraphItem;}(window.LaserCanvas));(function(LaserCanvas){var limit=function(min,max,val){return val<min?min:val>max?max:val;};var reNumber=/^(\+|-)?[0-9]*(?:\.[0-9]*)?(?:e(\+|-)?[0-9]+)?$/i;var NumberSlider=function(name){this.name=name;this.changeEventListener=null;this.min=0;this.max=1;this.value=0.5;this.el=this.init();this.update();};NumberSlider.prototype.getRange=function(){return{min:this.min,max:this.max};};NumberSlider.prototype.init=function(){var self=this,el=document.createElement("div"),inputFocus=function(){this.setAttribute("data-last-value",this.value);setTimeout(function(){this.select();}.bind(this));},inputChange=function(){self.inputChange(this.getAttribute("data-prop"),this.value);},inputBlur=function(){self.inputBlur(this.getAttribute("data-prop"));},inputKeydown=function(e){switch(e.which||e.charCode){case 10:case 13:this.blur();return false;case 27:this.value=this.getAttribute("data-last-value");self.inputChange(this.getAttribute("data-prop"),this.value);this.blur();return false;}};el.className="LaserCanvasNumberSlider";el.innerHTML=['<div class="range">','<div class="trough">','<div class="thumb">','<div class="handle"></div>','<div class="callout">','<input type="text" data-prop="value" value="val" />','</div>','</div>','</div>','</div>','<div class="limits">','<input type="text" value="min" data-prop="min" />','<label class="variableName"></label>','<input type="text" value="max" data-prop="max" />','</div>'].join("");el.querySelector(".variableName").innerText=this.name;LaserCanvas.Utilities.draggable(el.querySelector(".thumb"),{handle:el.querySelector(".handle"),axis:"x",onDrag:function(e,pt){var v,w=el.querySelector(".trough").offsetWidth;pt.x=limit(0,w,pt.x);v=pt.x/w;this.setProp("value",this.min+(this.max-this.min)*v);this.updateValue();},onEnd:function(){this.update();}},this);Array.prototype.forEach.call(el.querySelectorAll("input[data-prop]"),function(input){input.onfocus=inputFocus;input.onchange=input.onkeyup=inputChange;input.onblur=inputBlur;input.onkeydown=inputKeydown;});return el;};NumberSlider.prototype.appendTo=function(element){element.appendChild(this.el);};NumberSlider.prototype.setChangeEventListener=function(callback,thisArg){this.changeEventListener=callback?callback.bind(thisArg):null;};NumberSlider.prototype.fireChangeEvent=function(){if(this.changeEventListener){this.changeEventListener(this.name,this.value);}};NumberSlider.prototype.setProp=function(prop,value,fireCallback){if(reNumber.test(value)){value=+value;if(!isNaN(value)){this[prop]=+value;if(fireCallback!==false){this.fireChangeEvent();}else{this.el.querySelector(`[data-prop="${prop}"]`).value=LaserCanvas.Utilities.numberFormat(value,true);}
this.updateThumb();}}};NumberSlider.prototype.inputChange=function(prop,value){this.setProp(prop,value);};NumberSlider.prototype.inputBlur=function(prop){if(this.max<=this.min){this.setProp("max",this.min+1);}
if(prop==="value"&&this.value>this.max){this.setProp("max",this.value);}else if(prop==="value"&&this.value<this.min){this.setProp("min",this.value);}else if(prop==="min"&&this.value<this.min){this.setProp("value",this.min);}else if(prop==="max"&&this.value>this.max){this.setProp("value",this.max);}
this.update();};NumberSlider.prototype.update=function(){this.updateThumb();this.updateValue();this.updateLimits();};NumberSlider.prototype.updateThumb=function(){var left=100*limit(0,1,(this.value-this.min)/(this.max-this.min));this.el.querySelector(".thumb").style.left=`${left}%`;};NumberSlider.prototype.updateValue=function(){this.el.querySelector('[data-prop="value"]').value=LaserCanvas.Utilities.numberFormat(this.value);};NumberSlider.prototype.updateLimits=function(){var Utilities=LaserCanvas.Utilities;this.el.querySelector('[data-prop="min"]').value=Utilities.numberFormat(this.min);this.el.querySelector('[data-prop="max"]').value=Utilities.numberFormat(this.max);};LaserCanvas.NumberSlider=NumberSlider;}(window.LaserCanvas));(function(LaserCanvas){var CheckboxInput=function(prop,source,onChange){this.prop=prop;this.source=source;this.onChange=onChange;this.el=this.init(prop);this.input=this.el.querySelector("input");this.update();};CheckboxInput.template=['<input type="checkbox" />'].join("");CheckboxInput.prototype.init=function(){var el=document.createElement("div");el.className="checkboxInput";el.innerHTML=CheckboxInput.template;el.querySelector("input").onchange=this.onCheckboxChange.bind(this);return el;};CheckboxInput.prototype.appendTo=function(parent){parent.appendChild(this.el);return this;};CheckboxInput.prototype.get=function(){return this.source.get(this.prop.propertyName);};CheckboxInput.prototype.update=function(){this.input.checked=this.get();};CheckboxInput.prototype.onCheckboxChange=function(){this.fireChangeEvent(this.input.checked);};CheckboxInput.prototype.fireChangeEvent=function(value){this.onChange(value);};LaserCanvas.CheckboxInput=CheckboxInput;}(window.LaserCanvas));(function(LaserCanvas){"use strict";var
HelpPanel=function(){this.pageIndex=0;this.el=this.show();this.title=this.el.querySelector(".title"),this.scroller=this.el.querySelector(".body .scroller"),this.hint=this.el.querySelector(".hint"),this.goToPage(0);};HelpPanel.pages=[{title:"Drag to rearrange",body:['<div class="drag-cavity">','<div class="hoverer"></div>','<div class="mode"></div>','<div class="concave l"></div>','<div class="concave r"></div>','<div class="finger"></div>','</div>'].join(""),hint:'Drag by the centerline'},{title:"Add more elements",body:['<div class="add-cavity">','<div class="source lens"></div>','<div class="mode full"></div>','<div class="mode half l"></div>','<div class="mode half r"></div>','<div class="concave l"></div>','<div class="concave r"></div>','<div class="lens animated">','<div class="finger"></div>','</div>','</div>'].join(""),hint:'Drag elements into the cavity'},{title:"Use the inspector",body:['<div class="inspect-cavity">','<div class="mode"></div>','<div class="concave l"></div>','<div class="concave r"></div>','<div class="laserCanvasInspect">','<span data-dimension="sag"><span>100</span><span>200</span></span> ','<span class="ellipse"></span> ','<span data-dimension="tan"><span>200</span><span>100</span></span> ','um</div>','<div class="generalSelector">','<div class="slider"></div>','<div class="buttons">','<div>Layout</div>','<div>Inspect</div>','<div class="finger"></div>','</div>','</div>','</div>'].join(''),hint:'View mode size anywhere in the cavity'},{title:"Detailed information",body:['<div class="sidebar">','<div class="toggle-info">','<div class="finger"></div>','</div>','</div>'].join(''),hint:'Full ABCD calculation in sidebar',onload:function(view){var k,info=document.getElementById('LaserCanvasInfo'),table=info.querySelector('table'),copy=table.cloneNode(true),inputs=copy.querySelectorAll('input,button');view.querySelector('.sidebar').appendChild(copy);for(k=inputs.length-1;k>=0;k-=1){inputs[k].disabled=true;}}},{title:"About",body:['<ul class="about">','<li>Laser modeling using the <em>ABCD</em> matrix calculations.</li>','<li>(c) 2007 - 2023 Philip Schlup, PhD</li>','<li><a href="mailto:lasercanvas@outlook.com">Send feedback</a></li>','<li><a href="LasrCanv5.exe" download>Download</a> LaserCanvas 5 for Windows</li>','</ul>',].join(''),hint:"LaserCanvas - Web"},];HelpPanel.singleton=null;HelpPanel.show=function(){if(HelpPanel.singleton){HelpPanel.singleton.destroy();}else{HelpPanel.singleton=new HelpPanel();}};HelpPanel.prototype.show=function(){var self=this,el=document.createElement('div');el.className='helpPanel';document.body.appendChild(el);el.innerHTML=['<div class="title"></div>','<div class="body"><div class="scroller"></div></div>','<div class="hint"></div>','<div class="footer">','<span class="version"></span>','<button data-action="prev">Previous</button>','<button data-action="next">Next</button>','<button data-action="close">Close</button>','</div>'].join('');el.querySelector('.version').innerText=LaserCanvas.SHA_SHORT||'';this.activate(el.querySelector('button[data-action="prev"]'),el.querySelector('button[data-action="next"]'),el.querySelector('button[data-action="close"]'));return el;};HelpPanel.prototype.activate=function(prev,next,close){var self=this,updateDisabled=function(){prev.disabled=self.pageIndex===0;next.disabled=self.pageIndex>=HelpPanel.pages.length-1;};prev.onclick=function(){self.goToPage(self.pageIndex-1);updateDisabled();};next.onclick=function(){self.goToPage(self.pageIndex+1);updateDisabled();};close.onclick=function(){self.destroy();};updateDisabled();};HelpPanel.prototype.destroy=function(){this.el.parentElement.removeChild(this.el);if(HelpPanel.singleton===this){HelpPanel.singleton=null;}};HelpPanel.prototype.goToPage=function(pageIndex){var
title=this.title,scroller=this.scroller,hint=this.hint,page=HelpPanel.pages[pageIndex];var showNext=function(){title.innerHTML=page.title;hint.innerHTML=page.hint;setTimeout(function(){title.setAttribute('data-show','true');hint.setAttribute('data-show','true');},0);};var hidePrev=function(){title.removeAttribute('data-show');hint.removeAttribute('data-show');setTimeout(showNext,350);};var showBody=function(method){var view=document.createElement('div');view.className='view';view.innerHTML=page.body;if(page.onload){page.onload(view);}
switch(method){case'fade':scroller.setAttribute('data-hide','true');setTimeout(function(){scroller.removeAttribute('data-hide');},0);scroller.appendChild(view);break;case'next':scroller.setAttribute('data-scroll','next');setTimeout(function(){scroller.removeChild(scroller.firstChild);scroller.removeAttribute('data-scroll');},500);scroller.appendChild(view);break;case'prev':scroller.setAttribute('data-scroll','prev-pre');setTimeout(function(){scroller.removeChild(scroller.lastChild);scroller.removeAttribute('data-scroll');},500);setTimeout(function(){scroller.setAttribute('data-scroll','prev');},0);scroller.insertBefore(view,scroller.firstChild);break;}}
if(title.innerHTML.length>0){hidePrev();showBody(pageIndex>this.pageIndex?'next':'prev');}else{showNext();showBody('fade');}
this.pageIndex=pageIndex;};LaserCanvas.HelpPanel=HelpPanel;}(window.LaserCanvas));(function(LaserCanvas){var InfoPanel=function(info){this.system=null;this.render=null;this.variablesGetter=null;this.toggleGraph=null;this.info=info;};InfoPanel.prototype.init=function(system,render,variablesGetter,toggleGraph){this.system=system;this.render=render;this.variablesGetter=variablesGetter;this.toggleGraph=toggleGraph;this.systemPropertiesPanel=null;this.elementPropertiesPanels=[];return this;};InfoPanel.prototype.change=function(){var variablesGetter=this.variablesGetter,toggleGraph=this.toggleGraph,panelSystem=this.info.querySelector(".systems"),panelElements=this.info.querySelector(".elements"),system=this.system,render=this.render,onElementEnter=function(e,source){render.highlightElement(source);},onElementLeave=function(e,source){render.highlightElement(null);},onChange=function(){system.update(true);};if(this.systemPropertiesPanel){this.systemPropertiesPanel.remove();}
this.systemPropertiesPanel=new LaserCanvas.InfoPropertiesPanel(this.system.get("name"),this.system,variablesGetter,toggleGraph).appendTo(panelSystem);this.systemPropertiesPanel.addAbcdPropertyRow("abcdSag","sag");this.systemPropertiesPanel.addAbcdPropertyRow("abcdTan","tan");while(this.elementPropertiesPanels.length>0){this.elementPropertiesPanels.pop().remove();}
this.elementPropertiesPanels=this.system.elements().map(function(element){var panel=new LaserCanvas.InfoPropertiesPanel(element.name,element,variablesGetter,toggleGraph).addEventListener("mouseenter",onElementEnter).addEventListener("mouseleave",onElementLeave).addEventListener("change",onChange).appendTo(panelElements);panel.addAbcdQPropertyRow("modeSize","w");panel.addAbcdQPropertyRow("distanceToWaist","z0");panel.addAbcdQPropertyRow("wavefrontROC","r");panel.addAbcdQPropertyRow("waistSize","w0");panel.addAbcdQPropertyRow("rayleighLength","zR");panel.addAbcdPropertyRow("abcdSag",LaserCanvas.Enum.modePlane.sagittal);panel.addAbcdPropertyRow("abcdTan",LaserCanvas.Enum.modePlane.tangential);return panel;});return this;};InfoPanel.prototype.update=function(){this.systemPropertiesPanel.update();this.elementPropertiesPanels.forEach(function(panel){panel.update();});return this;};InfoPanel.prototype.updateGraphs=function(graphCollection){this.systemPropertiesPanel.updateGraphs(graphCollection);this.elementPropertiesPanels.forEach(function(panel){panel.updateGraphs(graphCollection);});};InfoPanel.prototype.highlightElement=function(element){var elements=this.system.elements();this.elementPropertiesPanels.forEach(function(panel,index){panel.setHighlight(element===elements[index]);});};LaserCanvas.InfoPanel=InfoPanel;}(window.LaserCanvas));(function(LaserCanvas){var InfoPropertiesPanel=function(label,source,variablesGetter,toggleGraph){this.source=source;this.variablesGetter=variablesGetter;this.toggleGraph=toggleGraph;this.eventListeners={change:[]};this.el=this.init(label);this.rows=this.initRows();};InfoPropertiesPanel.prototype.init=function(label){var el=document.createElement("div");el.className="infoPropertiesPanel";el.innerHTML=[`<h1>${label}</h1>`,'<table><tbody></tbody></table>',].join("");return el;};InfoPropertiesPanel.prototype.initRows=function(){var source=this.source,toggleGraph=this.toggleGraph,tbody=this.el.querySelector("tbody"),onPropertyChange=this.onPropertyChange.bind(this);return this.source.userProperties().filter(function(prop){return prop.infoPanel!==false;}).map(function(prop){return new LaserCanvas.InputPropertyRow(prop,source,onPropertyChange,toggleGraph).appendTo(tbody);});};InfoPropertiesPanel.prototype.update=function(){for(var row of this.rows){row.update();}};InfoPropertiesPanel.prototype.updateGraphs=function(graphCollection){for(var row of this.rows){if(row.updateGraphs){row.updateGraphs(graphCollection);}}},InfoPropertiesPanel.prototype.addEventListener=function(eventName,handler){var source=this.source;if(this.eventListeners.hasOwnProperty(eventName)){this.eventListeners[eventName].push(handler);}else{this.el.addEventListener(eventName,function(e){handler(e,source);});}
return this;};InfoPropertiesPanel.prototype.fireEvent=function(eventName){this.eventListeners[eventName].forEach(function(handler){handler();});};InfoPropertiesPanel.prototype.setHighlight=function(isHighlight){var panelHighlightClass="panel-highlight";if(isHighlight){this.el.classList.add(panelHighlightClass);}else{this.el.classList.remove(panelHighlightClass);}};InfoPropertiesPanel.prototype.addAbcdPropertyRow=function(propertyName,plane){this.rows.push(new LaserCanvas.AbcdPropertyRow(propertyName,plane,this.source,this.toggleGraph).appendTo(this.el.querySelector("tbody")));};InfoPropertiesPanel.prototype.addAbcdQPropertyRow=function(propertyName,fieldName){this.rows.push(new LaserCanvas.AbcdQPropertyRow(propertyName,fieldName,this.source,this.toggleGraph).appendTo(this.el.querySelector("tbody")));};InfoPropertiesPanel.prototype.appendTo=function(parent){parent.appendChild(this.el);return this;};InfoPropertiesPanel.prototype.remove=function(){if(this.el.parentElement){this.el.parentElement.removeChild(this.el);}};InfoPropertiesPanel.prototype.onPropertyChange=function(propertyName,value){this.source.set(propertyName,value);this.fireEvent("change");};LaserCanvas.InfoPropertiesPanel=InfoPropertiesPanel;}(window.LaserCanvas));(function(LaserCanvas){var InputPropertyRow=function(prop,source,onChange,toggleGraph){this.prop=prop;this.source=source;this.onChange=onChange;this.toggleGraph=toggleGraph;this.propertyName=typeof prop==="string"?prop:prop.propertyName;this.type=this.getType();this.el=this.init();this.control=this.initControl();};InputPropertyRow.eType={unary:"unary",sagTan:"sagTan",action:"action",mx:"mx",select:"select",boolean:"boolean"};InputPropertyRow.template={mx:['<td data-cell="graph-placeholder"></td>','<td data-cell="label"></td>','<td data-cell="mx-col-1">','<span data-cell="mx-1-1"></span><br><span data-cell="mx-2-1"></span>','</td>','<td data-cell="mx-col-2">','<span data-cell="mx-1-2"></span><br><span data-cell="mx-2-2"></span>','</td>','<td data-cell="unit"></td>',].join(""),unary:['<td data-cell="graph"><span><input type="checkbox" /></span></td>','<td data-cell="label"></td>','<td data-cell="value" colspan="2"></td>','<td data-cell="unit"></td>',].join(""),sagTan:['<td data-cell="graph"><span><input type="checkbox" /></span></td>','<td data-cell="label"></td>','<td data-cell="sag" color-theme-plane="sag"></td>','<td data-cell="tan" color-theme-plane="tan"></td>','<td data-cell="unit"></td>'].join(""),action:['<td data-cell="graph-placeholder"></td>','<td data-cell="label"></td>','<td data-cell="action" colspan="2" class="nowrap"></td>','<td data-cell="unit"></td>'].join(""),select:['<td data-cell="graph-placeholder"></td>','<td data-cell="label"></td>','<td data-cell="select" colspan="2"></td>','<td data-cell="unit"></td>'].join(""),boolean:['<td data-cell="graph-placeholder"></td>','<td data-cell="label"></td>','<td data-cell="checkbox" colspan="2"></td>','<td data-cell="unit"></td>'].join("")};InputPropertyRow.prototype.getType=function(){var value;if(typeof this.prop==="object"){if(this.prop.hasOwnProperty("options")){return InputPropertyRow.eType.select;}else if(this.prop.dataType==="boolean"){return InputPropertyRow.eType.boolean;}
return InputPropertyRow.eType.action;}
value=this.get();if(typeof value==="number"){return InputPropertyRow.eType.unary;}else if(Array.isArray(value)&&value.length===2){return InputPropertyRow.eType.sagTan;}
return InputPropertyRow.eType.mx;};InputPropertyRow.prototype.get=function(){return this.source.get(this.propertyName);};InputPropertyRow.prototype.init=function(){var tr=document.createElement("tr");tr.innerHTML=InputPropertyRow.template[this.type];tr.setAttribute("data-property-name",this.propertyName);tr.querySelector('[data-cell="label"]').innerText=LaserCanvas.Utilities.prettify(this.propertyName);tr.querySelector('[data-cell="unit"]').innerText=window.LaserCanvas.unit[this.propertyName]||"";return tr;};InputPropertyRow.prototype.initControl=function(){var onInputChange=this.onInputChange.bind(this);if(this.type===InputPropertyRow.eType.action){return new LaserCanvas.PropertyInput(this.prop,this.source,onInputChange).appendTo(this.el.querySelector('[data-cell="action"]'));}else if(this.type===InputPropertyRow.eType.select){return new LaserCanvas.SelectInput(this.prop,this.source,onInputChange).appendTo(this.el.querySelector('[data-cell="select"]'));}else if(this.type===InputPropertyRow.eType.boolean){return new LaserCanvas.CheckboxInput(this.prop,this.source,onInputChange).appendTo(this.el.querySelector('[data-cell="checkbox"]'));}else{this.el.querySelector('[data-cell="graph"] input').onchange=this.onGraphChange.bind(this);this.update();return null;}};InputPropertyRow.prototype.appendTo=function(parent){parent.appendChild(this.el);return this;};InputPropertyRow.prototype.update=function(){var value=this.get(),Utilities=LaserCanvas.Utilities;switch(this.type){case InputPropertyRow.eType.action:case InputPropertyRow.eType.select:case InputPropertyRow.eType.boolean:this.control.update();break;case InputPropertyRow.eType.unary:this.el.querySelector('[data-cell="value"]').innerText=Utilities.numberFormat(value,true);break;case InputPropertyRow.eType.sagTan:this.el.querySelector('[data-cell="sag"]').innerText=Utilities.numberFormat(value[0],true);this.el.querySelector('[data-cell="tan"]').innerText=Utilities.numberFormat(value[1],true);break;}};InputPropertyRow.prototype.updateGraphs=function(graphCollection){var hasGraph;switch(this.type){case InputPropertyRow.eType.unary:case InputPropertyRow.eType.sagTan:hasGraph=graphCollection.hasGraph(this.source,this.propertyName);this.el.querySelector('[data-cell="graph"] input[type="checkbox"]').checked=hasGraph;break;}},InputPropertyRow.prototype.onInputChange=function(value){var prevValue=this.get();if(this.onChange){try{this.onChange(this.prop.propertyName,value);}catch(err){this.onChange(this.prop.propertyName,prevValue);}}};InputPropertyRow.prototype.onGraphChange=function(){this.toggleGraph(this.source,this.propertyName,null);};var AbcdPropertyRow=function(propertyName,plane,source,toggleGraph){this.propertyName=propertyName;this.plane=plane;this.source=source;this.toggleGraph=toggleGraph;this.el=this.init();};AbcdPropertyRow.prototype.init=function(){var tr=document.createElement("tr");tr.innerHTML=InputPropertyRow.template.mx;tr.setAttribute("data-property-name",this.propertyName);tr.querySelector('[data-cell="label"]').innerText=LaserCanvas.Utilities.prettify(this.propertyName);return tr;};AbcdPropertyRow.prototype.appendTo=function(parent){parent.appendChild(this.el);return this;};AbcdPropertyRow.prototype.get=function(){if(typeof this.source.elementAbcd==="function"){return this.source.elementAbcd(1,this.plane);}
if(typeof this.source.abcd==="function"){return this.source.abcd()[this.plane].mx;}};AbcdPropertyRow.prototype.update=function(){var mx=this.get();for(var r=0;r<2;r+=1){for(var c=0;c<2;c+=1){this.el.querySelector(`[data-cell="mx-${r + 1}-${c + 1}"]`).innerText=LaserCanvas.Utilities.numberFormat(mx[r][c],true);}}};var AbcdQPropertyRow=function(propertyName,fieldName,source,toggleGraph){this.propertyName=propertyName;this.fieldName=fieldName;this.source=source;this.toggleGraph=toggleGraph;this.el=this.init();};AbcdQPropertyRow.prototype.init=function(){var tr=document.createElement("tr");tr.innerHTML=InputPropertyRow.template.sagTan;tr.setAttribute("data-property-name",this.propertyName);tr.querySelector('[data-cell="label"]').innerText=LaserCanvas.Utilities.prettify(this.propertyName);tr.querySelector('[data-cell="unit"]').innerText=window.LaserCanvas.unit[this.propertyName]||"";tr.querySelector('[data-cell="graph"] input[type="checkbox"]').onchange=this.onGraphChange.bind(this);return tr;};AbcdQPropertyRow.prototype.appendTo=function(parent){parent.appendChild(this.el);return this;};AbcdQPropertyRow.prototype.get=function(){var abcdQ=this.source.abcdQ;return[abcdQ[0][this.fieldName],abcdQ[1][this.fieldName]];};AbcdQPropertyRow.prototype.update=function(){var value=this.get();this.el.querySelector('[data-cell="sag"]').innerText=LaserCanvas.Utilities.numberFormat(value[0],true);this.el.querySelector('[data-cell="tan"]').innerText=LaserCanvas.Utilities.numberFormat(value[1],true);};AbcdQPropertyRow.prototype.updateGraphs=function(graphCollection){var hasGraph=graphCollection.hasGraph(this.source,this.propertyName,this.fieldName);this.el.querySelector('[data-cell="graph"] input[type="checkbox"]').checked=hasGraph;};AbcdQPropertyRow.prototype.onGraphChange=function(){this.toggleGraph(this.source,this.propertyName,this.fieldName);};LaserCanvas.AbcdPropertyRow=AbcdPropertyRow;LaserCanvas.InputPropertyRow=InputPropertyRow;LaserCanvas.AbcdQPropertyRow=AbcdQPropertyRow;}(window.LaserCanvas));(function(LaserCanvas){LaserCanvas.PropertiesPanel=function(render,system){var
currentElement=null,panel=document.createElement("div"),sellmeier=null,rows=[],showPanel=function(x,y){var w,h,W=window.innerWidth,H=window.innerHeight;if(panel.getAttribute("data-visible")!=="true"){document.addEventListener("mousedown",onDocumentDown,false);document.addEventListener("touchstart",onDocumentTouch,false);}
panel.setAttribute("data-visible","true");w=panel.offsetWidth;h=panel.offsetHeight;x=Math.max(0,Math.min(x-0.5*w,W-w));y=Math.max(0,Math.min(y+16,H-h));panel.style.left=x+"px";panel.style.top=y+"px";},hidePanel=function(){panel.removeAttribute("data-visible");clearRows();currentElement=null;document.removeEventListener("mousedown",onDocumentDown,false);document.removeEventListener("touchstart",onDocumentTouch,false);if(sellmeier){sellmeier.hide();}},onDocumentDown=function(e){var el=e.target,re=/sellmeierPanel/;while(el&&el!==panel&&!re.test(el.className)){el=el.parentNode;}
if(!el){hidePanel();}},onDocumentTouch=function(ev){if(ev.touches.length===1){return onDocumentDown.call(this,ev.touches.item(0));}},onPropertyChange=function(propertyName,newValue){var
systemChanged=propertyName==="type";currentElement.set(propertyName,newValue);system.update(true,systemChanged);if(systemChanged){prepareProperties(currentElement);}},onNameChange=function(){currentElement.name=this.value;system.update();},onNameKeydown=function(e){switch(e.which||e.keyCode){case 10:case 13:case 27:this.blur();return false;}},onDelete=function(){system.removeElement(currentElement);currentElement=null;hidePanel();},onSellmeier=function(){var
ready=function(){var l=1e-3*system.get("wavelength");sellmeier.setApplyAction(onApplySellmeier);sellmeier.updateCalculation(l);};if(sellmeier){sellmeier.show();ready();}else{sellmeier=new LaserCanvas.Sellmeier();ready();}},onApplySellmeier=function(prop){LaserCanvas.Utilities.foreach(prop,function(propertyName,value){if(currentElement.canSetProperty(propertyName)){currentElement.set(propertyName,value);}});system.update(true);},clearRows=function(){var tr;panel.querySelector("h1 input").blur();while((tr=panel.querySelector("tbody tr"))){tr.parentNode.removeChild(tr);}},initRows=function(){var element=currentElement,props=element.userProperties(),tbody=panel.querySelector("tbody"),hasRefractiveIndex=props.some(function(prop){return prop.propertyName==="refractiveIndex";});panel.querySelector("h1 input").value=element.name;panel.setAttribute("data-can-delete",props.canDelete===false||system.canDeleteElement(element)===false?"false":"true");panel.setAttribute("data-has-refractive-index",hasRefractiveIndex);return props.filter(function(prop){return system.showElementProperty(prop.propertyName)&&element.canSetProperty(prop.propertyName);}).map(function(prop){return new LaserCanvas.InputPropertyRow(prop,element,onPropertyChange).appendTo(tbody);});},update=function(){for(var row of rows){row.update();}},prepareProperties=function(el){currentElement=el;clearRows();rows=initRows();},onElementClick=function(e,el){if(el&&el.showProperties!==false){prepareProperties(el);showPanel(e.pageX,e.pageY);}},activatePanel=function(){var input,onClick=function(sel,handler){panel.querySelector(sel).onclick=handler;};LaserCanvas.localize(panel);LaserCanvas.Utilities.draggable(panel,{handle:panel.querySelector(".dragbar")});input=panel.querySelector("h1 input");input.onkeyup=input.onchange=onNameChange;input.onkeydown=onNameKeydown;onClick('button[data-action="close"]',hidePanel);onClick('button[data-action="sellmeier"]',onSellmeier);onClick('button[data-action="delete"]',onDelete);};panel.innerHTML=LaserCanvas.PropertiesPanel.template;panel.className="propertiesPanel";activatePanel();document.body.appendChild(panel);render.addEventListener("elementClick",onElementClick);return{update:update};};LaserCanvas.PropertiesPanel.template=['<div class="dragbar"></div>','<h1>','<input type="text" data-action="name" />','<button data-action="close">X</button>','</h1>','<table class="banded">','<thead>','<tr>','<th>Property</th>','<th colspan="2">Value</th>','</tr>','<tr data-property-name="">','<td><label></label></td>','<td><input type="text"></td>','<td data-content="unit"></td>','</tr>','</thead>','<tbody>','</tbody>','</table>','<div class="lcbuttons">','<button class="lcbutton padded" data-action="sellmeier">','<label data-localize="Sellmeier..."></label>','</button>','<button class="lcbutton padded" data-action="delete">','<label data-localize="Delete"></label>','</button>','</div>'].join("");}(window.LaserCanvas));(function(LaserCanvas){var PropertyInput=function(prop,source,onChange){this.prop=prop;this.source=source;this.onChange=onChange;this.isFocused=false;this.lastValue="";this.el=this.init();this.input=this.el.querySelector("input");this.select=this.el.querySelector("select");this.update();this.updateInputHint();};PropertyInput.template=['<button data-step="-1">&minus;</button>','<span class="input">','<input type="text" />','</span>','<button data-step="+1">+</button>','<span class="selector">','<select></select>','</span>'].join("");PropertyInput.prototype.init=function(){var self=this,el=document.createElement("div"),attachInputHandlers=function(input){input.onkeydown=self.onInputKeydown.bind(self);input.onkeyup=self.onInputKeyup.bind(self);input.onchange=self.onInputChange.bind(self);input.onfocus=self.onInputFocus.bind(self);input.onblur=self.onInputBlur.bind(self);},attachButtonHandlers=function(buttons){var onClick=function(){var step=+this.getAttribute("data-step");self.increment(step*self.prop.increment);}
LaserCanvas.Utilities.foreach(buttons,function(){this.onclick=onClick;});},attachSelectHandlers=function(select){el.setAttribute("data-has-standard","true");self.prop.standard.forEach(function(value){var option=document.createElement("option");if(typeof value!=="object"){option.value=option.innerText=value;}else if(value.value===undefined){option.innerText=LaserCanvas.localize(option.innerText=value.label);option.disabled=true;}else{option.value=value.value;option.innerText=LaserCanvas.Utilities.stringFormat("{0} ({1})",value.value,LaserCanvas.localize(value.label));}
select.insertBefore(option,select.firstChild);});select.onchange=self.onSelectChange.bind(self);setTimeout(function(){select.value=self.get();},0);};el.className="propertyInput";el.innerHTML=PropertyInput.template;attachInputHandlers(el.querySelector("input"));if(this.prop.hasOwnProperty("standard")){attachSelectHandlers(el.querySelector("select"));}else if(this.prop.hasOwnProperty("increment")){attachButtonHandlers(el.querySelectorAll("button"));}else{LaserCanvas.Utilities.foreach(el.querySelectorAll("button"),function(){this.disabled=true;});}
return el;};PropertyInput.prototype.appendTo=function(parent){parent.appendChild(this.el);return this;};PropertyInput.prototype.get=function(){if(this.isFocused){return this.source.expression(this.prop.propertyName);}else{return LaserCanvas.Utilities.numberFormat(this.source.get(this.prop.propertyName));}};PropertyInput.prototype.getValue=function(){return this.source.get(this.prop.propertyName);};PropertyInput.prototype.update=function(value){if(this.isFocused&&value===undefined){return;}
var value=value||this.get(),displayValue=typeof value==="number"?LaserCanvas.Utilities.numberFormat(value):value;if(this.input.value!==displayValue){this.input.value=displayValue;}
this.select.value=value;};PropertyInput.prototype.updateInputHint=function(){this.input.setAttribute("data-expression",isNaN(this.source.expression(this.prop.propertyName))?"true":"false");};PropertyInput.prototype.onInputFocus=function(){this.isFocused=true;this.lastValue=this.input.value;this.update(this.source.expression(this.prop.propertyName));};PropertyInput.prototype.onInputBlur=function(){this.isFocused=false;this.update();this.updateInputHint();};var ENTER=13,NEWLINE=10,ESCAPE=27,UP_ARROW=38,DOWN_ARROW=40;PropertyInput.prototype.onInputKeydown=function(keyboardEvent){switch(keyboardEvent.which||keyboardEvent.keyCode){case ENTER:case NEWLINE:this.input.blur();break;case ESCAPE:this.input.value=this.lastValue;this.input.blur();break;case UP_ARROW:this.increment(+1*this.prop.increment);return false;case DOWN_ARROW:this.increment(-1*this.prop.increment);return false;}};PropertyInput.prototype.onInputKeyup=function(){var value=this.input.value;if(value!==""){this.fireChangeEvent(value);this.updateInputHint();}};PropertyInput.prototype.onInputChange=function(){this.fireChangeEvent(this.input.value);};PropertyInput.prototype.increment=function(step){var newValue,value=this.getValue();if(!step){return;}
if(!Number.isInteger(step)){newValue=value+step;}else if(step>0){newValue=step*(Math.floor(value/step)+1);}else{newValue=-step*(Math.ceil(value/-step)-1);}
if((this.prop.hasOwnProperty("min")&&newValue<this.prop.min)||(this.prop.hasOwnProperty("max")&&newValue>this.prop.max)){return;}
if(this.prop.hasOwnProperty("wrap")&&newValue>this.prop.wrap){newValue-=2*this.prop.wrap;}
if(this.prop.hasOwnProperty("wrap")&&newValue<-this.prop.wrap){newValue+=2*this.prop.wrap;}
this.update(newValue);this.fireChangeEvent(newValue);this.updateInputHint();};PropertyInput.prototype.onSelectChange=function(){this.fireChangeEvent(+this.select.value);this.select.value="";};PropertyInput.prototype.fireChangeEvent=function(value){this.onChange(value);};LaserCanvas.PropertyInput=PropertyInput;}(window.LaserCanvas));(function(LaserCanvas){var SelectInput=function(prop,source,onChange){this.prop=prop;this.source=source;this.onChange=onChange;this.el=this.init(prop);this.select=this.el.querySelector("select");this.update();};SelectInput.template=['<select />'].join("");SelectInput.prototype.init=function(){var select,option,opt,el=document.createElement("div");el.className="selectInput";el.innerHTML=SelectInput.template;select=el.querySelector("select");for(var option of this.prop.options){opt=document.createElement("option");opt.value=option;opt.innerText=option;select.appendChild(opt);}
select.onchange=this.onSelectChange.bind(this);return el;};SelectInput.prototype.appendTo=function(parent){parent.appendChild(this.el);return this;};SelectInput.prototype.get=function(){return this.source.get(this.prop.propertyName);};SelectInput.prototype.update=function(){this.select.value=this.get();};SelectInput.prototype.onSelectChange=function(){this.fireChangeEvent(this.select.value);};SelectInput.prototype.fireChangeEvent=function(value){this.onChange(value);};LaserCanvas.SelectInput=SelectInput;}(window.LaserCanvas));(function(LaserCanvas){LaserCanvas.Render=function(system,info,canvas){var
mpageOffset={left:0,top:0},mzoom={xWorld:0,yWorld:0,s:1,xCanvas:0,yCanvas:0},mdrag={isDrag:false,hasMoved:false,element:null,ptStart:null,ptsStart:null,isPan:false,lastTouch:null},meventListeners={elementClick:[],insertMove:[]},minteraction=LaserCanvas.Render.interaction.layout,mprop={showDistance:true,showAnnotation:false},mvariablesGetter=null,setVariablesGetter=function(getter){mvariablesGetter=getter;return this;},getVariables=function(){return mvariablesGetter?mvariablesGetter():{};},property=function(propertyName,newValue){if(newValue!==undefined){switch(propertyName){case'showDistance':case'showAnnotation':mprop[propertyName]=newValue;update.call(this);break;}}else{return mprop[propertyName];}},onResize=function(){mpageOffset=LaserCanvas.Utilities.elementOffset(canvas);mzoom.xCanvas=0.5*canvas.width;mzoom.yCanvas=0.5*canvas.height;update.call(this);},setInteraction=function(interaction){minteraction=interaction;document.body.setAttribute('data-interaction',minteraction);if(minteraction===LaserCanvas.Render.interaction.inspect){inspectLocation.call(this,{x:0,y:0});}},resetTransform=function(){mzoom.xWorld=0;mzoom.yWorld=0;mzoom.s=1;},getTransform=function(){return mzoom;},getCanvas=function(){return canvas;},getContext=function(){return canvas.getContext('2d');},worldToCanvas=function(x,y,r){return{x:mzoom.xCanvas+(x-mzoom.xWorld)*mzoom.s,y:mzoom.yCanvas-(y-mzoom.yWorld)*mzoom.s,r:mzoom.s*(r||0)};},canvasToWorld=function(x,y){return{x:mzoom.xWorld+(x-mzoom.xCanvas)/mzoom.s,y:mzoom.yWorld-(y-mzoom.yCanvas)/mzoom.s};},eventToWorld=function(e){return canvasToWorld(e.pageX-mpageOffset.left,e.pageY-mpageOffset.top);},updateHighlight=function(){highlightElement(mdrag.element,mdrag.isDrag?'drag':'hover');},highlightElement=function(element,state){var pt,loc,highlight=canvas.parentNode.querySelector('.highlight');if(element){highlight.setAttribute('data-state',state||'hover');loc=element.location();pt=worldToCanvas(loc.x0||loc.x,loc.y0||loc.y);highlight.style.left=pt.x.toFixed(2)+'px';highlight.style.top=pt.y.toFixed(2)+'px';}else{highlight.removeAttribute('data-state');}
info.highlightElement(element);},onUp=function(){document.removeEventListener('mouseup',onMouseUp,false);system.dragElementEnd();mdrag.isDrag=mdrag.isPan=false;},onMouseUp=function(e){onUp();},onMove=function(pt){var element,seg,interaction=LaserCanvas.Render.interaction;switch(minteraction){case interaction.insert:seg=inspectLocation.call(this,pt,'insertElement');seg.canvas=worldToCanvas(seg.x,seg.y);fireEventListeners('insertMove',seg);break;case interaction.inspect:default:if(minteraction===interaction.inspect){inspectLocation.call(this,pt);}
element=system.elementAtLocation(pt,LaserCanvas.Render.tolerance/mzoom.s);if(!mdrag.element&&element){canvas.classList.add('hoverOverElement');}else if(mdrag.element&&!element){canvas.classList.remove('hoverOverElement');}
mdrag.element=element;updateHighlight();break;}},onDown=function(pt){if(mdrag.element){if(system.dragElementStart(pt,mdrag.element)){mdrag.isDrag=true;mdrag.ptStart=pt;}}else{mdrag.ptStart=worldToCanvas(pt.x,pt.y);mdrag.isPan=true;}
if(mdrag.isDrag||mdrag.isPan){document.addEventListener('mouseup',onMouseUp,false);}
mdrag.hasMoved=false;},onMouseMove=function(e){var pt=eventToWorld(e);if(mdrag.isPan){mdrag.ptStart=onPan.call(this,worldToCanvas(pt.x,pt.y));}else if(!mdrag.isDrag){onMove.call(this,pt);}else if(mdrag.element){onDragElement.call(this,pt);}
if(minteraction===LaserCanvas.Render.interaction.inspect){inspectLocation.call(this,pt);}
updateHighlight();},onMouseDown=function(e){var interaction=LaserCanvas.Render.interaction,pt=eventToWorld(e),el=system.elementAtLocation(pt,LaserCanvas.Render.tolerance/mzoom.s);switch(minteraction){case interaction.inspect:case interaction.layout:mdrag.element=el;onDown.call(this,pt);e.preventDefault&&e.preventDefault();break;}},onClick=function(e){if(mdrag.element&&!mdrag.hasMoved){fireEventListeners('elementClick',e,mdrag.element);}},onWheel=function(e){onZoom.call(this,Math.pow(2,-0.001*e.deltaY));onMouseMove.call(this,e);},onDragElement=function(pt){mdrag.ptLast=pt;system.dragElement(pt,mdrag.ptStart,mdrag.element);if(!mdrag.hasMoved&&Math.abs(pt.x-mdrag.ptStart.x)+Math.abs(pt.y-mdrag.ptStart.y)>3){mdrag.hasMoved=true;};},onDragElementEnd=function(){system.dragElementEnd(mdrag.ptLast,mdrag.ptStart,mdrag.element);},onPan=function(pt){mzoom.xWorld-=(pt.x-mdrag.ptStart.x)/mzoom.s;mzoom.yWorld+=(pt.y-mdrag.ptStart.y)/mzoom.s;update.call(this);return pt;},onZoom=function(ds){mzoom.s*=ds;update.call(this);},txtLog=function(str){var txt=document.querySelector('#txt');if(!txt){txt=document.createElement('textarea');txt.id='txt';txt.setAttribute('rows','12');txt.setAttribute('cols','40');txt.style.position='fixed';txt.style.left='0';txt.style.top='0';txt.style.fontSize='10px';document.body.appendChild(txt);}
txt.value+=str+'\n';txt.scrollTop=1e5;},touchesToWorld=function(ev,pt){var pts=[pt||eventToWorld(ev.touches.item(0)),eventToWorld(ev.touches.item(1))];pts.w=Math.sqrt((pts[0].x-pts[1].x)*(pts[0].x-pts[1].x)+
(pts[0].y-pts[1].y)*(pts[0].y-pts[1].y))||1;return pts;},onTouchEnd=function(ev){if(ev.touches.length===0){document.removeEventListener('touchend',onTouchEnd,false);if(!mdrag.hasMoved){onClick(mdrag.lastTouch);}
mdrag.isDrag=mdrag.isPan=false;mdrag.element=null;updateHighlight();}},onTouchMove=function(ev){var pts,mpts=mdrag.ptsStart;if(ev.touches.length===1){onMouseMove.call(this,ev.touches.item(0));}else if(ev.touches.length===2){pts=touchesToWorld(ev);mdrag.ptStart=onPan.call(this,worldToCanvas(0.5*(pts[0].x+pts[1].x),0.5*(pts[0].y+pts[1].y)))
onZoom.call(this,pts.w/mpts.w);updateHighlight();}
mdrag.hasMoved=true;},onTouchStart=function(ev){var el,e=ev.touches.item(0),pt=!e?null:eventToWorld(e);if(ev.touches.length===1){el=system.elementAtLocation(pt,LaserCanvas.Render.tolerance/mzoom.s);if(el){mdrag.element=el;onDown.call(this,pt);}
mdrag.ptStart=pt;mdrag.hasMoved=false;mdrag.lastTouch=e;document.addEventListener('touchend',onTouchEnd,false);}else if(ev.touches.length===2){mdrag.ptsStart=touchesToWorld(ev,pt);mdrag.ptStart=worldToCanvas(0.5*(mdrag.ptsStart[0].x+mdrag.ptsStart[1].x),0.5*(mdrag.ptsStart[0].y+mdrag.ptsStart[1].y));mdrag.hasMoved=true;}
ev.preventDefault();},triggerEvent=function(name,args){if(name==='touchmove'){return onTouchMove.apply(this,Array.prototype.slice.call(arguments,1));}},inspectLocation=function(pt,filterBy){var s,sagw,tanw,modePlane=LaserCanvas.Enum.modePlane,numberFormat=LaserCanvas.Utilities.numberFormat,seg=system.segmentNearLocation(pt,filterBy),ptw=worldToCanvas(seg.x,seg.y),insp=document.querySelector('.laserCanvasInspect'),elli=insp.querySelector('.ellipse');insp.style.left=Math.round(ptw.x)+'px';insp.style.top=Math.round(ptw.y)+'px';if(!filterBy){sagw=system.inspectSegment(seg,modePlane.sagittal).w;tanw=system.inspectSegment(seg,modePlane.tangential).w;insp.querySelector('[data-dimension="sag"]').innerHTML=numberFormat(sagw);insp.querySelector('[data-dimension="tan"]').innerHTML=numberFormat(tanw);if(!isNaN(sagw)&&!isNaN(tanw)){s=Math.max(sagw,tanw);elli.style.width=(tanw/s)+'em';elli.style.height=(sagw/s)+'em';elli.style.display='inline-block';}else{elli.style.display='none';}}
return seg;},onInsert=function(e,elementName){var pt=eventToWorld(e),element=system.insertElement(pt,elementName);fireEventListeners('elementClick',e,element);},fireEventListeners=function(name,args){var k,listeners=meventListeners[name];for(k=0;k<listeners.length;k+=1){listeners[k].apply(this,Array.prototype.slice.call(arguments,1));}},addEventListener=function(name,handler){var k,listeners=meventListeners[name];for(k=listeners.length-1;k>=0;k-=1){if(listeners[k]===handler){break;}}
if(k<0){listeners.push(handler);}},removeEventListener=function(name,handler){var k,listeners=meventListeners[name];for(k=listeners.length-1;k>=0;k-=1){if(listeners[k]===handler){listeners.splice(k,1);}}},beginPath=function(){getContext().beginPath();return this;},moveTo=function(x,y){var pt=worldToCanvas(x,y);getContext().moveTo(pt.x,pt.y);return this;},lineTo=function(x,y){var pt=worldToCanvas(x,y);getContext().lineTo(pt.x,pt.y);return this;},arc=function(x,y,r,q0,q1,dir){var pt=worldToCanvas(x,y,r);getContext().arc(pt.x,pt.y,pt.r,q0,q1,dir);return this;},stroke=function(){getContext().stroke();return this;},fillText=function(text,x,y,xem,yem){var em=15,pt=worldToCanvas(x,y);getContext().fillText(text,pt.x+(xem||0)*em,pt.y+(yem||0)*em);return this;},centerText=function(text,x,y,xem,yem){var ctx=getContext();save();ctx.textAlign='center';fillText(text,x,y,xem,yem);restore();},createPattern=function(image){var ctx=getContext(),pattern=ctx.createPattern(image,'repeat');ctx.fillStyle=pattern;return this;},drawPath=function(cmd,x0,y0,q0,scl){var k,step,dpt,c,ptZ=null,reOne=/(m|l)\s*([\d+-.]+)[, ]([\d+-.]+)/i,ctx=getContext(),s=mzoom.s,pt={x:x0||0,y:y0||0},steps=cmd.match(/[a-df-z][^a-df-z]*/ig),actions=/[fsz]*$/i.exec(cmd);q0=q0||0;scl=scl||1;actions=actions||'S';ctx.save();ctx.translate(-mzoom.xWorld*s,mzoom.yWorld*s);ctx.translate(x0*s,-y0*s);ctx.translate(mzoom.xCanvas,mzoom.yCanvas);ctx.rotate(q0||0);this.beginPath();ctx.moveTo(pt.x*s,pt.y*s);for(k=0;k<steps.length;k+=1){step=reOne.exec(steps[k]);if(step){c=step[1];dpt={x:+step[2],y:+step[3]};if('M'===c||'L'===c){pt=dpt;}else{pt.x+=dpt.x*scl;pt.y+=dpt.y*scl;}
if('m'===c.toLowerCase()){ctx.moveTo(pt.x*s,-pt.y*s);}else{ctx.lineTo(pt.x*s,-pt.y*s);}
if(ptZ===null){ptZ={x:pt.x,y:pt.y};}}}
if(/z/i.test(actions)&&ptZ){ctx.lineTo(ptZ.x*s,-ptZ.y*s);}
if(/f/i.test(actions)){ctx.fill();}
if(/s/i.test(actions)){this.stroke();}
ctx.restore();return this;},drawVector=function(V,x,y,colorOptional){var dx=V[0],dy=V[1];this.drawPath(`M ${-V.norm()} 0 L 0 0 L -12 -5 L -10 0 L -12 5 L 0 0`,x+dx,y+dy,-V.atan2());if(colorOptional){this.setStroke(colorOptional,2).stroke();}
return this;},drawImage=function(image,x,y,q){var ctx=getContext(),pt=worldToCanvas(x,y),s=Math.max(0.3,Math.min(2,mzoom.s));ctx.save();ctx.translate(pt.x,pt.y);ctx.rotate(q);ctx.scale(s,s);ctx.translate(-image.width/2,-image.height/2);ctx.drawImage(image,0,0);ctx.restore();return this;},save=function(){getContext().save();return this;},translate=function(x,y){var pt=worldToCanvas(x,y);getContext().translate(pt.x-mzoom.xCanvas,pt.y-mzoom.yCanvas);return this;},restore=function(){getContext().restore();return this;},setStroke=function(strokeStyle,lineWidth){var ctx=getContext();ctx.strokeStyle=strokeStyle;ctx.lineWidth=lineWidth;return this;},clear=function(){canvas.getContext('2d').clearRect(0,0,canvas.width,canvas.height);return this;},update=function(){save();getContext().font='11pt "Open Sans",Helvetica,Arial,sans-serif';LaserCanvas.Render.update(system,this,mprop);restore();if(typeof globalRenderSvg!=='undefined'){globalRenderSvg.update();}};(function(self){var name,events={'click':onClick,'mousemove':onMouseMove,'mousedown':onMouseDown,'touchstart':onTouchStart,'touchmove':onTouchMove,'wheel':onWheel};for(name in events){if(events.hasOwnProperty(name)){canvas.addEventListener(name,(function(handler){return function(e){handler.call(self,e);}}(events[name])),false);}}
window.LaserCanvas.app
.addEventListener('interactionChange',function(name){self.setInteraction(name);});}(this));this.addEventListener=addEventListener;this.getCanvas=getCanvas;this.getTransform=getTransform;this.getVariables=getVariables;this.highlightElement=highlightElement;this.onInsert=onInsert;this.onResize=onResize;this.property=property;this.removeEventListener=removeEventListener;this.resetTransform=resetTransform;this.setInteraction=setInteraction;this.setVariablesGetter=setVariablesGetter;this.triggerEvent=triggerEvent;this.update=update;this.arc=arc;this.beginPath=beginPath;this.centerText=centerText;this.clear=clear;this.createPattern=createPattern;this.drawImage=drawImage;this.drawPath=drawPath;this.drawVector=drawVector;this.fillText=fillText;this.lineTo=lineTo;this.moveTo=moveTo;this.restore=restore;this.translate=translate;this.save=save;this.setStroke=setStroke;this.stroke=stroke;};}(window.LaserCanvas));(function(LaserCanvas){LaserCanvas.Render.update=function(system,render,options){var
variables=render.getVariables(),drawMethod=(options||{}).drawMethod||LaserCanvas.theme.current.drawMethod||'draw',drawToNext=function(element,nextElement,layer){var abcdQ,plane,n,ctx,renderLayer=LaserCanvas.Enum.renderLayer,modePlane=LaserCanvas.Enum.modePlane,loc=element.location(),distanceToNext=element.get("distanceToNext",variables),nextLoc=nextElement.location();switch(layer){case renderLayer.axis:render.beginPath();render.setStroke('#000',1);render.moveTo(loc.x,loc.y);render.lineTo(nextLoc.x,nextLoc.y);render.stroke();break;case renderLayer.distance:if(distanceToNext>0&&typeof render.centerText==='function'){render.centerText(Math.round(distanceToNext),(loc.x+nextLoc.x)/2,(loc.y+nextLoc.y)/2,0,1);}
break;case renderLayer.sagittal:case renderLayer.tangential:plane=layer===renderLayer.sagittal?modePlane.sagittal:modePlane.tangential;abcdQ=element.abcdQ[plane];n=element.get("refractiveIndex")||1;if(abcdQ){renderMode(loc,{dist:distanceToNext,z0:abcdQ.z0,w0:abcdQ.w0*0.1,zR:abcdQ.zR,n:n},plane);}
break;}},renderMode=function(loc,b,plane){var
modeScale=0.25,cos=Math.cos(loc.q),sin=Math.sin(loc.q),dist=b.dist,z0=b.z0*b.n,w0=b.w0,zR=b.zR*b.n,k=0,w=[],z0R=-z0/zR,z1R=(dist-z0)/zR,modePoints=LaserCanvas.Render.modePoints,wz=modePoints.wz,ww=modePoints.ww,moveOrLine=function(x,y,isMove){var
xo=loc.x+cos*x-sin*y*modeScale,yo=loc.y+sin*x+cos*y*modeScale;if(isMove){render.moveTo(xo,yo);}else{render.lineTo(xo,yo);}},drawUp=function(x,y,isMove){w.push({x:x,y:y});moveOrLine(x,y,isMove);},drawDown=function(){var p,isMove=true;while(w.length>0){p=w.pop();moveOrLine(p.x,-p.y,isMove);isMove=false;}},wd=function(d){return LaserCanvas.systemAbcd.propagateParameters(b,b.n,d).w;};render.beginPath();render.setStroke(LaserCanvas.theme.current.mode[plane],[1,2][plane]);drawUp(0,wd(0),true);for(k=0;k<wz.length&&wz[k]<z0R;k+=1){}
for(;k<wz.length&&wz[k]<=z1R;k+=1){drawUp(wz[k]*zR+z0,ww[k]*w0);}
drawUp(dist,wd(dist));drawDown();render.stroke();if(z0>0&&z0<dist){render.beginPath();moveOrLine(z0,w0,true);moveOrLine(z0,-w0);render.stroke();}},updateLayer=function(layer){var k,element,elements=system.elements(),nextElement=elements[0];for(k=0;k<elements.length;k+=1){element=nextElement;nextElement=k<elements.length-1?elements[k+1]
:null;if(typeof element[drawMethod]==='function'){element[drawMethod](render,layer);}
if(nextElement!==null){drawToNext(element,nextElement,layer);}else if(system.get("configuration")===LaserCanvas.System.configuration.ring){drawToNext(element,elements[0],layer);}}},update=function(){var renderLayer=LaserCanvas.Enum.renderLayer;render.clear();updateLayer(renderLayer.axis);updateLayer(renderLayer.tangential);updateLayer(renderLayer.sagittal);updateLayer(renderLayer.optics);if(options.showDistance){updateLayer(renderLayer.distance);}
if(options.showAnnotation){updateLayer(renderLayer.annotation);}};update();};LaserCanvas.Render.tolerance=15;LaserCanvas.Render.modePoints={wz:[-6,-4,-2,-1,-0.8,-0.6,-0.4,-0.2,0,0.20,0.40,0.60,0.80,1.00,2.00,4.00,6.00],ww:[6.08,4.12,2.24,1.41,1.28,1.17,1.08,1.02,1,1.02,1.08,1.17,1.28,1.41,2.24,4.12,6.08]};LaserCanvas.Render.interaction={insert:'insert',inspect:'inspect',layout:'layout'};}(window.LaserCanvas));window.LaserCanvas.RenderSvg=function(system){"use strict";var
ns=window.LaserCanvas.RenderSvg.svgNS,svg=document.createElementNS(ns,'svg'),mpath=null,mstrokeStyle='#000',mlineWidth=1,mgroups=[],mvariablesGetter=null,setVariablesGetter=function(getter){mvariablesGetter=getter;return this;},getVariables=function(){return mvariablesGetter?mvariablesGetter():{};},clear=function(){while(svg.lastChild){svg.removeChild(svg.lastChild);}
return this;},save=function(){var g=document.createElementNS(ns,'g');(mgroups[0]||svg).appendChild(g);mgroups.splice(0,0,g);return this;},restore=function(){mgroups.splice(0,1);return this;},translate=function(x,y){(mgroups[0]||svg).setAttributeNS(null,'transform',window.LaserCanvas.Utilities.stringFormatPrecision(2,'translate({0}, {1})',x,-y));return this;},beginPath=function(){mpath=document.createElementNS(ns,'path');mpath.setAttributeNS(null,'d','');return this;},moveOrLineTo=function(cmd,x,y){var d;if(mpath){d=mpath.getAttributeNS(null,'d');d+=window.LaserCanvas.Utilities.stringFormatPrecision(2,' {0} {1} {2}',cmd,x,-y);mpath.setAttributeNS(null,'d',d);}
return this;},moveTo=function(x,y){return moveOrLineTo('M',x,y);},lineTo=function(x,y){return moveOrLineTo('L',x,y);},drawPath=function(cmd,x0,y0,q0,scl){var
Utilities=window.LaserCanvas.Utilities,actions=/[fsz]*$/i.exec(cmd);cmd=cmd
.replace(/([ml]\s+[\d+-.]+ )([\d+-.]+)/gi,function(m,c,y){return Utilities.stringFormat('{0}{1}',c,-(+y));})
.replace(/[fs]/gi,'');this.beginPath();mpath.setAttributeNS(null,'d',cmd);mpath.setAttributeNS(null,'transform',Utilities.stringFormatPrecision(2,'translate({0}, {1}) rotate({2})',x0,-y0,q0*180/Math.PI));if(/s/i.test(actions)){this.stroke();}
return this;},drawVector=function(V,x,y,colorOptional){var dx=V[0],dy=V[1];this.drawPath(`M ${-V.norm()} 0 L 0 0 L -12 -5 L -10 0 L -12 5 L 0 0`,x+dx,y+dy,-V.atan2());if(colorOptional){this.setStroke(colorOptional,2).stroke();}
return this;},setStroke=function(strokeStyle,lineWidth){mstrokeStyle=strokeStyle;mlineWidth=lineWidth;return this;},stroke=function(){if(mpath){mpath.setAttributeNS(null,'stroke',mstrokeStyle);mpath.setAttributeNS(null,'stroke-width',mlineWidth);(mgroups[0]||svg).appendChild(mpath);}
return this;},fillOrCenterText=function(txt,x,y,xem,yem,anchor){var size=12,text=document.createElementNS(ns,'text'),textNode=document.createTextNode(txt);text.setAttributeNS(null,'x',x);text.setAttributeNS(null,'y',-y);text.setAttributeNS(null,'transform',window.LaserCanvas.Utilities.stringFormatPrecision(2,'translate({0}, {1})',size*(xem||0),size*(yem||0)));if(anchor){text.setAttributeNS(null,'text-anchor',anchor);}
text.setAttributeNS(null,'fill',mstrokeStyle);text.setAttributeNS(null,'stroke','none');text.appendChild(textNode);svg.appendChild(text);return this;},fillText=function(txt,x,y,xem,yem){return fillOrCenterText(txt,x,y,xem,yem);},centerText=function(txt,x,y,xem,yem){return fillOrCenterText(txt,x,y,xem,yem,'middle');},drawImage=function(image_notused,x_notused,y_notused,q_notused){return this;},createPattern=function(image_notused){return this;},updateBoundingBox=function(){var bbox=svg.getBBox();if(bbox.width>0&&bbox.height>0){svg.setAttributeNS(null,'viewBox',window.LaserCanvas.Utilities.stringFormatPrecision(2,'{0} {1} {2} {3}',bbox.x,bbox.y,bbox.width,bbox.height));}},download=function(){var url,a=document.createElement('a');document.body.appendChild(svg);updateBoundingBox();url='data:image/svg+xml;utf-8,'+svg.outerHTML;a.href=url;a.target='_blank';a.style.position='fixed';a.download='LaserCanvas.svg';a.click();svg.parentNode.removeChild(svg);},update=function(){window.LaserCanvas.Render.update(system,this,{drawMethod:'wireframe',showDistance:true});return this;};this.download=download;this.getVariables=getVariables;this.setVariablesGetter=setVariablesGetter;this.update=update;this.centerText=centerText;this.beginPath=beginPath;this.clear=clear;this.createPattern=createPattern;this.drawImage=drawImage;this.drawPath=drawPath;this.drawVector=drawVector;this.fillText=fillText;this.lineTo=lineTo;this.moveTo=moveTo;this.restore=restore;this.translate=translate;this.save=save;this.setStroke=setStroke;this.stroke=stroke;svg.setAttribute('version','1.1');svg.setAttribute('xmlns',window.LaserCanvas.RenderSvg.svgNS);svg.setAttribute('xmlns:xlink',"http://www.w3.org/1999/xlink");svg.setAttributeNS(null,'viewBox','-250 -250 500 500');svg.setAttributeNS(null,'fill','none');};window.LaserCanvas.RenderSvg.svgNS='http://www.w3.org/2000/svg';(function(LaserCanvas){"use strict";LaserCanvas.System=function(){var
melements=[],meventListeners={update:[],change:[]},mabcd={},mprop={name:'System',configuration:LaserCanvas.System.configuration.linear,wavelength:new LaserCanvas.Equation(1000),physicalLength:0,opticalLength:0,groupDelayDispersion:0,modeSpacing:0,initialWaist:new LaserCanvas.Equation(100)},mvariablesGetter=null,abcd=function(){return mabcd;},userProperties=function(){var configuration=LaserCanvas.System.configuration,props=[{propertyName:'wavelength',increment:10,min:100,max:5000}];switch(mprop.configuration){case configuration.propagation:props.push({propertyName:'initialWaist',increment:10,min:10,max:5000});break;}
props.push('physicalLength');props.push('opticalLength');switch(mprop.configuration){case configuration.linear:case configuration.endcap:props.push('modeSpacing');props.push('stability');break;case configuration.ultrafast:props.push('modeSpacing');props.push('groupDelayDispersion');props.push('stability');break;case configuration.ring:props.push('stability');break;}
return props;},canSetProperty=function(propertyName){return{"initialWaist":true,"wavelength":true}[propertyName];},set=function(propertyName,newValue){switch(propertyName){case"wavelength":case"initialWaist":mprop[propertyName].set(newValue);break;}
fireEventListeners('update');},get=function(propertyName){var variables=mvariablesGetter(),value=mprop[propertyName]&&mprop[propertyName].value&&mprop[propertyName].value(variables);switch(propertyName){case"wavelength":case"initialWaist":value=mprop[propertyName].value(variables);return Math.max(0,value);case"stability":return[(mabcd.sag.mx[0][0]+mabcd.sag.mx[1][1])/2,(mabcd.tan.mx[0][0]+mabcd.tan.mx[1][1])/2];}
return mprop[propertyName];},expression=function(propertyName){switch(propertyName){case"wavelength":case"initialWaist":return mprop[propertyName].expression();default:console.error(`expression should not be called with propertyName=${propertyName}`);return"";}},canDeleteElement=function(element){if(element.type===LaserCanvas.Element.Mirror.Type&&mprop.configuration===LaserCanvas.System.configuration.ring&&melements.reduce(function(count,elem){return count+(elem.type===LaserCanvas.Element.Mirror.Type?1:0);},0)<=3){return false;}
return true;},showElementProperty=function(propertyName){switch(propertyName){case'groupVelocityDispersion':case'groupDelayDispersion':return mprop.configuration===LaserCanvas.System.configuration.ultrafast;}
return true;},elements=function(){return melements;},element=function(index){return melements[index];},iterateElements=function(fn,args){var k,el;args=Array.prototype.slice.call(arguments,1);for(k=0;k<melements.length;k+=1){el=melements[k];if(fn.apply(el,[k,el].concat(args))===false){break;}}},elementAtLocation=function(pt,tol){var k,element;for(k=0;k<melements.length;k+=1){element=melements[k];if((element.atLocation||LaserCanvas.Element.atLocation).call(element,pt,tol)){return element;}}
return null;},segmentNearLocation=function(pt,filterBy){var k,loc,V,W,z,x,y,r2,zMax,seg=null,Vector=LaserCanvas.Math.Vector,kmax=mprop.configuration===LaserCanvas.System.configuration.ring?melements.length:melements.length-1;for(k=0;k<kmax;k+=1){if(!filterBy||melements[k].canSetProperty(filterBy)){loc=melements[k].location();zMax=melements[k].get("distanceToNext");V=new Vector([Math.cos(loc.q),Math.sin(loc.q)]);W=new Vector([pt.x-loc.x,pt.y-loc.y]);z=V.dot(W);z=z<0?0:z>zMax?zMax:z;x=loc.x+z*Math.cos(loc.q);y=loc.y+z*Math.sin(loc.q);r2=(pt.x-x)*(pt.x-x)+(pt.y-y)*(pt.y-y);if(!seg||r2<seg.r2){seg={x:x,y:y,z:z,q:loc.q,indx:k,r2:r2};}}}
return seg;},inspectSegment=function(seg,plane){var element=melements[seg.indx];return LaserCanvas.systemAbcd.propagateParameters(element.abcdQ[plane],element.get("refractiveIndex")||1,seg.z);},addEventListener=function(name,handler){var k;if(meventListeners.hasOwnProperty(name)){for(k=0;k<meventListeners[name].length;k+=1){if(meventListeners[name][k]===handler){return;}}
meventListeners[name].push(handler);}},removeEventListener=function(name,handler){var k;if(meventListeners.hasOwnProperty(name)){for(k=meventListeners[name].length-1;k>=0;k-=1){if(meventListeners[name][k]===handler){meventListeners[name].splice(k,1);}}}},fireEventListeners=function(name){var k;if(meventListeners.hasOwnProperty(name)){for(k=0;k<meventListeners[name].length;k+=1){meventListeners[name][k].call(this);}}},setVariablesGetter=function(getter){mvariablesGetter=getter;},getVariables=function(){return mvariablesGetter?mvariablesGetter():{};},alignEndElements=function(){var pivotIndex=LaserCanvas.SystemUtil.alignEndElements(mprop,melements);if(pivotIndex){calculateCartesianCoordinatesOnly(pivotIndex);}},calculateCartesianCoordinates=function(kstart_in,kend_in){calculateCartesianCoordinatesOnly(kstart_in,kend_in);alignEndElements();},calculateCartesianCoordinatesOnly=function(kstart_in,kend_in){var variables=getVariables(),k,element,d,loc,kstart=kstart_in!==undefined&&kstart_in>=0?kstart_in:0,kend=kend_in!==undefined?kend_in:melements.length-1,ax=melements[kstart].location();for(k=kstart;k<=kend;k+=1){element=melements[k];loc=element.location(k===kstart?null:ax);d=element.get("distanceToNext",variables);ax.q=loc.q;ax.x+=d*Math.cos(ax.q);ax.y+=d*Math.sin(ax.q);}},calculateAbcd=function(){mabcd=LaserCanvas.systemAbcd(melements,mprop,getVariables());},adjust=LaserCanvas.systemAdjust(melements,calculateCartesianCoordinates,getVariables),dragElementStart=function(pt,elDrag){return adjust.start.call(this,pt,elDrag);},dragElement=function(pt,ptStart,elDrag_notused){var needsUpdate=adjust.drag.call(this,pt,ptStart);if(needsUpdate){update();}},dragElementEnd=function(ptEnd,ptStart,elDrag_notused){adjust.end.call(this,ptEnd,ptStart);update();},update=function(updateCoordinates,systemChanged){if(updateCoordinates){calculateCartesianCoordinates();}
if(systemChanged){fireEventListeners('change');}
fireEventListeners('update');},onVariablesChange=function(updateCoordinates){melements.forEach(function(element){element.onVariablesChange&&element.onVariablesChange();});if(updateCoordinates||this.get("configuration")===LaserCanvas.System.configuration.ring){try{calculateCartesianCoordinates();}catch(err){}}},updateElementNames=function(){var name,localize=LaserCanvas.localize,typeCount={};LaserCanvas.Utilities.foreach(melements,function(k_notused,element){var type=element.type;typeCount[type]=(typeCount[type]||0)+1;name=localize('symbol'+type)+typeCount[type];if(typeof element.setName==='function'){element.setName(name);}else{element.name=name;}});},insertElement=function(pt,elementName){var element,seg=segmentNearLocation(pt,'insertElement'),prevElement=melements[seg.indx],Element=LaserCanvas.Element[elementName];if(Element.createGroup){Array.prototype.splice.apply(melements,[seg.indx+1,0].concat(Element.createGroup(prevElement,seg.z,mvariablesGetter)));element=melements[seg.indx+1];}else{element=new Element(mvariablesGetter);element.set("distanceToNext",prevElement.get("distanceToNext")-seg.z);prevElement.set("distanceToNext",seg.z);if(element.init){element.init(this);}
melements.splice(seg.indx+1,0,element);}
updateElementNames();calculateCartesianCoordinates();fireEventListeners('change');return element;},removeElement=function(element){var prevElement,variables=getVariables(),isRing=mprop.configuration===LaserCanvas.System.configuration.ring,k=isRing?melements.length-1:melements.length-2,n=1;for(;k>=1;k-=1){if(melements[k]===element){prevElement=melements[k-1];if(typeof element.removeGroup==='function'){n=element.removeGroup(prevElement);}else{prevElement.set("distanceToNext",prevElement.get("distanceToNext",variables)+melements[k].get("distanceToNext",variables));}
if(element.destroy){element.destroy();}
melements.splice(k,n);updateElementNames();calculateCartesianCoordinates();fireEventListeners('change');break;}}},fromJson=function(json){LaserCanvas.SystemUtil.fromJson(json,mprop,melements,this,mvariablesGetter);updateElementNames();calculateCartesianCoordinates();fireEventListeners("change");fireEventListeners("update");},toJson=function(){return LaserCanvas.SystemUtil.toJson(mprop,melements);},createNew=function(configuration,elementsInfo,loc){var SystemUtil=LaserCanvas.SystemUtil;SystemUtil.createNew(configuration,elementsInfo,loc,mprop,melements,mvariablesGetter);updateElementNames();calculateCartesianCoordinates();fireEventListeners('change');fireEventListeners('update');},fromTextFile=function(src,variablesSetter){var json=LaserCanvas.SystemUtil.textFileToJson(src);variablesSetter(json.variables);LaserCanvas.SystemUtil.fromJson(json,mprop,melements,this,mvariablesGetter);variablesSetter(json.variables);updateElementNames();calculateCartesianCoordinates();fireEventListeners('change');fireEventListeners('update');};return{abcd:abcd,addEventListener:addEventListener,showElementProperty:showElementProperty,calculateAbcd:calculateAbcd,canSetProperty:canSetProperty,canDeleteElement:canDeleteElement,createNew:createNew,dragElement:dragElement,dragElementEnd:dragElementEnd,dragElementStart:dragElementStart,elementAtLocation:elementAtLocation,element:element,elements:elements,expression:expression,fromJson:fromJson,fromTextFile:fromTextFile,get:get,insertElement:insertElement,inspectSegment:inspectSegment,iterateElements:iterateElements,onVariablesChange:onVariablesChange,removeElement:removeElement,removeEventListener:removeEventListener,segmentNearLocation:segmentNearLocation,set:set,setVariablesGetter:setVariablesGetter,toJson:toJson,type:"System",update:update,userProperties:userProperties};};LaserCanvas.System.configuration={ultrafast:'ultrafast',endcap:'endcap',linear:'linear',propagation:'propagation',ring:'ring'};}(window.LaserCanvas));(function(LaserCanvas){LaserCanvas.systemAbcd=function(melements,systemProperties,variables){var
Matrix2x2=LaserCanvas.Math.Matrix2x2,wavelength=systemProperties.wavelength.value(variables),initialWaist=systemProperties.initialWaist.value(variables),elementAbcd=function(indx,dir,plane){return melements[indx].elementAbcd(dir,plane);},spaceAbcd=function(indx,dir,plane,len){var L,n,gdd,element=melements[indx];L=element.get("distanceToNext",variables);n=element.spaceRefractiveIndex?element.spaceRefractiveIndex():element.get("refractiveIndex")||1;gdd=element.groupDelayDispersion?element.groupDelayDispersion(wavelength,L):0;if(len){len.physicalLength+=L;len.opticalLength+=n*L;len.groupDelayDispersion+=gdd;}
return new Matrix2x2(1,L/n,0,1);},applyMatrix=function(Q,mx){var
A=mx[0][0],B=mx[0][1],C=mx[1][0],D=mx[1][1],R=Q.R,V=Q.V,ARB=A+R*B,CRD=C+R*D,VB=V*B,VD=V*D,S=1/(ARB*ARB+VB*VB);return{R:S*(CRD*ARB+VB*VD),V:S*(ARB*VD-CRD*VB),stability:Q.stability};},initialQ=function(mx){var A,B,C,D,det,tr=mx.trace();if(Math.abs(tr)>2){return{stable:false,stability:tr/2};}
A=mx[0][0];B=mx[0][1];C=mx[1][0];D=mx[1][1];det=4-(A+D)*(A+D);return{R:(D-A)/(2*B),V:Math.sqrt(det)/(2*Math.abs(B)),stable:true,stability:tr/2}},parametersFromQ=function(Q,lam){var r,rv2,vr2,w0,z0,zR,w=Math.sqrt(lam/(Math.PI*Q.V));if(Q.R===0){r=Infinity;w0=w;z0=0;zR=Math.PI*w0*w0/lam;}else{r=1/Q.R;rv2=(r*Q.V)*(r*Q.V);vr2=1/rv2;w0=w/Math.sqrt(1+vr2);z0=-r/(1+rv2);zR=Math.PI*w0*w0/lam;}
return{w:w,r:r,w0:w0,z0:z0,zR:zR};};var modePlane=LaserCanvas.Enum.modePlane,abcd={sag:null,tan:null},setElementAbcdQ=function(element,abcdQ,plane){element.abcdQ[plane]=abcdQ;if(element.updateAbcdQ){element.updateAbcdQ(abcdQ,plane);}},calculatePlane=function(plane,lam,len){var Q,dir,indx,w0,configuration=LaserCanvas.System.configuration,mx=Matrix2x2.eye();if(systemProperties.configuration===configuration.propagation){w0=initialWaist;Q={R:0,V:lam/(Math.PI*w0*w0),stable:true};if(len){for(indx=0;indx<melements.length;indx+=1){mx=elementAbcd(indx,dir,plane).multiply(mx);mx=spaceAbcd(indx,+1,plane,len).multiply(mx);}}}else{dir=+1;for(indx=0;indx<melements.length;indx+=1){if(indx>0){mx=elementAbcd(indx,dir,plane).multiply(mx);}
if(indx<melements.length-1){mx=spaceAbcd(indx,dir,plane,len).multiply(mx);}}
switch(systemProperties.configuration){case configuration.ring:mx=spaceAbcd(indx-1,dir,plane,len).multiply(mx);mx=elementAbcd(0,dir,plane).multiply(mx);break;default:dir=-1;for(indx-=2;indx>=0;indx-=1){mx=spaceAbcd(indx,dir,plane).multiply(mx);mx=elementAbcd(indx,dir,plane).multiply(mx);}}
Q=initialQ(mx);}
if(!Q.stable){for(indx=0;indx<melements.length;indx+=1){setElementAbcdQ(melements[indx],false,plane);}}else{dir=+1;for(indx=0;indx<melements.length;indx+=1){if(indx>0){Q=applyMatrix(Q,elementAbcd(indx,dir,plane));}
setElementAbcdQ(melements[indx],parametersFromQ(Q,lam),plane);Q=applyMatrix(Q,spaceAbcd(indx,dir,plane));}}
return{mx:mx,Q:Q};};systemProperties.physicalLength=systemProperties.opticalLength=systemProperties.groupDelayDispersion=0;abcd.sag=calculatePlane(modePlane.sagittal,wavelength,systemProperties);abcd.tan=calculatePlane(modePlane.tangential,wavelength);systemProperties.modeSpacing=299792.458/(2*systemProperties.opticalLength);return abcd;};LaserCanvas.systemAbcd.propagateParameters=function(params,n,d){var w0=params.w0,zR=n*params.zR,z0=n*params.z0,z=(d-z0)/zR;return{w:w0*Math.sqrt(1+z*z)};};}(window.LaserCanvas));(function(LaserCanvas){LaserCanvas.systemAdjust=function(melements,calculateCartesianCoordinates,getVariables){var
eps=1e-12,mdragData={},elementIndex=function(el){var k;for(k=0;k<melements.length;k+=1){if(melements[k]===el){return k;}}
return-1;},getDragElements=function(ptStart,elDrag){var
indxDrag=elementIndex(elDrag),dragLoc=elDrag.location(),dx=dragLoc.x-ptStart.x,dy=dragLoc.y-ptStart.y,getData=function(k,element){return{element:element,loc:LaserCanvas.Utilities.extend({},element.location(),{l:element.get("distanceToNext",getVariables())}),index:k,canPivot:element.canSetProperty('outgoingAngle')
};},getConstruct=function(pivot,stretch,dir){var cc,Bnorm,Bcoscc,Bsincc,BQ,CB,Vector=LaserCanvas.Math.Vector,C=new Vector(ptStart.x-pivot.loc.x,ptStart.y-pivot.loc.y).scale(-dir),A=new Vector(Math.cos(stretch.loc.q),Math.sin(stretch.loc.q)).scale(stretch.loc.l),B=C.subtract(A),Q=new Vector(Math.cos(pivot.loc.q),Math.sin(pivot.loc.q));if(B.norm()>eps){cc=Math.PI-Math.acos(A.normalizeDot(B));BQ=Math.asin(B.normalize().cross(Q));CB=C.cross(B);}else{B=new Vector(0,0);cc=Math.PI;BQ=0;CB=0;}
Bnorm=B.norm();Bcoscc=Bnorm*Math.cos(cc);Bsincc=Bnorm*Math.sin(cc);return{a:A.norm(),b:B.norm(),c:C.norm(),cc:cc,sincc:Math.sin(cc),Bsincc:Bsincc,Bcoscc:Bcoscc,B2sin2cc:Bsincc*Bsincc,BQ:BQ,CB:CB,A:A,B:B,C:C};},findPivotStretch=function(k,dir){var element,data={pivot:null,stretch:null,construct:null};for(;k>=0&&k<melements.length&&(!data.pivot||!data.stretch);k+=dir){element=melements[k];if(!data.pivot&&element.canSetProperty('outgoingAngle')&&(dir<0||k>indxDrag)){data.pivot=getData(k,element);}
if(!data.stretch&&element.canSetProperty('distanceToNext',elDrag)){data.stretch=getData(k,element);}}
if(data.pivot&&data.stretch){data.construct=getConstruct(data.pivot,data.stretch,dir);}
return data;};ptStart.x+=dx;ptStart.y+=dy;var dragData={prev:findPivotStretch(indxDrag-1,-1),next:findPivotStretch(indxDrag,+1),drag:getData(indxDrag,elDrag),offset:{dx:dx,dy:dy}};dragData.stretchOnly=(dragData.prev.construct&&dragData.prev.construct.A.dot(dragData.prev.construct.B)<0)||(dragData.next.construct&&dragData.next.construct.A.dot(dragData.next.construct.B)<0);return dragData;},dragElementStart=function(pt,elDrag){mdragData=getDragElements(pt,elDrag);return!!mdragData;},msnapshot=[],takeSnapshot=function(){var extend=LaserCanvas.Utilities.extend;msnapshot=[["prev","stretch"],["prev","pivot"],["next","stretch"],["next","pivot"],].map(function(relType){var rel=relType[0],type=relType[1],element=mdragData[rel]?.[type]?.element;return element&&{element:element,loc:extend({},element.loc),dist:type==="stretch"?element.get("distanceToNext"):undefined,aoi:type==="pivot"?element.get("angleOfIncidence"):undefined};}).filter(function(snapshot){return!!snapshot});},applySnapshot=function(apply){var extend=LaserCanvas.Utilities.extend;msnapshot.forEach(function(snapshot){var element=snapshot.element;extend(element.loc,snapshot.loc);if(snapshot.dist!==undefined){element.set("distanceToNext",snapshot.dist);}
if(snapshot.aoi!==undefined){element.set("angleOfIncidence",snapshot.aoi);}});},dragElement=function(pt,ptStart,elDrag_notused){pt.x+=mdragData.offset.dx;pt.y+=mdragData.offset.dy;try{takeSnapshot();return mdragData.stretchOnly?dragElementStretch(pt,ptStart,elDrag_notused):dragElementPivot(pt,ptStart,elDrag_notused);}catch(err){applySnapshot();calculateCartesianCoordinates();return false;}},dragElementStretch=function(pt,ptStart,elDrag_notused){var a,S,P,ptEnd,Vector=LaserCanvas.Math.Vector,prev=mdragData.prev,next=mdragData.next;if(!prev.construct){S=new Vector(next.stretch.loc.l,0).rotate(-next.stretch.loc.q);ptEnd={x:next.stretch.loc.x+S[0],y:next.stretch.loc.y+S[1]};P=new Vector(ptEnd.x-pt.x,ptEnd.y-pt.y);S=S.normalize();a=S.dot(P);S=S.scale(a);if(a>0){next.stretch.element.set("distanceToNext",a);next.stretch.element.loc.x=ptEnd.x-S[0];next.stretch.element.loc.y=ptEnd.y-S[1];calculateCartesianCoordinates(mdragData.drag.index);return true;}}else{S=new Vector(1,0).rotate(-prev.stretch.loc.q)
a=new Vector(pt.x-prev.stretch.loc.x,pt.y-prev.stretch.loc.y).dot(S);if(a>0){prev.stretch.element.set("distanceToNext",a);if(next.construct){next.stretch.element.set("distanceToNext",prev.stretch.loc.l+next.stretch.loc.l-a);}
calculateCartesianCoordinates(prev.index);return true;}}
return false;},dragElementPivot=function(pt,ptStart,elDrag_notused){var
Vector=LaserCanvas.Math.Vector,extend=LaserCanvas.Utilities.extend,dragPermitted=true,locPrev={},distPrev=null,prevPivotOutgoingAngle=mdragData.prev.pivot?mdragData.prev.pivot.element.get("outgoingAngle"):null,calculate=function(data,dir){var loc,a,qc,aa,q,cc=data.construct.cc,b=data.construct.b,Bcoscc=data.construct.Bcoscc,B2sin2cc=data.construct.B2sin2cc,C=new Vector(pt.x-data.pivot.loc.x,pt.y-data.pivot.loc.y).scale(-dir),c=C.norm(),det=C.norm2()-B2sin2cc;data.construct.c=c;if(det>=0&&c>b){a=Bcoscc+(cc>=0.5*Math.PI?+1:-1)*Math.sqrt(det);a=Math.abs(a);if(a>0){data.stretch.element.set("distanceToNext",a);if(mdragData.drag.canPivot){qc=Math.atan2(C[1],C[0]);aa=Math.asin(data.construct.sincc*a/(C.norm()||1));q=qc+data.construct.BQ+
(data.construct.CB<0?-1:data.construct.CB===0?0:+1)*aa;if(dir===-1){data.pivot.element.set("outgoingAngle",q,data.pivot.index===0);}else if(!mdragData.prev.construct){mdragData.drag.element.location({x:pt.x,y:pt.y,q:0});mdragData.drag.element.set("outgoingAngle",0,true);calculateCartesianCoordinates(0,mdragData.next.pivot.index);loc=mdragData.next.pivot.element.location();mdragData.drag.element.set("outgoingAngle",C.atan2()-new Vector(loc.x-pt.x,loc.y-pt.y).atan2(),true);calculateCartesianCoordinates(0,mdragData.next.pivot.index);mdragData.next.pivot.element.set("outgoingAngle",mdragData.next.pivot.loc.q);calculateCartesianCoordinates(mdragData.drag.index);}}
return true;}}
return false;},calculatePivotDrag=function(){var q,pivotLoc,dragLoc,V,W;if(calculate(mdragData.next,+1)){calculateCartesianCoordinates(0,mdragData.next.pivot.index);dragLoc=mdragData.drag.element.location();pivotLoc=mdragData.next.pivot.element.location();V=new Vector(pivotLoc.x-dragLoc.x,pivotLoc.y-dragLoc.y).normalize();W=new Vector(mdragData.next.pivot.loc.x-dragLoc.x,mdragData.next.pivot.loc.y-dragLoc.y).normalize();q=Math.asin(V.cross(W));mdragData.drag.element.set("outgoingAngle",dragLoc.q+q);calculateCartesianCoordinates(mdragData.prev.pivot.index,mdragData.next.pivot.index);mdragData.next.pivot.element.set("outgoingAngle",mdragData.next.pivot.loc.q);calculateCartesianCoordinates(mdragData.drag.index);return true;}else{mdragData.prev.pivot.element.set("outgoingAngle",prevPivotOutgoingAngle);return false;}},calculateFixedDrag=function(){var a=mdragData.next.stretch.loc.l
+mdragData.prev.stretch.loc.l
-mdragData.prev.stretch.element.get("distanceToNext",getVariables());if(a>0){mdragData.next.stretch.element.set("distanceToNext",a);calculateCartesianCoordinates();return true;}
return false;};if(mdragData.prev.stretch){locPrev=extend(locPrev,mdragData.prev.stretch.element.loc);distPrev=mdragData.prev.stretch.element.get("distanceToNext",getVariables());}
if(!mdragData.prev.construct){dragPermitted=calculate(mdragData.next,+1);}else if(!mdragData.next.construct){dragPermitted=calculate(mdragData.prev,-1);if(dragPermitted){calculateCartesianCoordinates(mdragData.prev.pivot.index-1);}
}else{dragPermitted=calculate(mdragData.prev,-1);if(dragPermitted){dragPermitted=mdragData.drag.canPivot
?calculatePivotDrag()
:calculateFixedDrag();}}
if(LaserCanvas.__render){if(__dragElementTmr){clearTimeout(__dragElementTmr);}
__dragElementTmr=setTimeout(function(){__dragElementTmr=null;__dragElementConstruction(pt,ptStart,mdragData);},0);}
if(!dragPermitted&&mdragData.prev.stretch){extend(mdragData.prev.stretch.element.loc,locPrev);mdragData.prev.stretch.element.set("distanceToNext",distPrev);}
return dragPermitted;},dragElementEnd=function(ptEnd_notused,ptStart_notused,elDrag_notused){mdragData={};},__dragElementTmr=null,__dragElementConstruction=function(pt,ptStart_notused,dragData){"use strict";var render=LaserCanvas.__render,x,y,showConstruction=function(data,rgb,dir){if(!data.pivot||!data.stretch||!data.construct){return;}
var
stretchLoc=data.stretch.element.location(),pivotLoc=data.pivot.element.location(),A=data.construct.A,B=data.construct.B,b=data.construct.b,c=data.construct.c;x=pivotLoc.x;y=pivotLoc.y;render.drawPath("M -32 0 L 32 0 M 0 -32 L 0 32",x,y).setStroke(rgb,1).stroke();x=stretchLoc.x;y=stretchLoc.y;render.drawPath("M -12 0 L 12 0 M 0 -12 L 0 12",x,y).moveTo(x,y).lineTo(x+A[0],y+A[1]).setStroke(rgb,2).stroke();x=pivotLoc.x;y=pivotLoc.y;render.drawPath("M -8 0 L 8 0 M 0 -8 L 0 8",x,y).moveTo(x+B.norm(),y).arc(x,y,b,0,2*Math.PI).setStroke(rgb,3).stroke();render.beginPath().arc(x,y,c,0,2*Math.PI).setStroke(rgb,0.5).stroke();};render.save();showConstruction(dragData.prev,'#00c',-1);showConstruction(dragData.next,'#a00',+1);render.restore();};return{start:dragElementStart,drag:dragElement,end:dragElementEnd};};}(window.LaserCanvas));(function(LaserCanvas){var localStorageKey="laserCanvasSystem",toLocalStorage=function(json){if(window.localStorage){window.localStorage.setItem(localStorageKey,JSON.stringify(json));}},fromLocalStorage=function(callback){callback(JSON.parse(window.localStorage.getItem(localStorageKey)));},toJson=function(mprop,melements){var json={prop:LaserCanvas.Utilities.extend({},mprop),elements:melements.map(function(element){return element.toJson();})};return json;},newElement=function(type,variablesGetter){return type===LaserCanvas.Element.Mirror.Type?new LaserCanvas.Element.Mirror(variablesGetter):type===LaserCanvas.Element.Lens.Type?new LaserCanvas.Element.Lens(variablesGetter):type===LaserCanvas.Element.Screen.Type?new LaserCanvas.Element.Screen(variablesGetter):type===LaserCanvas.Element.Dispersion.Type?new LaserCanvas.Element.Dispersion(variablesGetter):type===LaserCanvas.Element.Dielectric.Type?new LaserCanvas.Element.Dielectric(variablesGetter):undefined;},fromJson=function(json,mprop,melements,system,variablesGetter){var n,isRing;LaserCanvas.Utilities.extend(mprop,json.prop);mprop.wavelength=new LaserCanvas.Equation(mprop.wavelength);mprop.initialWaist=new LaserCanvas.Equation(mprop.initialWaist);LaserCanvas.SystemUtil.resetElements(melements);n=json.elements.length;isRing=mprop.configuration===LaserCanvas.System.configuration.ring;json.elements.forEach(function(elementJson,index,all){var element=newElement(elementJson.type,variablesGetter);element.fromJson(elementJson);if(element.init&&!system){console.warn("SystemJson.fromJson has no reference to system for element",element);}
if(index===0){element.set("startOptic",true);}else if(index===n-1&&!isRing){element.set("endOptic",true);}
element.init&&element.init(system);melements.push(element);});LaserCanvas.Element.collectGroups(melements);};LaserCanvas.SystemUtil=LaserCanvas.SystemUtil||{};LaserCanvas.SystemUtil.toLocalStorage=toLocalStorage;LaserCanvas.SystemUtil.fromLocalStorage=fromLocalStorage;LaserCanvas.SystemUtil.toJson=toJson;LaserCanvas.SystemUtil.fromJson=fromJson;}(window.LaserCanvas));(function(LaserCanvas){var
FLIP=-1,getVariables=function(root){var get=function(name){var value=root["Variable("+name+")"]||"0",range=(root["Range("+name+")"]||"0,1").split(",");return{value:+value,min:+range[0],max:+range[1]};};return{x:get("x"),y:get("y"),z:get("z")};},toNumber=function(expression,variables){if(typeof expression==="number"){return expression;}
var expr=expression.replace(/(x|y|z)/g,function(m,name){return"("+variables[name].value+")";}).replace(/(\W)(sin|cos)(\W)/g,"$1Math.$2$3");value=eval(expr);return value;},toExpression=function(expression,variables,scl){var val,expr=expression.replace(/(z)/g,function(m,name){return`(${variables[name].value})`;});val=+expr;if(!isNaN(val)){if(scl&&scl!==1){val*=scl;}
return val;}
if(scl&&scl!==1){expr=`${scl}*(${expr})`;}
return expr;},addExpressions=function(initial,added,variables){var addedExpr=toExpression(added,variables);if(typeof initial==="number"&&typeof addedExpr==="number"){return initial+addedExpr;}
return`${initial} + ${addedExpr}`;},toBlockType=function(type){switch(type){case"CrystalInput":case"CrystalOutput":return LaserCanvas.Element.Dielectric.eType.Crystal;case"BrewsterInput":case"BrewsterOutput":return LaserCanvas.Element.Dielectric.eType.Brewster;case"PlateInput":case"PlateOutput":return LaserCanvas.Element.Dielectric.eType.Plate;}},toDielectricType=function(type){switch(type){case"CrystalInput":case"CrystalOutput":return LaserCanvas.Element.Dielectric.eType.Crystal;case"BrewsterInput":case"BrewsterOutput":return LaserCanvas.Element.Dielectric.eType.Brewster;case"PlateInput":case"PlateOutput":return LaserCanvas.Element.Dielectric.eType.Plate;}},findElement=function(elements,name){return elements.find(function(element){return element.name===name});},textElementsToJson=function(elements,variables){if(!["Mirror","Source"].includes(elements[0].type)){throw"First element must be a mirror or source.";}
var jsonElements=[];for(var index=0;index<elements.length;index+=1){var src=elements[index];var linkedElement;var elementJson={name:src.name,loc:{},prop:{}};switch(src.type){case"Mirror":elementJson.type=LaserCanvas.Element.Mirror.Type;elementJson.prop={radiusOfCurvature:toExpression(src.ROC,variables),angleOfIncidence:toExpression(src.FaceAngle,variables,FLIP)};break;case"ThinLens":elementJson.type=LaserCanvas.Element.Lens.Type;elementJson.prop={focalLength:toExpression(src.FL,variables)};break;case"Screen":if(src.LinkedTo){console.warn("Screen inside block not supported.");continue;}
elementJson.type=LaserCanvas.Element.Screen.Type;break;case"Source":elementJson.type=LaserCanvas.Element.Screen.Type;break;case"BrewsterInput":case"CrystalInput":case"PlateInput":linkedElement=findElement(elements,src.LinkedTo);if(!linkedElement){throw"Unable to find linked output element "+src.LinkedTo+".";}
elementJson.type=LaserCanvas.Element.Dielectric.Type;elementJson.prop={type:toDielectricType(src.type),refractiveIndex:toExpression(src.RefractiveIndex,variables),flip:src.Flipped||false,curvatureFace1:toExpression(src.ROC,variables),curvatureFace2:toExpression(linkedElement.ROC,variables),thickness:toExpression(src.Thickness,variables)};if(src.type==="CrystalInput"){elementJson.prop.faceAngle=toExpression(src.FaceAngle,variables);}else if(src.type==="PlateInput"){elementJson.prop.angleOfIncidence=toExpression(src.FaceAngle,variables);}
if(elements[index+1].type==="ThermalLens"){elementJson.prop.thermalLens=toExpression(elements[index+1].FL,variables);}
break;case"ThermalLens":continue;case"BrewsterOutput":case"CrystalOutput":case"PlateOutput":jsonElements.push({type:LaserCanvas.Element.Lens.Type,prop:{}});linkedElement=findElement(elements,src.LinkedTo);if(!linkedElement){throw"Unable to find linked input element "+src.LinkedTo+".";}
elementJson.type=LaserCanvas.Element.Dielectric.Type;elementJson.prop={type:toDielectricType(src.type),};if(src.type==="CrystalOutput"){elementJson.prop.faceAngle=toExpression(linkedElement.FaceAngle,variables);}else if(src.type==="PlateOutput"){elementJson.prop.angleOfIncidence=toExpression(linkedElement.FaceAngle,variables);}
break;case"PrismA":elementJson.type=LaserCanvas.Element.Dispersion.Type;elementJson.prop={type:LaserCanvas.Element.Dispersion.eType.Prism,refractiveIndex:toExpression(src.RefractiveIndex,variables)};break;case"PrismB":elementJson.type=LaserCanvas.Element.Dispersion.Type;elementJson.prop={type:LaserCanvas.Element.Dispersion.eType.Prism};break;case"Flat":default:if(src.DistanceToNext){jsonElements[jsonElements.length-1].prop.distanceToNext=addExpressions(jsonElements[jsonElements.length-1].prop.distanceToNext,src.DistanceToNext,variables);}
continue;}
elementJson.prop.distanceToNext=src.DistanceToNext!==undefined?toExpression(src.DistanceToNext,variables):0;jsonElements.push(elementJson);}
if(jsonElements.length<2){throw"Need at least two elements in the cavity.";}
jsonElements[0].prop.startOptic=true;jsonElements[jsonElements.length-1].prop.endOptic=true;return jsonElements;},reSystemName=/^\[([^\]]+)\]$/m,reSystemType=/^(Resonator|Propagation)$/m,reIgnore=/^\s*(?:Selected|Astigmatic|)\s*$/m,rePropertyDeclaration=/^\s*([A-Za-z][^\s]*)\s*=\s*(.*)$/m,reBooleanProperty=/^(Flipped)$/m,reElementDeclaration=/^(Mirror|ThinLens|Screen|BrewsterInput|BrewsterOutput|CrystalInput|CrystalOutput|PlateInput|PlateOutput|ThermalLens|PrismA|PrismB|Flat|Source)\s*@\s*([^\s]+)\s*{$/m,reRendererDeclaration=/^Renderer\s+(1d|2d|3d|Inventory|Solver|SystemGraph|VertexGraph)\s*\{$/m,parseTextFile=function(text){var match,lines=text.replace(/\n\r/g,"\n").replace(/\r\n/g,"\n").split("\n"),firstLines=lines.splice(0,2),root={elements:[],renderers:[]},curr=root,stack=[curr];match=reSystemName.exec(firstLines[0]);if(!match){throw"Wrong file format. Expected [SystemName] in first row.";}
curr.name=match[1];match=reSystemType.exec(firstLines[1]);if(!match){throw"Unable to process system type "+firstLines[1];}
curr.type=match[1];for(var line of lines){if(reIgnore.test(line)){continue;}else if(reSystemName.test(line)){throw"Only one system can be imported at once.";}else if(!!(match=rePropertyDeclaration.exec(line))){var prop=match[1],expr=match[2];curr[prop]=expr;}else if(!!(match=reBooleanProperty.exec(line))){curr[match[1]]=true;}else if(!!(match=reElementDeclaration.exec(line))){curr={type:match[1],name:match[2]};root.elements.push(curr);stack.push(curr);}else if(!!(match=reRendererDeclaration.exec(line))){curr={type:match[1],};root.renderers.push(curr);stack.push(curr);}else if(line==="}"){if(stack.length<=1){throw"Bad file format, too many closing -}-";}
curr=stack.pop();}else{throw"Unknown line "+line;}}
return root;},textFileToJson=function(text){var root=parseTextFile(text),variables=getVariables(root),json={variables:variables,prop:{configuration:root.type==="Resonator"?LaserCanvas.System.configuration.linear:root.type==="Propagation"?LaserCanvas.System.configuration.propagation:LaserCanvas.System.configuration.linear,name:root.name,wavelength:toExpression(root.Wavelength,variables),},elements:textElementsToJson(root.elements,variables)};LaserCanvas.Utilities.extend(json.elements[0].loc,{x:toNumber(root.StartX,variables),y:FLIP*toNumber(root.StartY,variables),q:FLIP*toNumber(root.Rotation,variables)*Math.PI/180,});return json;},attachLoadListener=function(input,callback){var
refreshInput=function(oldInput){var newInput=document.createElement("input"),parent=oldInput.parentElement;newInput.type=oldInput.type;newInput.className=oldInput.className;newInput.addEventListener("change",change);parent.insertBefore(newInput,oldInput);parent.removeChild(oldInput);},loadText=function(text){var json=null;try{json=JSON.parse(text);}catch(e){}
json=json||LaserCanvas.SystemUtil.textFileToJson(text);callback(json);},onload=function(){var text=this.result;loadText(text);},change=function(){var file=this.files[0],reader=new FileReader();if(file&&(file.type===""||file.type==="text/plain"||file.type==="application/json")){reader.onload=onload;text=reader.readAsText(file);}
refreshInput(this);};input.addEventListener("change",change);};LaserCanvas.SystemUtil=LaserCanvas.SystemUtil||{};LaserCanvas.SystemUtil.textFileToJson=textFileToJson;LaserCanvas.SystemUtil.attachLoadListener=attachLoadListener;}(window.LaserCanvas));(function(LaserCanvas){var CURRENT_VERSION=1,migrations=[function fromVersion0(json){if(!json.version&&!json.hasOwnProperty("system")&&json.hasOwnProperty("prop")&&json.hasOwnProperty("elements")){json.system={prop:json.prop,elements:json.elements};json.version=1;delete json.prop;delete json.elements;}
return json;}],migrateJson=function(json){for(var migration of migrations){json=migration(json);}
return json;};LaserCanvas.SystemUtil=LaserCanvas.SystemUtil||{};LaserCanvas.SystemUtil.migrateJson=migrateJson;LaserCanvas.SystemUtil.CURRENT_VERSION=CURRENT_VERSION;}(window.LaserCanvas));(function(LaserCanvas){var createNew=function(configuration,elementsInfo,loc,mprop,melements,mvariablesGetter){var System=LaserCanvas.System,json=LaserCanvas.SystemUtil.migrateJson(systemDefaults()[configuration||System.configuration.linear]);mprop.configuration=configuration;mprop.name=LaserCanvas.localize(configuration===System.configuration.linear?"Linear resonator":configuration===System.configuration.endcap?"End coated resonator":configuration===System.configuration.ring?"Ring resonator":configuration===System.configuration.propagation?"Propagation":configuration===System.configuration.ultrafast?"Ultrafast resonator":"System");LaserCanvas.SystemUtil.fromJson(json.system,mprop,melements,this,mvariablesGetter);};var resetElements=function(melements){var element;while(element=melements.pop()){if(element.destroy){element.destroy();}}};var systemDefaults=(function(){var _systemDefaults=null;if(!_systemDefaults){_systemDefaults={};_systemDefaults[LaserCanvas.System.configuration.linear]={prop:{name:"Linear resonator",configuration:"linear",wavelength:1000,},elements:[{type:"Mirror",name:"M1",loc:{x:-125,y:0},prop:{distanceToNext:250,radiusOfCurvature:200,angleOfIncidence:0}},{type:"Mirror",name:"M2",prop:{radiusOfCurvature:200,angleOfIncidence:0}}]};_systemDefaults[LaserCanvas.System.configuration.endcap]={prop:{name:"End coated resonator",configuration:"endcap",wavelength:1000,},elements:[{type:"Dielectric",name:"D1",loc:{x:-125,},prop:{type:"Endcap",refractiveIndex:1.5,curvatureFace1:-200,curvatureFace2:0,thermalLens:0,thickness:50,angleOfIncidence:0},priv:{}},{type:"Lens",name:"L1",prop:{focalLength:0}},{type:"Dielectric",name:"D2",loc:{},prop:{distanceToNext:200},priv:{}},{type:"Mirror",name:"M1",prop:{radiusOfCurvature:200,}}]};_systemDefaults[LaserCanvas.System.configuration.propagation]={prop:{name:"Propagation",configuration:"propagation",wavelength:1000,initialWaist:100},elements:[{type:"Screen",name:"I1",loc:{x:-125},prop:{distanceToNext:250}},{type:"Screen",name:"I2",prop:{}}]};_systemDefaults[LaserCanvas.System.configuration.ring]={prop:{name:"Ring resonator",configuration:"ring",wavelength:1000,},elements:[{type:"Mirror",name:"M1",loc:{x:-125,y:80,q:0},prop:{radiusOfCurvature:0,distanceToNext:250}},{type:"Mirror",name:"M2",loc:{},prop:{distanceToNext:250,radiusOfCurvature:0,angleOfIncidence:-30}},{type:"Mirror",name:"M3",loc:{},prop:{radiusOfCurvature:500,angleOfIncidence:-30}}]};_systemDefaults[LaserCanvas.System.configuration.ultrafast]={prop:{name:"Ultrafast resonator",configuration:"ultrafast",wavelength:800,},elements:[{type:"Mirror",name:"M1",loc:{x:-150,y:0,p:3.441592653589793,q:0.3},prop:{distanceToNext:300,radiusOfCurvature:0,angleOfIncidence:0}},{type:"Mirror",name:"M2",loc:{},prop:{distanceToNext:105,radiusOfCurvature:200,angleOfIncidence:9}},{type:"Dielectric",name:"D1",loc:{},prop:{type:"Crystal",refractiveIndex:1.76,groupVelocityDispersion:0.064,angleOfIncidence:60,faceAngle:29.62,thickness:2,curvatureFace1:0,curvatureFace2:0,thermalLens:0},priv:{}},{type:"Lens",name:"L1",loc:{},prop:{focalLength:0}},{type:"Dielectric",name:"D2",loc:{},prop:{distanceToNext:105},priv:{}},{type:"Mirror",name:"M3",loc:{},prop:{distanceToNext:170,radiusOfCurvature:200,angleOfIncidence:9}},{type:"Dispersion",name:"DC1",loc:{},prop:{type:"Prism",distanceToNext:217,prismInsertion:0,refractiveIndex:1.5,indexDispersion:0,groupVelocityDispersion:0},priv:{apexAngle:1.176005207095135,deflectionAngle:-0.7895822393995233,}},{type:"Dispersion",name:"DC2",loc:{},prop:{distanceToNext:40},priv:{}},{type:"Mirror",name:"M4",loc:{},prop:{radiusOfCurvature:0,}}]};}
return _systemDefaults;})
LaserCanvas.SystemUtil=LaserCanvas.SystemUtil||{};LaserCanvas.SystemUtil.createNew=createNew;LaserCanvas.SystemUtil.resetElements=resetElements;}(window.LaserCanvas));(function(LaserCanvas){var eps=1e-12,alignEndElementsLinear=function(melements){var el=melements[0],le=melements[melements.length-1];el.loc.p=el.loc.q+Math.PI;le.set("distanceToNext",0);le.set("deflectionAngle",Math.PI);},alignEndElementsRing=function(melements){var Vector=LaserCanvas.Math.Vector,pivot,pivotIndex,stretches=[],stretch,k,el,A,B,C,C0,U,V,W,Z,q,dx,dy,aa,bb,cc,l2,l,first=melements[0];for(k=melements.length-1;k>0;k-=1){el=melements[k];if(el.canSetProperty("distanceToNext")){stretches.push(el);}
if(el.canSetProperty("outgoingAngle")){pivot=el;pivotIndex=k;break;}}
do{stretch=stretches[0];const NEW_METHOD=false;if(NEW_METHOD){B=new Vector(0,0);dx=dy=0;for(k=pivotIndex;k<melements.length;k+=1){el=melements[k];if(el!==stretch){l=el.get("distanceToNext");B=B.add(new Vector(l,0).rotate(-el.loc.q));dx+=l*Math.cos(el.loc.q);dy+=l*Math.sin(el.loc.q);}}}else{dx=dy=0;for(k=pivotIndex+1;k<melements.length;k+=1){el=melements[k];le=melements[k-1];if(le!==stretch){l=el.get("distanceToNext");dx+=el.loc.x-le.loc.x;dy+=el.loc.y-le.loc.y;}}}
A=new Vector(1,0).rotate(-stretch.loc.q);B=new Vector(dx,dy);C=new Vector(first.loc.x-pivot.loc.x,first.loc.y-pivot.loc.y);C0=C;U=new Vector(1,0).rotate(-first.loc.q);V=new Vector(1,0).rotate(-pivot.loc.p);if(B.norm()<eps){l=C.norm();Z=C;W=C;}else{cc=Math.PI-Math.acos(A.normalizeDot(B));bb=Math.asin((Math.sin(cc)*B.norm())/C.norm());aa=Math.PI-bb-cc;if(isNaN(aa)){throw new Error("Ring close error calculating construction angle aa");}
l2=B.norm2()+C.norm2()-2*B.norm()*C.norm()*Math.cos(aa);if(l2<0){throw new Error("Ring stretch error l2 < 0: "+l2);}
l=l2<0?0:Math.sqrt(l2);A=A.normalize().scale(l);if(Math.abs(A.add(B).norm()-C.norm())>eps){throw new Error("Ring not closed with stretch segment.");}
q=-Math.asin(A.add(B).normalizeCross(C));W=A.rotate(q);Z=new Vector(1,0).rotate(-pivot.loc.q).rotate(q);}
first.loc.p=W.atan2();first.set("deflectionAngle",Math.atan2(W.cross(U),W.dot(U)));pivot.set("deflectionAngle",Math.atan2(V.cross(Z),V.dot(Z)));pivot.loc.q=Z.atan2();stretch.set("distanceToNext",l);}while(false);return pivotIndex;},alignEndElements=function(mprop,melements){if(mprop.configuration===LaserCanvas.System.configuration.ring){return alignEndElementsRing(melements);}else{alignEndElementsLinear(melements);}};LaserCanvas.SystemUtil=LaserCanvas.SystemUtil||{};LaserCanvas.SystemUtil.alignEndElements=alignEndElements;})(window.LaserCanvas);(function(LaserCanvas){var
attachClickHandler=function(sel,onclick){LaserCanvas.Utilities.foreach(document.querySelectorAll(sel),function(){this.onclick=onclick;});};var Toolbar=function(msystem,mrender,fireEventListeners){this.msystem=msystem;this.mrender=mrender;this.fireEventListeners=fireEventListeners;};Toolbar.prototype.init=function(variablesGetter,variablesSetter){var msystem=this.msystem,mrender=this.mrender,fireEventListeners=this.fireEventListeners,nextSliderButton=function(curAttr,attr){var k,current=document.body.getAttribute(curAttr),items=document.querySelectorAll('button['+attr+']'),n=items.length;for(k=0;k<items.length-1;k+=1){if(current===items[k].getAttribute(attr)){return items[k+1].getAttribute(attr);}}
return items[0].getAttribute(attr);},setInteraction=function(){var interaction=this.getAttribute('data-render-interaction');if(interaction==='toggle'){interaction=nextSliderButton('data-interaction','data-render-interaction');}
fireEventListeners('interactionChange',interaction);},setTheme=function(){var theme=this.getAttribute('data-set-theme');if(theme==='toggle'){theme=nextSliderButton('data-theme','data-set-theme');}
window.LaserCanvas.theme.set(theme,msystem.update);},toggleRenderProperty=function(){var propertyName=this.getAttribute('data-property-name');mrender.property(propertyName,!mrender.property(propertyName));mrender.update();},toggleInfoAttribute=function(){var infoPanel=document.querySelector('.laserCanvasInfo'),attr='data-'+this.getAttribute('data-attribute');infoPanel.setAttribute(attr,infoPanel.getAttribute(attr)==='true'?'false':'true');};attachClickHandler('[data-render-interaction="toggle"], button[data-render-interaction]',setInteraction);attachClickHandler('[data-set-theme="toggle"], button[data-set-theme]',setTheme);attachClickHandler('.toggleHelp',window.LaserCanvas.showHelp);attachClickHandler('[data-action="toggleRender"]',toggleRenderProperty);attachClickHandler('[data-action="toggleInfopanel"]',toggleInfoAttribute);document.querySelector('button[data-action="download-svg"]').onclick=function(){new window.LaserCanvas.RenderSvg(msystem).setVariablesGetter(variablesGetter).update().download();};return this;};Toolbar.prototype.initFileOpen=function(callback){LaserCanvas.SystemUtil.attachLoadListener(document.querySelector('[data-action="openFile"] > input'),callback);return this;};Toolbar.prototype.initFileSave=function(jsonSource){var download=function(json){var a=document.createElement("a");a.href='data:application/json;utf-8,'+JSON.stringify(json);a.target='_blank';a.style.position='fixed';a.download='LaserCanvas.json';a.click();};document.querySelector('[data-action="saveFile"]').onclick=function(){jsonSource(download);};;return this;};Toolbar.prototype.initSystemNew=function(launch){var
createSystem=function(){launch(this.getAttribute('data-create-system'));};attachClickHandler('button[data-create-system]',createSystem);};Toolbar.prototype.initDrag=function(){var mrender=this.mrender,k,elPreview=null,interaction=window.LaserCanvas.Render.interaction,elementName=null,els=document.querySelectorAll('[data-insert-element]'),createPreviewElement=function(name,html){var img,setOffset=function(){elPreview.style.marginLeft=-0.5*elPreview.offsetWidth+'px';elPreview.style.marginTop=-0.5*elPreview.offsetHeight+'px';};elementName=name;if(!elPreview){elPreview=document.createElement('div');elPreview.className='insertElementPreview';document.body.appendChild(elPreview);}
elPreview.innerHTML=html;elPreview.classList.add("hidden");img=elPreview.querySelector('img');if(img){img.style.transform='scale('+mrender.getTransform().s.toFixed(1);+')';img.onload=setOffset;}
setOffset();mrender.setInteraction(interaction.insert);},clearPreviewElement=function(){if(elPreview){elPreview.parentNode.removeChild(elPreview);elPreview=null;}},onInsertUp=function(e){document.removeEventListener('mouseup',onInsertUp,false);mrender.removeEventListener('insertMove',renderInsertMove);if(e.target===mrender.getCanvas()){mrender.onInsert(e,elementName);}
clearPreviewElement();mrender.setInteraction(interaction.layout);},renderInsertMove=function(seg){elPreview.style.left=seg.canvas.x+'px';elPreview.style.top=seg.canvas.y+'px';elPreview.style.transform='rotate('+-seg.q.toFixed(2)+'rad)';elPreview.classList.remove("hidden");},onInsertDown=function(e){createPreviewElement(this.getAttribute('data-insert-element'),this.innerHTML);mrender.addEventListener('insertMove',renderInsertMove);document.addEventListener('mouseup',onInsertUp,false);return(e.returnValue=false);},lastEvent=null,onInsertEnd=function(ev){if(ev.touches.length===0){mrender.removeEventListener('insertMove',renderInsertMove);document.removeEventListener('touchend',onInsertEnd,false);document.removeEventListener('touchmove',onInsertTouchMove,false);if(lastEvent){mrender.onInsert(lastEvent,elementName);}
mrender.setInteraction(interaction.layout);clearPreviewElement();}},onInsertTouchMove=function(ev){var e,rc;if(ev.touches.length===1){e=ev.touches.item(0),rc=mrender.getCanvas().getBoundingClientRect();if(e.pageX>=rc.left&&e.pageX<rc.left+rc.width&&e.pageY>=rc.top&&e.pageY<rc.top+rc.height){lastEvent=e;mrender.triggerEvent('touchmove',ev);}else{lastEvent=null;}}},onInsertStart=function(ev){if(ev.touches.length===1){createPreviewElement(this.getAttribute('data-insert-element'),this.innerHTML);mrender.addEventListener('insertMove',renderInsertMove);document.addEventListener('touchmove',onInsertTouchMove,false);document.addEventListener('touchend',onInsertEnd,false);ev.preventDefault();}};for(k=els.length-1;k>=0;k-=1){els[k].addEventListener('touchstart',onInsertStart,false);els[k].addEventListener('mousedown',onInsertDown,false);}
return this;};LaserCanvas.Toolbar=Toolbar;}(window.LaserCanvas));(function(LaserCanvas){var VariablePanel=function(mvariables){this.mvariables=mvariables;this.numberSliders={};this.el=this.init();};VariablePanel.scanSteps=32;VariablePanel.prototype.init=function(){var el=document.createElement("div");el.className="laserCanvasVariables";this.mvariables.forEach(function(name,value){var slider=new LaserCanvas.NumberSlider(name);slider.setChangeEventListener(this.onSliderChange,this);slider.appendTo(el);this.numberSliders[name]=slider;},this);return el;};VariablePanel.prototype.appendTo=function(parent){parent.appendChild(this.el);};VariablePanel.prototype.onSliderChange=function(name,value){this.mvariables.set(name,value);};VariablePanel.prototype.update=function(){var el=this.el,thumbLabel=el.querySelector(".thumb label"),thumbInput=el.querySelector(".thumb input"),str=LaserCanvas.Utilities.numberFormat(this.value);thumbLabel.innerText=thumbInput.value=str;};VariablePanel.prototype.setVariables=function(json){this.mvariables.forEach(function(name){if(!json[name]){return;}
this.numberSliders[name].setProp("min",json[name].min,false);this.numberSliders[name].setProp("max",json[name].max,false);this.numberSliders[name].setProp("value",json[name].value,false);this.mvariables.set(name,json[name].value,true);},this);};VariablePanel.prototype.toJson=function(){var json={}
this.mvariables.forEach(function(name,value){var range=this.numberSliders[name].getRange();json[name]={min:range.min,max:range.max,value:value};},this);return json;};VariablePanel.prototype.scan=function(variableName,iterator){var range=this.numberSliders[variableName].getRange();this.mvariables.scan(variableName,range,VariablePanel.scanSteps,iterator);};LaserCanvas.VariablePanel=VariablePanel;}(window.LaserCanvas));(function(LaserCanvas){var
mathStrings=["abs","cos","sin","tan"],reMath=new RegExp(`(^|\\W)(${mathStrings.join("|")})(\\W|$)`,"g"),constantStrings=["pi"],reConstants=new RegExp(`(^|[^\\d\\w])(${constantStrings.join("|")})([^\\d\\w]|$)`,"g"),constants={"pi":"Math.PI",},variableStrings=["x","y"],reVariables=new RegExp(`(^|\\W)(${variableStrings.join("|")})(\\W|$)`,"gi"),allowedStrings=(function(strings){var allowed={};for(var str of strings){allowed[str]=str;}
return allowed;}([].concat(mathStrings,constantStrings,variableStrings))),reValidate=/[A-Za-z]{2,}/g,validate=function(stringValue){var strings=stringValue.match(reValidate);if(strings){for(var str of strings){if(!allowedStrings[str])return false;}}
return true;},reTrailingNumber=/(^|[a-df-z0-9]|\))(\s*)([+-])\s*(\d+)$/i;var Equation=function(value){this._number=0;this._expression=null;this.set(value);};Equation.prototype.set=function(value){if(value===undefined){this._number=0;this._expression=null;}else if(typeof value==="number"&&!isNaN(value)){this._number=value;this._expression=null;}else if(typeof value==="string"&&!isNaN(+value)){this._number=+value;this._expression=null;}else if(typeof value==="string"&&validate(value)){this._number=null;this._expression=value.replace(reVariables,function(m,pre,name,post){return`${pre}${name.toLowerCase()}${post}`;});}else if(typeof value==="object"&&value.hasOwnProperty("_number")&&value.hasOwnProperty("_expression")){this._number=value._number;this._expression=value._expression}};Equation.prototype.value=function(variables){var expr,value;if(this._number!==null){return this._number;}else{variables=variables||{};expr=this._expression.replace(reVariables,function(m,pre,name,post){return`${pre}(${variables[name] || 0})${post}`;}).replace(reMath,"$1Math.$2$3").replace(reConstants,function(m,pre,name,post){return`${pre}${constants[name]}${post}`;});try{value=eval(expr);}catch(e){value=0;}
return value;}};Equation.prototype.increment=function(amount){var match;if(!amount){return;}
if(this._number!==null){return this.set(this._number+amount);}
match=+this._expression;if(!isNaN(match)){return this.set(match+amount);}
match=reTrailingNumber.exec(this._expression);if(match){return this.set(this._expression.replace(reTrailingNumber,function(m,pre,space,sign,value){var newValue=+value+amount;if(sign==="+"&&newValue<0){return pre+" - "+Math.abs(newValue).toString();}else if(sign==="-"&&newValue<0){return pre+" + "+Math.abs(newValue).toString();}
return pre+" "+sign+" "+newValue.toString();}));}
return this.set(this._expression+" "+(amount>=0?"+":"-")+" "+Math.abs(amount).toString());}
Equation.prototype.expression=function(){return this._expression||this._number;}
LaserCanvas.Equation=Equation;}(window.LaserCanvas));window.LaserCanvas.theme.baseUrl="";window.LaserCanvas.theme.dark={block:'data:image/png;base64,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',blockFill:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAxMi8yMS8xNe7lBxwAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzVxteM2AAADW0lEQVR4nN2a63LjMAiFsZNn3fd/gKTeH1vtKJjLAQnFSWeYXNxafAhOJaztOI4/RPT8tYfy3vp8ENGNiO6/r5JZ13Z2v/5Ve99eI+NI1442eCW8Zwg8H3cKPBE9ePQz8J5Zjmkz6303BZ6InvsE+Gzqr4CX7Oju99RKQLLZ8FJaR+Gj2XewsV8CoAFXwSMi58FHfDgkRkkDEPisvRv+xMU1AIXPzH5E4ZfAtwC8G97KhtGMM+F5ACQRXAH/VK5n9KW/5sL3AZDKoLLmtQyohBeFXtMACT46+1H49r4KXvwsacBseEnkovAjNW9+5hpQAY+u+CwwxIcwPLF1QBTeq/kI/F4Ef6p5/l3TgIzgccc8ha+G94BVDdDgI6kfEbkZ8Lzm3VRXrt00B1bAbwCg5cMwvBaACDyq8Pz3tuA4JfBWBiAWEbn+u1Xwmh683JMHAHUsInJV8J7CS/6d7rsHBpfgvTrvnRip+ZsAj6S6CU9E9xaASvhHB5+dfaqAp6AGRETuI+BbABDHInV+Bfhm7sQiC5FKeMs2ANAKBhRwbyGEgErpjwqeFpwtMNtpeC8DUHh+bbMGvBK8FoD7F8LDGiDBWwq/En5E8FR/+EIIAfXgM8bhUehm6S11vxDS4KUMsOCjsy/BR1J/qJ/Q/tiCt1Z8nwrf7NiJ6OdD4af0E6QHIxn41TU/bVfZeoKI8FnwEWf4Cg/9Fzcdvg8Aqvqz4KP/32fA3zg80fnxuLXouQL8SNmRdG+eARo8JaJdAT99V9lnQATes94ZBN7Sg9IttXZIyoNHnUEEz8qESng3A2bCZzY41f2EFw24Knyk1Dg8NK60ENLgM5EfhS/fUvMMsOARZzLwvS3vJ/QiWAWPCiAKb2WeBW+WQCU8MiORRQ66sfIC/z8AFvxIzWfhl+4qvQcjnjMfDU9E+0g3JQsvCd474Dei/AEJbYXniU+7fpl+QvSABK95NNU9+Lf1E6IHJJCzxSvgp/UTIgckvgH+NA56QCICj9b8JfoJyAEJCx6pxYzgLesnIBrgpXYG/jL9BO+ARLTOq+DLttRWBnwLPPRscBY8HHnDlvYTpABkBe9J/36QGdauLe8n8ABE1HUVPCqAqX5CH4BsylXDl/YTpMfjM+FHaj4LH9pV/gWzg54njATjbwAAAABJRU5ErkJggg==',grid:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAAoElEQVR4nO3QQQ3AMBDAsNs0puX/KIIVhh+NEUR51lr/XOybmdl76w7m1QFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoF0/4ADz7gV9fwRVfwAAAABJRU5ErkJggg==',lensConcave:'data:image/png;base64,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',lensConvex:'data:image/png;base64,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',mirrorConcave:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAE80lEQVR4nOWa207rRhSGv3EIxxxIRAkphkRFqBIqghukPmdfoe/SXnDBTctNUzaHEEI3JLWTkCOeXoxHMYkTtlSHkcwvWYYQrFnfzJr514yFlJIP1u9CiJ+llDXgF6D5Df8zAobAr1E3xor6gd+grdPTU3lxcZEH9t/57ivQB3r+PXKZAPC4v7/vXV9fJ4DyjO94wIC3wccGwN/Hx8fe+fm5BRQn/iZRQ10HHAw+NgD+ODs7G1UqFQHkA5+PeBvsZPALAbC0iIe+o9/K5fKgWq2uAilUrw9QAILXMOTnyGUCwOXJyUn38vIy63le0rKsDaBFeODB371FNMZECjSB9u7urqxUKkngO+YP+z4ggJVFNMYEAICnw8NDr1qtWsAe4UH3UL2+Ergil4kUAHi2bVve3NwIIIcKNjjsPb9tSf+ur8hlCsBX27a9arUqgCyqx3XwS6jeDgauQUQuUylwa9v26P7+XqBWgj5qNViZcS0TsxT4y7bt0cPDwyqQZnqoz7oilykAf+bzec91XVAAVoEEnwjAdalUGtbrdb28baLM0KzALZQfiFym5oBmNpvtu67L6+trAvie2fnvoVaJ3iIaYgoAQLdYLMrn52cLsJkOXDAOPJYA/t3e3pa+GQqOgAQqHSaDXwgAU3MAgJtKpaTjOBaqKkwy9v5D3tYB+rPIZRyA67oC2EB5gcngYw2gm8vlZKfTATXse8wHsBCZBNBLJpPy6enJYj4AXRfEygcAdDKZjPTN0BLhACbrgshldBVIpVKy3W5rM6Rn+j7TZXDsymGAphBCSnUwkUQFL/kkVhignU6nZavVEqg5QKBAzCuMIpdJAC1Uj4MKOpjrsyBELqOrgBACVM+HbYLEekcIwFlfX5fNZlO3IwyAhuARo3MBre7a2prMZDK6HWEAdBmst8sil0kAg+FwKF5eXmC87R0MfsT0ZmnkMgkg6EGCAPRwDzsgiVwmAaz6d+HfE0xXgZ8CgGTc6/OOxmKXAkFrq1+EmBd87AAIKaXwvYBkesKbPBVOLqIRRlPAcRzhL4N6BISdCMfWCK25ritSqZRk/HJEEECYN4hcJgFsSCnxU0C/DzQi3BPEEsByu9220um0RKWA7vUPLYZMboikXdfFBzAk/DA01hsiGUBYliUYA5hVDMUyBTKu64pMJiNR+T8LgIYQOx+QabVaVjab1UvgvIlPT5CRyySAVKvVYnNzc9YIsIi5FU43m02dAj3eAggrheMHABD5fF4CbcZH4bOKotgBSHU6HXK5nARcwt8MjeWbogDWYDBY73a7wvcBdT5ZOZy+ublZLRQKoFzgV8LL4SCAhZg2UwBKjUZjOVAINZme9CZL4VgZofLt7e1SsVgEFbjLdPCTpXCsAPxQr9cTOzs7HmoFCJbCI9T+YJgxilymAOw5jmP5HqDJW6enh3tYRRi5TFWDdq1WE3t7ex7wD2rI614PVoSTVWHkMjUCCnd3dwnbtvuoJXBeIRQcDZHLFICtTqcjDg4OPOCB9wHEag5Y7vV6WcdxRLFY9IB73gcgZj3s/8oEgN0vX76sbW1taQ/gMBvAwucoEwB+uru7Wy4UChJ4QTnBSQCJj2qMCQCnV1dXS/4IcPmAre95MgHgx0ajkSiXyx7QYAxgYXk+TyZ8wF6tVrNKpZIHPKGWOCPBgxkA6cfHR3F0dDRCrQBG9R/QHTitHMjhTQAAAABJRU5ErkJggg==',mirrorConcaveMore:'data:image/png;base64,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',mirrorConvex:'data:image/png;base64,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',mirrorConvexMore:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAGA0lEQVR4nOWb709TVxjHP/cWCirSomgMggrE2RQyVtfAEH0jicqWzFeLWbK/w/9g/4Cvlv0DvnKaRbPMxBBAWBygMjHIJZPRNTgopa3GWqC9dy8ON730F2Sn5F7vvslJc8st5z7f833OeZ7znKsYhoED8d3y8vL3wWDwVDKZfAb8UOHeH2U6UmV+vE84BHx769atkzdv3swCnv3srGY///l/xKVYLPb53bt31cnJyXfAbxXu1WU7cxoBHuCbO3fuNA0NDemNjY0rwKsS9xlAdrtJwWku0LmxsXFpeHi45saNG5vANJAuuCcLbFiaFJymgK/Hx8db0um00t/fnwD+sPxNB7bIj3xVFOAkAg4CXz548KD++vXrW8CfQJy83AuNN6+l4CQX+DQejwei0ahy9erVDEL+ptwz7JS99VoKTlLAVyMjI00+n4+2trY4MI8wsJTsrd9JwUkEXB4bG6vt6+vLAnNAkvKyN5v0MugUF+gE2kZHR9WhoaEMMEmx7AubAtTJduwUBVweHR09EgwG9ZaWlrfAS4SRpUZfRRheQxWe3ykEDD569MgbDAZ14DWQovRsX0ve8KoQ4AQXqAe6NU3znD9/Pgs8Y6fUtxARYl2ZJgUnENAFHBsbG1MGBgY+AL+zc4krZ3hVCHCCC/RPTEwcCoVCRkNDQwJYBHLk5V5K9lVzAScQ0DszM1MTCAR04C9E5Ged5HYjQQpOcIHA1NSUp7OzMwcsUFrm3u1m/c4DbMp2bjcBB4Hj8/PznnA4nAM0Kvu7F6GGHCJOyMg+gN0ucBI4NDs7q4RCoQzwhmL5W1uO/MpQlWTIbgI+W1paqmttbTU8Hs8HxIiWIgCE3E2jXUNA98zMTG0wGDSAdxQbr1LaaNcQ8MnKyori9XoNYJ2dBGQRinA1Acei0aino6PDqgAdYXglo81PRfYB7F4FGpeWlpT29naTgC3ys3ullkUM3kcfCdYlEgn8fr/pAqbkK426GRiZwZEU7CagPpVKKdsExKlMQGEabBIhBbsJ8KZSKcXn82WBVUpPerCPobDdBNQlk0mampoM4B92EpCjchLkCgLMup8BrJEnwJzgXE+A2b+C2AUy9/n2YrgrCCCRSJiToIe9pb9m03FDXcDv96OqKux9DwB2TpRSsDsQ0hVFMdbX11WgkeLU13ptpsGF1SEp2K0A3e/3k0wmFQQBaSqnwa6rDOW2PxXgKMVLH4g0uFJ1SAp2E5D1+XxGMplUAT9iJTDT4EoVYeu1FOwmYMPiAkcRwZBZEd7NeFcQ8Pbw4cNGLBZTgCPk/Xy3irCZCn/02eD6iRMn9HQ6DcIF9jLyOi5Kht60trbqkUjEAzSRz/XLGV8qRJaC3XFA5PTp07lIJGIug+VK4WaxxHWlMa29vT0XjUYVoIHiOQBcXhp72dPTszU3N6fqun5QVdUtBAlWP9/XZMhuF3gNbLa1tRmLi4sHECuBObvvtUnBbgISwNuuri7j+fPntUA3peuA5Zr0SW+7CQCIBgKB7NOnT2uAHsonQ9amUKVjck4gYPbs2bO5tbU1BeigckboQUyQ1oxQCk4gYKqnp2dL0zRV1/XjiIpxqdK4NRWuWjrsCAK6u7vfr66uKqurq43AGYrlvm8nRZ1AwCKwFgqF9OHh4XrEmSGr3CsZ7woCMsCrcDicW1hY8ABB8nLfzXhXzAEAY/39/ZknT56owDHE8rab8eZpUSk4hYCJvr6+97FYTInFYj7E3kAl481TZF7Zjp1CgAa8CYfDufv37x8AzlHa+FKHJqXgFALeAS8uXLiQnZ6erkFEhIXGlwuRpeAUAgB+vXjx4odIJKKmUqlTiNfndkuFXUXA4zNnzqw3NzcbU1NTPiCE8HNXJ0NW/A286O3tzT58+LAOGOR/kA0W4ucrV66kNU3zxOPxcxTnBqUOTkrBaQT80tHRsdzc3KyPjIw0AQOUN74qr9Q6jYB/gMfXrl3bvHfvXi3wBWK32Gp4VXexnEYAwE+Dg4PxeDyuaJp2ErFHYJ4Rlo78CuFEAsb9fv9MOBzO3L5924tIj/ftDfJ/AY0gqnVVRv5dAAAAAElFTkSuQmCC',mirrorPlane:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAxMi8yMS8xNe7lBxwAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzVxteM2AAACnUlEQVR4nOWaTVLDMAxGX/oDS/acgUtyFo7EHdizoyTELFxNXMd2zaBONco3kyl0Co5evqhS5CGEwB31PgzDSwjhA3jt/JsJGIE3jRM4aPyTf+j5/PrU8dkfluAnrRO4N4AezcSA0+A3ASCwBJsH7x7ARDt4twBmysGOhZ9VZAnAyDr42u+z1qKWAHxx3fYj8ZwftRa1AiAAJ9q23xEDP6B43lYAwAIgv/Iz8TyPLMG7A5A6IAUgdk8DFxAqsgIAIgAJPrd7fhy1FrUCIBCTIKytXjtUZAUAwJ6+wN0CaFk+PXbEW0VFVgAM9AEYgW8cAoA2gJmYIyRJugMwAA+sv+8hXnEJ2i0AuHTAnnLQ6XsqsgIgzQE/LDVBHrRbABCvuiS4WtCq9gdbACTJtQBIX+CuDpBKsAUg7wtUZAUAlAFM1GsEFVkBUHJAYGOlcFroSD3QaoxUZAWAOKDUBtcgqMgKALjeBrt+IgR9zdCR+FV40lrUCoCeblDaYLeDkRaAifVjcxVZAVBzgNi9NCBRkRUAsK7y8oLINQBxwI6+0Zi7WwDW06Frc0IVWQLQCj6fCrucC9RGY+lE2HUhVMr2tVbYHQBxQA6gVSCpyAoAuCx0UrtvohlKc0DJ7iUIKrICACKEa/1APjP4tywB6J0NHnFYB/TOBmG5VVRkBQC0AUiJ7LYUbjmg1Aq7AwBrANIKb2anqACA8s5Q1ztFZTzeu1PUHQDo3ykqu8hUZAVA77MAcL5PsBZ83gq7A1DrBifivgH3w1EoP/YWu7tvhtIcULL7JpqhE+VWuAZBRZYA9HaDbh3QC2DQXNQKgN7hqLqsAIA6gP0tF7UC4KYboVqyAgAuAaje5y1ZASDd4E3tXtJNEssf9HF+/eQOwQP8AlHcYhzwR26qAAAAAElFTkSuQmCC',screen:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAABJklEQVR4nO2bQW7CQBAEa1DOvBU+EIu8IG/lAQwHbGUh963Ddl3W8mXaDXKPWnJ1NytzsgXYxABbgE0MsAXYxABbgM2XOPsCnIEa7jVwB35niTANOFfV7fNmd19nijANKIDuvvH65RnOaZgGHDTw758wi+VfgjHAFmATA8TZNZzfvPaC6egpUFUbzM//A92AfQ94WPNNA8bl58cSkZegLcAmBoizE4OQGEwMkhh0iQG2AJvlDdBL0f3c9uulanHgbw84WKkWB9auxceHTi1uEQNsATYxQJydPgDSB6QPIH2ASwywBdgkBo2hI4nBxGBiUCUG2AJsljdATwHea3GYXI3rKfBZi8PcncA04N7dG+/fC8Dkarzy4eTixABbgE0MsAXYLG/AE+ahYF8hs97BAAAAAElFTkSuQmCC',mode:['#cc3333','#6666ff'],};window.LaserCanvas.theme.light={block:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAxMi8yMS8xNe7lBxwAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzVxteM2AAAIf0lEQVR4nO1ba08bVxp+5mYTbsbYxsY25mZMCS1J2IRdgqo0iqK0WrUftr+h7U/pD6i0UpSV9sNqP+2mUttI3Q9Ju9VuGi0NiQkE0kCMwTbUYJtLMNjMnJn9YA+ZDHPlst4qvNIrzRzPeS/PPOedc86MKUmS8CYLXesAai2nANQ6gFrLKQC1DqDWcgpArQOotZwCUOsAai1vPACsxevOAbgEwF/tQ04sopOVXQApAA8BJADrAFwHEAVAAfi1Lx66AJRhE4D2W7f+1PXpp5/coCjqpAI7cZEkCZIk3QTgktusAMABqHs4MeH1eLw7f//ym9uSJBX39nhaEASG53ma5wVGIIQReIHmBYERBIEWBMIIAqE5jiUsy4ocyxKOk5UjDkdFOY4jPM8ze3vCvr1KX4Hh9+1UfqNpWuQ4VmSZih2WY0WWYWSbIsuyxOl0EJ7nGUEg9H5sgsD89S9/Hrl//4eOak4FOwAEADCzMzOtPl/b9r/+Pf637394sFbty5moCIAHsKdQXnVMWbDDVa/jFf15nfMD9qK9nf65uZ/fD4UjG9WcZuXkrDwF+gEgmUy6e3p7C48nnxYAMFUAjBSoFEuhqkTjHCY2GIUKGraI6lxS9WEAMJ2RcEc2+0tjLBZbr16XsQNADAAymbRrdHRscWNjS9RyoqHKZNUq/2ZmQwZCK2ktMDTtuFuaw9vbLx1Xr76XRuVJULIDQOjrr7/xUxSFwcGhBYvJ6yWsVCt2GFTuqhZ71G00dJiUy61GCCH0+XPnNwCsKZMzA4AB0PTjgwe+hoaGvd3SXkbPCV5RFhrBqgOHTl8zMLUS16W+rJOTExGn0ymMjY2uA1iwA4AbADf1ZMrT2urZSSSXUkaO8GqSZHTn9e6+FqBHoj4AxuNxN83PPW8NhsJb1Zxm7AAQBUAlEvOt3d0965OTM1kTAI5j3GtRX13srFCfAcBEOoLt2exK49DQuWzVpi0GRAFgcXHJ3RuN5fKFDaJ2oFDoJKw8hk5fK2BqgWFEfRYA6/N6ujc31p1dnZ1bqBS/oh0AIuM//eQql0vsWwNnV7QcKNRo3Kupb/YINRrzynZTIMulYnBvb48dG7ucBSDPAywD4P3uu+/9LMuKHm8gYeDosOPeKvW1wFBSX9fe/NyzIAB8/PEfVgAs2QGgDsCZ+OO41+v1FdPplUUdJ5ROwkowDKu0AZh6LFDb02RSU2NDw9zzZ609PdF8NaendgAIAaAmHk0EfG1tO9Mzz3/RcWQ27gW9AFXKwDhpW9QHwITD7e7Mcqqpp6dnvQravB0ABgAgn8s1hEKRzdXVXFnDyXFSHzqJq9soi/aocCgQ2FhfrwuFw1uorBNs1YBoKpWq29hYr7808ruUlgOdhJXB2qW+XuJKe1bYxAIQ6pyOtlJpl/vtyMgagC1UFmeWAQh8++0//DRNS5FIT0rLgUbCajVb4MhqNubldltgJhfmQqIoUp999kkSQForST0AOACNd+/eC9fXN/C5fGFVw4FR0TOivt6q0Wy2Z5n6AEh9/Rl6airuDwZDm1UfP9sBwAeAWV7ONPp8bdsLybRyDqCkvl4NOG7qixrAGS6bO8LtTamlxWav17dzGAAGAFDJZLI10tm1lUovb6odGCSvpL6dR95RqC/7E2Ub3V2RYKGQr4/FYvlq26odAPoBYHk50zww8HZ2Z2dXLj6iTsJ6Vd9sw0Qv8UNTX7bT4moMbG+/dF67di2NyvRXnopbAqD95s1bXQzDiL3RtzIKB2bj/jDUN6K/FvX17L0WUyG/5ieEUB98cCMLQJ4IWQag+T/j4z6ns04olXl5/GtVfPWxneStVH4rRfQ16ss2pqbiIZerZaejo6ME1QrQDAA3AEcmnW5ucbtLqfRyFq+or3fnBRjsyKiUgnHSR6E+ASD0dHc0zc5O+xQFcNIOAH0AqEQi4Q4Gw9uZ5WxBJ2Gl2qG+VvJ61D8Um6K93f5MJt104cKFlWpsL+wAMAgAicS8p7//bL5Y3NnRcqI6PuwjT48JVoqouijv2wiHA8GdYtExPDycQ+UtkGYB1AOg8/btL9tpmpb6YgMZHLzbdqivpqqVR96hqS/bKJd2g6VSiXvv6pVVVKbAuqIFQMvM7DMXxznImfrGlEaQdqhvZX9PTf8jF9L444fdkiRh5NKlTWjsARgB0ATAEY/HfS0tLbu5fEHJAK3Aj5v6VpfNkp4Nt9tFP51+0tbX1ydvfx/YAzACoBMAPTkZ9wfaQ8WFZDoF7TtPcJD6ZlQ9LurTOrYIAHJ+6GxbKp1qjkZj8vu/53YAeAcAVpYzrt5oX6FQ2HipMK4MWOvtkN39vaNQX5dN/bGernxurX7w7cF89TfdSZAWAF337//oLpfLzLmh4ZQoirzK2WGDNaO/1WWzZGBDACBIEukuFot1l0dH1wC8NEpeCwDP1NR0i8PhIP5AcFEjcLnq26nSZpVfj/pqQPSo/1rb0+knXYQQ6qOPPswCWLYDgBPAmbv37oWamlzltVwhiYN3Taa+pR0ZKwFbBNNSIXU6nWI8/ijU3h6U9wCm7QDQAYB5MT/f2uZvKyYXU8oCKDs+Keqb2ZMUfXRtXxx+pz3x4oW7ugkKqF6DaQmrOD4LAEtLi653372SvnH9yvUPf88RlmVFh4MjFEVJPC9/wSEwPF/9okMQaIEnjEAqX3MQQiiOZUWGZUn1qxCRZRnCcZzIcRzhuMrxIe2JLMvsx7T/9QnHEoZhJEmUGv74xeeNl8cuy/OXrB0AaAAoFPL1d+581Xfnzld9Zp3/H4UQQl38zcUcgHXTi/E6AHkApPoR0a9dCIBHVi5UAjCOytugPgCeEwjqfyUFVFZ//7RyMXX6n6E3XE4BqHUAtZZTAGodQK3lFIBaB1BrOQWg1gHUWk4BqHUAtZb/ApwverK8d/8OAAAAAElFTkSuQmCC',blockFill:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAABUklEQVR4nOXaTY6CQBBA4TeNF3PjGTzB3P8AGmZDxbKmQDKz67cg+JPQ+V4qBIWv6+3+DTyBR9mf/WxJ26W8r1v3/bodqx4377vX6z/WjO0xzHjgOcz4CKDF1wnQ4UnnACU+JkCLjwBafDcBKjzbOUCLzxOgxOcASnwE0OLh928BFb5OgA4fAbR4YB1mPLCMkwtNiQcu48RC0+JjArT4CKDFfwowPf4ogAK/F0CD7wKo8DWADs+H64Dp8TEBWnwE0OK7ACp8DaDD5wBKfATQ4uF1X0CJh/5fYQ0+AmjxRxOgwEP/jJAG302ACh8BtPg8AUo8vD8foMPHBGjxEUCLzwGUeNJ1gBIfE6DFRwAtnu35AC0e/nZzdBo86b6AEn80AQr8XgANvgugwtcAOnwOoMRHAC0+T4ASz8F1gAK/NwEafBdAha8BdPgcQImPAFo8sPwApCvw+M1u6aAAAAAASUVORK5CYII=',grid:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAAoElEQVR4nO3QQQ3AMBDAsNu0f/mzLIMVhh+NEUR59t7/XOybmVlr6Q7m1QFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoDVAB2gN0AFaA3SA1gAdoF0/4ACl1wR+rmJJowAAAABJRU5ErkJggg==',lensConcave:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAEJklEQVR4nOWb224jRRCG/+o5eHyIYzuOvd4NG3ZXC2IlJCT2AZYbngHxTjwAN7wIT4AESIgbCCevExCJnfiYscf2dHFhbPk0ys26Korrrqramt/fVHfPdPcQM2OfzZW8GBG9BvA1gN4dTbMA3jBzuGtNogAA9AHYzz7/4qukBr3udf6H7779EsBUQpCRuMiS/QGAm1cXuaQGzcvzEwAdZh5LCBIFwMxTAGfNy4vHSW16vZsjAL9IaZKuAAD4q9dpPU1KRsOwBuBMSowGgB8nk+hZUnIyiZ4D+FVKjAaAn+J4+nJbYhgOAmutjwcOoM7MH21LdDvNIwBtZh5JiREHwMwWQL15eV5Zz3XarafM9ndJPRoVAAD19s3VxlQYRWGZmS8khWgB+Lnfu/lgPTga3lYA/CYpRAvAWRQNg/XgZBI9ArAXFdCwcVxbD7K1BQB/SgrRAtCxdppeDoS3/bS1NgZwLSlEbRC01q5UQBj2skQ0ZOZYUogKAGZuAHjMzDSPDfqdsjGO6N0H9CoAAHqDfnsxFYaDXs3a+EpahBoAZm50O63juT8ej0rGOOfSOjQroDuORtm5E8fTDBm6a6XonZtqF4iicLEiZW2cMWT2CkB3HEX+3LFxnBmNwn+kRagCiONJdsknAFZahDKAeDELWLZpzBZNRU11DLA2zswda20aQFdahCYAMNvFUx/PAHSkNeh2gek0teQTAPFtKk0AjNmfnjlsA9y9Y/TOTXUMYOb1VaG9mgVWzNo4hT2rgA37f8FU1O4VAA27NwCIzJCI8tLXvUcA6BZLs4KU3RsAAHnYMwCHRLR49ifS0aIJYOVuE5kRgANpEaoV4Lre8ikQhoIeTQAHxnGHc4eMibBnFbA+4DEAR1qEJoAjx3GGSz4DKEiL0ATgu66/eP83xhk4rluUFqEJIO/5/uIkiOd5147jvZAWoToIBkF2sQBiHDdkaw+lRahWgJ9KD+aOY9whY2N9YOemCaBWLFWacycVpFu8tmMsYSoAiMglonwmm18chva81C0ZU5bWolUB7wH073Igd1BosY03To7t2rQAFIlWN0HSmdyAmbNJP9iVqVWA43rt5UA2VxgQkZFeFNECUDBkVirAGMPGuG0AiQepd2FaAJ54fqq9JR4DON4S35mpdYFUkGmtB4N05gLAK0khWgA+LJaqG2cBPD9o4qF3ASJyADw5Ktc2tsKDINM0xhF9H9CogGMiGiw/BM2tWKrWme2D7wKvjHHebkuUKyeXAE4kxWgAOHVcb2MABGZTIUB9InpfSowGgJe+HzSSkr6f+h7AGykxGgCe5Q4OB0nJVJB5C+C1lBgNAJXqo9O/k5LFUrUBQGwmEAVARAUA+VK5NkxqU62dngPY+lHVTjRJfj1ORJ8A+AZ3H4T4GMCnzFzfuaZ9/3z+P5BPYn1smQu8AAAAAElFTkSuQmCC',lensConvex:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAEFElEQVR4nO1by24cRRQ9t/o109OTGcee2Pglorw2RPABbNghseIHkPgOfolfQELs2EUKC1gETAYTyWYy7+7pR9VlMbYUoXa70NB3rA5nW1eqo6NTt27dqiJmxvsMV3pCIvocwDcA9A0hXzPzb1J8xAUA8NTzgu8//ezLH/858MN3336ldfEUgJgASmqid/Ak7HQvygb8oHUO4IkkmW0I8GhvcDQqG+hE/UsAzyTJbEOAxweHD1dlA73ebgLgA0kyogIQ0TOl1NAPWlnZ+GD/ZEhEH0tyknbAc9f1z28abIfRSinnnIjEloG0AKeeH0yrAhzXHQN4KMRHXIDHQRAmVQGeF8wAnAjxERfgoHuvP6kKCFrhEsChEB/xJHgadXcuq2J8vzVrcg443B0clhZB14i6/TdE1DwHENGxUmrkOO5NZwAAQK+/dwngSIiWqAN2iJz4tqCouzNnRiRBCJAVoK8cld4WpJRipdRbIjqWICUpwLHr+pU7wDWUchIAOzXzWc8lMckV9pVyjE3gVTEkUguICeA4Tt913YVNrO8HEwCnNVMCIOkAog/9oF1ZA1xDOW4MoF8zo/VcEpNcgQBYNSAd5Sau5z+omQ8AyToA6r7rekvLYMZasNoh6AC+53nBrXUAAChSGRuzVzcjQFAAZu76QcvKAZ4fzIioVzcnQNYBXT9o2wmwdkrTBCCHLJMg0MAcwGzCdhhZ5YCg1V6gaQKsQVYOYGZisMiljWQS7HSinpUD/KAdgzmsmxMg3xGycgA1MQfcVdxJAZhZcROXgC2ybNUmUjOJue6kAJL4X4BtE9g2JNviy+Vi2rGJzbO0Q0RW3aNNIeoA2wdZkg+3BB2g4lWysHJAUWQdIjWvmxMgWwrrf+MAZrbqIG8KyRwwT9PE0gF5yDDjujkBsgIs8iy1EkAXRURoXCFE0zy3E4DZuKTIqoW+KeRyAMw4zzOr+r4o8kgXudU12qaQbIvPdFFY3foao0NjzNu6OQGiu4AeaZ3bOqAPwKp5sinEBNBaj7TWVgJoXTgASl+T/teQrARfF3m2axNotN4H8LpmPgBkBZgUOvdtAo0xbQDNqgMADHWR3/oA8p0DU7N2AQAjmzZXEs87AE9Z6EQkeRaYAMBiPqkshuaz8QMi+kOGlXxD5PfJ+GK/KiCO5wNjTDN/jDDzq+ViWvnwIV3FfQBDIUriDjiLl7PKW98sXd2H0BYIbGEJpGlSWQvkedpoAc7yPBtUBWhdPEKTBdBFcVAVwMxHzPxKipB0EnzBbD4yxpRefA7Pfj4F8EKS0zbuBX56c/5raUk8+uvPEwAvJclsRYDLi2Hpc/hVErcB/CJJZhsCvFzOp6UvwbNsdQThJUDSv8eJ6Avc/Hn6EwDPmflMjM/7/n3+bwHdc7UzTA29AAAAAElFTkSuQmCC',mirrorConcave:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAEK0lEQVR4nOWbS27jRhCG/6omKYp+ymMjBjw2Zj23yCZnyA1ysCzmDNlklxNMlhlkMMjDGAVRLFmSKTa7Z0EzfMsM0HQF9A8QsmyJ7P9jdbGqSZO1Fs8tIrJff/Ptd//hKwkA/eMP7753PRZ2vcM+8v3Jx9s/Pl73+GgK4AFA/PjqXCIAiOnTen33as9HDIAdqubjIcYiAoBZ/Xy/XLxp+ZNFFu4PaJofUQQQ/xTH24varzWahsvbIBHgDbHTp7TdrN5PJtOzx7cpMvMaj8luz6tziQCw1r5nVl9ZaxIiTtA02mZ+kGgVmQIAwMzzvz7/formXK9PgxSAD2AyyDiG2GmvA7P6sFotDtE+72NkVwGFzHi+OZfIFAAAa82vm/Uqj4B6yHvIDHu1zbnEAAD4FD9s3iA72+UkFyAL+br5QcYqNgW0Tn5JkniGLAISVMM9QDX0xzcFAPymk+QUAKE93POtHA3OJQlgYa05wH7zZQiDRKtoDjDGXKAfgLwpci7Bq4BdMqsDY9Ips2J0J70dBqwExZIgADDT59VycY5msvORGa73A+7HMMRO+8pa/Lm+v7tE1bxBYXiLgQFI5gAQ0UYnuxMAcxTG82IoafnZuUQBAFhqvYtQmGwzPV4AaapvtU4iFMVQFwCNEdYBAJDE8TbEfgCM4lLpXNIAljpJrlEAKJsHmj2Bc0kDuNd6R6gCSNFdEDmXNACTpjpf/d3XBo8WwMqkaYjsEtinJHYuaQAAEWH/GsCoAVgiytcB6q3v4OYx5I57amOMOUEz/MsgGMVKsXNJA9gqVlu0z/+8IYoxYgC+hY3QBABUjef1gXNJAwARlSu9PNzbbpCMMgIA/Asg7/81mmd+zAAAFOFeNtv23rn+BwCsQfXeQJd5M8TRpQEwbGUhpMt8XiI7lzSAYyJaoT3j11vhUVaCx6gCKK/8tFWFziUNIOsEihxg8MJ6gSNmb4sMQLkneEkA+B5FuD/VETqXNAAi5nqie9aOUBQAM898P/gb3c1Q2fj4egEimgVBeIvuua8w5krQWhwFwTRBO4AUzfrAuaRzwGwShhrNYqd8X2C87TAzB+H0aIcMQFsrXK8MnUt4CthoGh2myJ4R7tMROpcYACIKlOcdhGF0h+4maNTt8GtmtUB7K1w3n5fIziUJ4IxZ5U+F7jvz5btFziUJ4Nrz/H/QvRZQrxDHBUAp70Ypb47qtb7rrvD4ADDzKyJeogrgRTVDr30/+IAMQDncn7UZEntKzBhzNQmjWxT/C/DUc8LjWhMkopOz88s5+j8nTEOMQwQAEYXK807PL67WeHoVSA05FqkIuFHKW0FgCawuEQAHh8dvrbFLdAMYJNzbJBQB9Nbz/bbwf/akLAKAma8mYVReCht0nu8di8RBrcVNFB3eIQMgZh4QA2AuT2YXc4lj1/UFLgLT1a+cAccAAAAASUVORK5CYII=',mirrorConcaveMore:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAEj0lEQVR4nOWbTW/cRBjHf2NnvW9xmpdmA0maRJSgSqXqgQpx4VIQlTggwY0LfAC+C1+AWw9w4YpEL4gbiAuFlqbpG6uSJik0YZPNvtozw8FZ2bvr3YbD2JL3L1leJbub5/+b5xnPM3aE1hrTEkLod69/8sXUlOOf8SMe4J8e3g+3vvnWVGyWqS+OqlR2b27d/eX9M7xVAm2gc3ruvTamRABIKb+sHx282Wk38yPeooAu/eajEIwpEQDtVuM3ja7u7jx+Y+BXmiDdo6MddzamRAAASN//6vBg/2rkRz7xox0Hw5iSAyD979qtRvGf5zuLBKZGjfZg/QuTcSUGQGvd1Frd2t/78zLjR7t31kD+9DCmxAAAeF7365N6bYN+o4PmJZAjNJ8dAFrre77nHT+tbq0ynOpdwKbfeLYAAGgtf37x926vDKKzfJzx7AGQUn7faBxdITAvAYfx5rMFALitlTzZefpgndDgyyAYUwoloNta8/jwxd7b9Jt0iAdhm4wnjQxAKfljq3VyifjR7kHIEfYGxpQKAOCnTrt5hdEpr+lfJxhTWgB2Qew/36teZDjdB5ui7AHQWitg66h28BphuvsMrxCzCQBASn+r0Th6naAV7hltMSkAgIedVtNheEWYKIApk1/+Ev3e7bZXCQx6hNtg0deaoDyMKU0AVaVkhXgA/mlsDoZjTK0EtNZKCHH/r+r9V+lP92gb3FscGVOaGQDgN5v1EmGd5whiGjyMKVUASqntZrO+QHD9jzOebQBA1fe8NYJ0n0gAR0pJlwkGUFPSLzEegDIZQPoAtJ4hHgCEl0RjSh2AVmqwBCwi9wXJPACtXYJrfa8h6jBBAEAgCC6DUeNR85kGYKG1IFgIxRnPPABPCOuE+LSfCAC21qpICGDQvIfhfiVtALNCiGMCAIPmFUF8mW2HAWaFsOr0zwG9Vjh6aTSm1AFYtt0kLAGL0YsiI0odgBCiRnhHeLJ6ASHEomXZbSa1GbJs2805+WNSBJDmrjBo1otF95AJuzsckb7gzsz+y2jjAsMPSaVWAkIIy7Ks5bn5pRphMxTXCmd2JbghLKtZKs9IwjnAZngZ7JkMIk0A67lcvk5oXjK6IzSm1AA4TuGdYrG8SzDq0Rsjk9EOa/S1QtF9xvAyOK4pMqb0JkHE+XLZvcP4jZBszgFCCMeemtpYWFx5yPi9AMjirbFczrlmWfZhqezWiDffa4WzuRS2LPuGky9uE78RMtgKZw+Ahs1S2b1H/0bIqFY4W72AEKKgpH/5fGX1NqMfjk6sF0g8A/KF0lWl5HFl6cIzxu8BZLMEtFYf5fOlO4TpfhYIxpR8N6h5a26+8gdnf07Y6KOyiWbAzLmFi8D8ytpmlfgJL5oNRv9VpqdEASilPswXSk+KxWkYPeMbHfFBJVoCUnofnJtdeEBK6R6nxDKg8sraJWBpeXXzCcOjn0i6xykxAF63/Xk+X9orT8/4hABS3pJLKIDrNz7NdTqt9xYrK3cJZ/7UzUNCQTza/vVjIYS9tLyxRwp1Pk6JAKgfH3427c49cpxCN4m/93/0HzjmDpkgTDM6AAAAAElFTkSuQmCC',mirrorConvex:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAEYElEQVR4nN2au27jRhSGvxmKomXJtry2gUVuUIBUWyRF+jT7AinyDnmnvEDK1GnS5wkCBEhj72IdA7FsybpZ4pwtKIKUNKQkjDYc8wcGNGnS5PnmzOWfsRIRfJBS6scgaPz8w9ufftvnuT9+//UXl/c2XB4+sL47ah1f73F/DMxdX+oTgF67ffa4w30GWJAEv3B9qXb9AwfU9xdXnw9Lfi8kQU+XZbY8OsmLDFBKaaVU7/VnvZuCWxas1nr+6CQvAAA9rfW/lusx5cE7NwFfAHwbhlG+A0zT3RZwLTPgm7AZDZY/l9X2QYMHfwBctjtnTySd2raUX5A0jQYH+H4vAARB8HUUta5Jevai2k6PDSCiTgCAL1rHJ3+SZYANAkATCMmCf/kAlFJa6+D1WffyHfYMMKwG3GAVgpMqBwB0AY7bp302U3493W0gnOQDgHOt9YTV9NeUB16fJgB8qbS+I0l/YbON1x7AhVZ6RlLr+wb+7PryygForU+DRviAvYe3FU2dZoI6aHwVhtEDWZsvgzAnqfU5tfECIieNMJyz2umtQzCsdpL1yQCl9HkYRn3svb4iCzgfdI0AaN1pRke3bAIoC/pgACpfERJjrsIwEhIA0fLydMfivKJbeQaISDuKWnMgIOvgbDWdvwZZP+GkygEopc7DZjQmqdFtKZ+3wXWZCImQpXQZgCJf4KTKARhjoihq9SkGoCj3BU6qHAAgIsaWAXkbXDY5cpIHAARQqRsss8FFEJxUOQARaXdOuvfsboPzIJyH8coBgBqQ1Po+NjhcPjNzfbsHAKTD7osf6ffOyJbNnOQBAGA3ABr7gqmTfACwbZhrkASb3zOoFQAoBmDI0j1f83XaG1SKzdUgsO8N2M6d5AEAEDFHSumAxBDZ0rzs3EmV22Gt9XQ6GXeXp7O1MrVcS0tqoZ3kRwYgc1aHtm1tvj47Q4KImPiZVQC24G1bZM7fX3kTQHicjJ8alKd9OlTaipMqzwAUo8lkFLC5Mbqe7vU0QwjGmHh9olOU7jYITqoegGI4m45Dsj6gaOWnCISTKgcgRu5ns2lENqztaorSOYOTKgegFENj4lP2Cz4myxgnVQ5AhCcTLy7ZDQCsrhe+fADGxB+AN5QDsFnhegAAhsaYNsUA0pWfogmSk3wA0F8s5iGbjjBvhetsh3lvTHxBlgHpjnBR4LWzw/14sUjH/m3Brp+//HkAcGNM/MoYM9da7+oI88vnTqrcDInIUMQ8j0ePqR9IDdG6KZqSjP8hBzRDlQNYajAaDdLpcFEJ+ARu0AsAxph3w0H/DLsdTqfITWpphxPdDQf3J6w6QrC7v3r9s/RS/zxPJz2SGi+ywkUgnORFEwDez+ezU8pXftZLOnFyki8ZcBPH8Sv23yN0li8ArkXMObsBUId8sRdNQERuRaT7NHxI1wVsJeTAwYMnAJb66+72+gp7W/9k3+lLEwD4MHj8rwOMOXA7L5NPGfD3eDRok9T4/1YxHwEDBUDBRAJoyQAAAABJRU5ErkJggg==',mirrorConvexMore:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAFKElEQVR4nN1aXW/bVBh+jj+StMmatGs32nXaKK2GWrViE6KiqEJMSJO44AohdsF/4I7/wh/gGnHDpGkTSBNIKzA+ulXA2jL6sa7N2qRJHNvngwvXcuLYaaaTKid+pFeyU6fHz3Pe8/p9jkOEEFARb869s/T32s933//w0y/aXXfvztdfyYyjyXz5LLG3u/nlyOj4nbMeR0kB5hbeXaxUSosz127cP+VSLjuWIfsPzgIv9rY+z+Xyf2YGsvWYSwQACsCVHUu5DFi4vnzeqh0vXhy/8jDmEgqg3hBSUC4DigfPP+OcpyYmpzdCf2IIZt1FlzJAOQGqlaOPCsMXHjV8JNBKOpkCTE3PT1PqXhi/dPWHk4+iCIePpaCUANVK6RNdN6x8YewApxNPXgbU67XlbG7oL3jFrR1pCm9pmLJjKvMUuHnrds6yKrOvTUytIKjwdsSxA+++0ychBWUyYPW3Bx+bZvpZYXjsOeJnXwOQgjfzBrpw/8oIUKsdf5BOD2wgOv2BZtJGw7kUlFkClLpvZHNDT9Dc5DgAdATp3hipk5CCEgLcvHX7nGPX5ycmp39BQJ4gmng4pKDEEvj14b1lwzDXsrn8EQLiRochBSUEsO3avGGmNtA5aT+Y7NhKCMAYfTubza+jtcK3m3UHSXGDnLGZ4ZGL6wiKW9x6N5FEN8gYm568cm0LzWs/nAk+8XBvIIWeCzA6NjGr63pR1/W41BeIJp4MM2RZ1bfMVCY8+wa8p8FpRqj/M4AQcpkQcDQL0IkLTIYAQoirmcxgEZ4AHEErfJoAviGSQs8FYIxeygxkD+A91jrdAEmOGRKcD+m68RTtCx2F1/QkrxMUEAXdMI/QXgAD8e2xFHouAOds0DRTh/A2PKJscArRfUEyBBBc5MxUugjAQkCcI5pslAhS6LkAgBCccX+7i6J9ukeJIAUFBIDgnNnwOr5XscE6EtIHDGVzeRuvRp7Bqxn9LwAh5PjEB8St+3C6NxZKaQGUsMNWrXIe7be9THiz3rhF7ocUVMiAsuPUhwFUED3rFMEjkoai/90gABCimWjdDeII1nmj+wsfS6HnAhCiHVPXKQDYR2CD48gmUQBSptTJw1vrp5ENn/d/HyCEOHQc+xyCRiiObOOxb4X7XwBCtD3G3CHEr/dwwetqJ9jzx6Dr2mt23cqj+dEWFXGvyKTQ8wwA8K/r2CMIMiA8+43pnkQzhE3XtfNorQFANOFkmSEhxB+apr3OOXM1TXfQWUvctS2xntcAACCEbO9sPR1B52+E/VfjuuzYSggAkNXS4f4cOiPvh98pSkEJAQghjy2rOovOiBM0GyIp9LwGAABjdJVzeh3t9wSAVivc/63wCX53bHucc57RNE1HM3EN7RskKSixBIQQjzmnhcrx4Sia010gvjHqyutxJQQAAEK0R3u7mwvwqjtBNNnG867UAGUEAMhPVq06gWADJIpsOJLxCxEAoNS5X60cTaK9H2jMBL9nkIIyAgghVih1B8qll2lEp70f/vZ5V8yQMgIAANG0lf82n8wjPt1NdNkNKiUAo/RutVqeQuvM++ke9QMqKSglAOfse8euD5dLLw1Ep3uUCFJQSgAhxDMh+M7O1j8ziE73sBlKlgAAAEJ+LJeK76FzVygF5QSgrvOt69iT5VIx3BVGkZe+f+UEEEJsCiF2d7c3biCevPQ+gA/lBAAAEHxTOnqxhFbiXTdvSgrgOvZ3lNLBg/3tywhejpKzGEtJAYQQJY1oD3a31pdwxvf4P44Gn0Gz9/ckAAAAAElFTkSuQmCC',mirrorPlane:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAACTklEQVR4nOWaW26DMBBFDyGPdfWna+gOurB+dA396bqSJkA/CMI4flWZJsP4SgglUmLu8RhmxjTDMPBMNU0zvLy+vf/hJ2fg8v31+SEx/lbiTx6kjqv561lEawDQM5t2zyLSDGBgadiHICKtAEKGfRgi0gagI2/e5BIYSM+2/91GamAtAI6UmQfYIXjdWgCcSEdAx3it7iEiLQBiEXBmvMYDlQDwb3J75pA3DeDEbL7n1mwIgoi0AJgiIBbuIRAi0gJgIG3ch2DuMVhqfsv4RDhKDbwmAAA/GM0EUwA2LB+LVQE4M8+66VrAB9CzTI7MR8Ce8VoaZpMh02YBHCgzPZ3N5QFHygBsmJeLiDQDcM3DbTosIm0A/BkPlcHVAMjVBSLSCKChPDO8W5oAuGVwrAdgFkBo1lMQxKQFQGkPYIPRfYHcmt8xmp46R1UBgKVxk1tjIQBTuIf2CMxHwIVlp7gaAD3LDnHMvDkALfFQD33upQbWAsC9yeXMTymyiLQB8M36O8LuvUJEmgDEZh4q2hlyzYe2yMwC8BOdlnx2KCJtAGAO91xFKCItAKYGSKoQMg2gpBhyjVdRC/hHi+FMMAeg4/ZGKSLtAGDZJa6mHA6VwqEE6W5pBOB2flJ1gYg0AXBL4erK4VQp7H83pcgi0gKgdOanUtgsgJh5vxQ2ByDW/4PK3hR1j6qKIReAG+7VFEOn6zlkuIol0JIvhlwQjdTAWgCUvirbSg+8JgD/ojUAEAv3kDQDEHslPiWNAMTXeUraADxcDwmzAj1tIn4BkQlpHeHCNsQAAAAASUVORK5CYII=',screen:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAABG0lEQVR4nO2bMQrCUBBEZ0XwRNolh9fSE1mthUkMaaz8b2HnNYEg/PEp2WXQyEx15kQHoLEAOgCNBdABaCyADkBzpg6OiKuki6RYbqWkV2Y+R+bABOjz5h+He7fRIUgB6yc/L1dkJSUFbGTm8ZswjPYPQQugA9BYAB1A2nYChAoC7uThFQTMv1/yPyoI0Oj1d08JASQWQAegKSHAYxCkggCPQY9BEAugA9C0F1CiE4yISQ1r8ZX9HtCqFl9xLe5aHMQC6AA0FkAHkNwHuA8gD68gwH0AiQXQAWhKCPAYBKkgwGPQYxDEAugANO0FlOgEl1pcAqpxUsDaAh/3gKHVOCngJWnS91fjElCNh/842RwLoAPQWAAdgKa9gDf69Tyvp96DuAAAAABJRU5ErkJggg==',mode:['#c73838','#3333cc']};window.LaserCanvas.theme.line={block:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAEw0lEQVR4nO2bv4tVRxTHP7OKEEQxYJdiRRCssiuy2RSS+wyxExTrgJUJqbawDNGwRUCJmpA/QNJYJQqCTQLrjyZR8VeRFCExChaGQGwkKlEnxczT++6bH2dm7vO+t+sXHuidOXPne+acM+fM3FVaa3xQSr34d6hf27JtjxWSnxrFSyeFPHgUsFLIg0MBK4k8NBTQFoFJIQ+g+h3aXL0SvEry4HCBlUQeYHXJC9tEmxaYIr863uXVYhSxp69cV/vYKGBUFli3LBe8idByQFYesFyQlQf4BoqZURcIzSsrD4i9DOgB54Fut4uXUPjn4mtTWusBraW4wAxwW2s9VfoDdgIXgfczZN8DbgA9R9s8cMvT9ilwZ4iV1jr6szgJ/CDpHxlrB3ANqDJk54HvgB2Otgq4Ccx5ZM8BZ4aeJyjgOvBFIXkvAYHsLMas5z1tZ0NKBf4EDgcV4LMIi2c5E5cQEMhWluCsp1372mz7FPDIuoZbAT6XqPn/U+ANx8SGBk0lEJGdsz7vXV3BGJvtAk47FRCKCRb7gfsOUudjCighEPPrhHE+AR4E+LnJ1zqcAH6qPRMFshICEr9OGOuUXSy/AgLCAEvAN/b/okBWSoCIXyeOdcsu4nCbQBhrPh+SEMjaJFBIfhXwEPjSpYBgNWgzwGlgvSW0CGzTWt8MydkXjUv+vBtYC3zvbBWs/l7gMYWRuKPVnwd+xuwAzj6S84AKs/ofaa2vFqxEEZRSFSaXvyDsP4shfxr419dPUgvsA66MAfnPE/svAtuAtzBB0A2BC9wDPuvQjJNqBxp5B3AfWPBxjQ22AXgOvN0iIVH2WPNhce1AI+/ABL//7PM0BVj0gKctk49mj7ZvUu2AI+/AlN3eAChRwGEaKXABebEpk1E74Mg7gCOYKjZbASeBJc8ERWZs+4tNuenDhUr/EThTooAbwFEHeZEZa51myk0fbkEBt4FDyQqo4Tmwq/Y8NSKLTdnlw4Xk12D2f28AjCmgAp4A6+yz1IicZMouHy5UwBbMGcaGXAUsAH/VViclIrdqyhnkK+AY8EeIvNbhVHgTcMdmVQcRFkE2BT0ILOgOssdG1ng3KhCwgCVMHp0UkemwDKYWo4BfiQRApwvU8Axzjt6JGWeQH4hRwN/AnlwFvGMVsK9rYkLyAzEK2IhJgadjCvDFgL3AQ6316agPjQjS8tcTo3qY67G7Dasegq8cfgz8njDfViEtf5VSc8BXwDE9GKAr4JLoZR4XWAK+7cici0+cgQvAcRc/aQz4B/i4gERSrVCTa+XEGbP97c9VwCZMBrW5gLy4VmiQKj5xBt7EXIPN5CqgAh5kks+6+aXg6swx1gd2AZ0uLlHAIeCXjBdn3fzSYvlrx1skcgZQ/7m2wVngN0jaivonsO9qrS+H+jbkKuBr4IBuL23ejgmOIri2wRngcsJWVPHywiSF/Khqhq2EToGb87BmU5+YxpwD9L+zCWUSStjPhVX2PalyknF7wMUmNxdcLvDiSis0wLh8XO1Cf25Kqejcsj6XnwTykPi1eA6pSScPNgaM84pKkcth4Ap7pZEHYcAbZxT/kUWu4DigDdedmlTydZRwEH0svZyxbP9eQIrXCuh6Al3jtQK6nkDX+B+eWGPcbyXoFQAAAABJRU5ErkJggg==',blockFill:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAADIUlEQVR4nOVbS24bMQx9LHIgdxG4iwDjG7VHCHqernIBp0A3XRTNjdhFxsDUHkt8pCgJrYDZ2EOJj0/8GhZVxf+8Pow4VEQWETmNOPt6dTeAiCwAnnufe3epKvUAWACcWLlV9gnALwCLRz7joW5AhD0ROQL4AuCzqn737NFq/eWCPdgDcACgAI5RxhC4gRv582UPq9ARwDcAT84DXwAcGoE/ew2wR2IqewAeAfz23BqL8qT8Lolp7K2ybwAeG4B338AaiSnsrQe+NGI+FD9qJKawtyrcyufd8cNCYip7QfCh+GElMY29BsxHbqCZxGEgWyhf2MNMoqwC0ywRUQAfVfUtYe8FgKjq6+WzId1gaamqJIJ/3jvwn39QKKIeWlt6tnXVhP24+d4aA/b8Z4ZV0ktEDnhPpZ9U9eeevCkGZA4xItOhkl7rd1/xHlB3wQMwNUNpQwwEuruSXiCKqNohoSYky7AlvUAWUaVDmg0xWhq2pBccRVTpajYZYrQ0bE0vOMr4vU3oJgTGMVXEsB69aAOw/rORqQayCACPXrQBXP5jDGQRAB69vAag/McayKIAPH5tION0YwAHK6ZA1hpAA/DnkAEyM0Qy+F13ZTdJicQdwN8vnEjmUyIxCcaUcjfvF92V2WSGQSnVO1jc1Xrw8EBmTbmb903uOppNK5NU78C460jwpqvMpNzN+2Z3HQHefJU9KZcu6BowWWVx8775KvdKuVHwTERmqsduKdcLno3I5qvcO+V6wLMRmbrKvVMuC56NyEOrR0uMYjczR+TR1aM1Rlk384zJhlWPVKo1WnJ4E0SA52JUZbMpmiACPD1xrm04QxNkKrY8VWPVAKMfcyCLTJxHgyyASp84pxuA7RU2cl0mzqkGYHuFK1DdJs5Z4F2//HoD2VQGYPPwRm7IxJlh5mR4z/XL78hiy6qcJRX58nCHYqtEYE3Qmooiv/ymFls1AkuC1lQ0ba9gIfCeoMmXe1zfAHgbgXcYtY6vhvcKEQJvDDAqFTUGzw1urgSn9GUCPD+42VyZKX2ZZJ4m8CI8pS8T4N0ETveHCc+K/MniD0Ph+Fyz0REkAAAAAElFTkSuQmCC',grid:null,lensConcave:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAADBklEQVR4nOWbTU8UQRCGnxLiQRk+IpIoqGsUiURueMef6c1fYrybmAAeFL/WBQzGGGABYwxQHno36e2dGS5M1YZ+b/2R7MtDVXdPTY+oKjlr3PLHRGQVeAl0L5h6E1hT1T9NezIFABwB56r6omqCiMwCr4BTC0PXLH4k0hdARWShZs4z4EBV/1kYMgWgqqfAFrBSM20J+GDjyD4CAL4BqzXjTwiQTOQB4B2wXDO+Anw08uICYJ2Q50MSkQngBlccQJsKAMA8sK+qf63MmANQ1XOgLSKtkuFlAiAzeUQAhD+yVdJ/D/hhacQLwCbwvKR/EfhkacQLwBYwV9L/GNixNOIFoEMI91SzwFdLI14ADoCpuENECoKf35ZGPBfBNAKmgRNVPbM04gJAVTvAgohI1L0A/LT24hUBEGoCM1H7ESE1TOUJYBu4H7XvYnwIAl8Ah4S872uq12cq7xSId4JJMgOQRsAkF9cKL13eAOIIEODc2sQoASgIRVNTea8BRdQuyGwNgBD2fRVkdg44JCx8fQlg/prKE4AyGAETZLYLdBmMAMhsF0hVkFkEDKlXMDXVSAHw0CgBOBaRdE1oXKMEoMvgrmCiUQIwTmYAXJ7/U3kCSP/bJww+G5holCJAcfDjCSA9+GQXAWkKKDBmbcITwC3gOGorgyUyE3kCuA78itr7ZJYCaRV4l/B2yFTei2AMIK0Sm8g7Avaj9hGZpcAdwj2BvnYIl6RM5QJARMaBCVWNzwFDdwYs5BUBZZehtgkvSE3lBWCG4fJXVttgWQQcAFgXRbwATJM8CvfqgXsM3hloXF4A5gkHn1RnwG1LI54p8L2kf536m+SXLi8AS8D7kv4OVz0FRGSMkAKdkuGrD4CQ493kENTXBtVX6RuRB4Bl4HPFWJvyK7SNyQPAAyouRPe2wsOKbwkakQeAReo/inoNrNlY8QHwkPIFsK9N6r8qu1R5AJgj7PdVeku4NmsiUwAiMg1MqupezbQN4KmRJfNvh1vAmIi8uWBeISItVW03bUhy/3z+P7J+r1uTZpY+AAAAAElFTkSuQmCC',lensConvex:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAACr0lEQVR4nO2bzU8TQRjGf28TvSC0epCKtGpEeyBELt49cvO/9WzCP4DBzygIJRYwgmUxionx9TDb0Gx39rbvu3F4kiazM4d98ttnPnamK6pKymp53VhENkRkU0Re5r8HHj7cAACPgReq+gw4yK/N5QngEfAxL7/Pr83lCeAh8DYvfwAGHiY8AawAu3l5H7jjYcIFgIgMgF1Vvcir3gFrHl68ErAGfJpcqOoP4HMOxlReAPrAqFB3CJhPhV4AVoCvhbpDoGdtxAtAF9gp1I2AJWsjXgDuAsNC3TEOawEvAEuEqW9aO8CitRFzACKyDByp6p9C05CQDFN5JOAmkJXUnwLzxl5cAHSA82Klqv4FjvKEmMkDwDKza4CJMkJCzOQBYBH4HWkbYbwW8AAwR+jvZfpCWCWayQNAj9k1wERnhDHCTB4ABIhtRJ5jPBN4AGgTnnSZlADITB4AFogDuABuG3pxS8A40vYNuGHopXEJOMvbzdS0QTD5MeCUBABAPAEt4JqlkaYlICOBQRCNn8gmMQY0Sk0D0CKFLlCheeC75Q2bBsBcVwC8DXjLA0AmIu1IW5vyHePa5JWA2FxvugYApwQQnnSZqjZLatFVAqxvSHjCsQQskMAYUNUFOiTQBaq2vq8z+8eJWtW0BNwCfhl6aVwCqvYKalHTBsEu8NPQi1sXiO38zgEnhl5cAAyJnwBXnRvWIg8AY6pXgv/9fsABsFqsnHpBip0a1SIPACeUjwEdIKvYMK1F5gBUdQwgIsWp8B4hHabyehnaA+4X6pIH0CNxAH2Mp0DwA7BPiPy0kgKwx2wCVkkcQF9Vi3+hr11eh6NbwLqItABEZB3Y8vDieS7wmssUPAW2PUx4A3iSl7uEbwfN5Qlgm8tP5QYk2AVeARsisgk8B954mJDUP5//Bz4xl28o9LCEAAAAAElFTkSuQmCC',mirrorConcave:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAC4UlEQVR4nOXbvWsUQRjH8c8kKkG9SLQSTQohoCAYG7VQon+BRUALwb9AiCj2wV6x8Z+wUSxFUDGFIqKFglqIGBGC4Ft8KQTHYvfCed5LCm8Gbh5Ybmfmudv5PTsv352bFWOU+kCsP2dxEzN9/NVf+v91yRSAJzhVf86uRfygAhDaL5LCQgi3MI0TMcZHPfxWzwdVz5GB/GoPq0UtY7GP+MPN80HepOQBqO0GNnQrrMVfY7DiyRCAWtArTHYqDyHMYl7VPdJUKNNA+BkjbXmzuIOjyeqRMQDPMd2SPozH+swK//vINQbAS+yEEMJBnMV8jPFeykqsS3mxNnuHqRDCDB7gUIzxYepK5A7AEcxhf4zxaTfHJg8MYlDM2QWWcByX1iJ+UJYlALWod3jWq88PMwnCJ3RVNewkCG+xvVPB0JNgfXzFeAhhtLU8NQnmbAHwHtuaiVr8Aq7GGBdTVCB3AJaxg9VmfxkLMca7qSqQkwPgG7a0kWCSO9+03AFYwT5cUSAJUk2Fp5VIgrWoX7ifkwSztIAWUV/xfQ1+Q0mCVIPg5i5+w02Ctajf+KeNpyTB5F2gTdAKGq0ZNQydUQgJ/mU5SDD3NBjVXaCFBM+lXBbLHYAfmCiZBH+qWkCRa4KwHnsVTILwptQ1waZ9WovfsJJgL78iSLCjlUSCI9pWhksjwXHVEyHKJMFx1fNAsSQYEEsmwYZqPaBYEmzgmIJJMOB2ySQ4odoW089vaElwE7508SuCBBs6BKAkEpzQAkKUR4IBH1cTBZLgJtWGyfJIMISwARtjjCulkuBOLJe8T3ArRnFRRhLMGYBJ7MFcqSS4G9dL3ic4hhc9/IabBFVjwFKngiJIMIQwpdou+5eVRIKb8bo1IwcJ5npbZAyP2/KyvDGSaxqcwodmokQSnFTtElUqCe7Ch7rPn9eHBAdpuQKwTfWP0BWczSWefAGYwQGcjD1en01hyQNQk+ARXMgtHv4ARxzm0RPP27YAAAAASUVORK5CYII=',mirrorConcaveMore:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAADlElEQVR4nOXbvYsdVRjH8c+jrq6CZokEFaMuKUSDWTfBoMXiBauAgmBhIRZC7HxJYv6BpA0qgtj5F1iICJLKQklQUZMQYYOKEhViIUhWVATFY3Fm1vF65251zwl3fjCwd+ZZ5nmeOXOe75wXKSWzPpBwXfP3CO9idYv/GWHvrH27ShmdwJGI2I/X8EpK6VyfcUSs4ShumrlnhVrAbpxvjv1b2K7hEtZK+HbNzDOctY7f8E5K6dM+o+bJP4snU0qnSjhW6hWAl7Gr72IT/Ft4s1TwFEpA07RPYjki7hm/HhEjHFLwybcq1gJSSr/jQzzaPd8EfwxvlA6+dazYIXeGb491eJ9jVNKPGp1gm+z1iEgRsQ8LOIxDVZ58o6IJaHQGT+MIHkopfVLBh02VrAKt3scTMuX1Bh8Ro4jYO2tniiYgIuAcvsKvU+yKkWCxBDTBwx8yGI167FoeOJFS+mDWfhVJQCf4tvc/jQcm2BUnwVLl7z/3wk5cGLMp+g3QHsVIsJuIJtAfI2I3dUmwRhmUUvo7Ir7ESkTskEnweA0eqJKARt/icdyNl0p0eJNUgwNafY09MglWCZ5KCWiqwnks1MRgKiSgUxIv4pYpdnNLgsgdIdYjYs8Eu2IkWKwTnABD8Bd2jNm1JFikJNYiwVbf4M6OXXESLD0eMH7qIpYp/+Rb1SLBVhvYNogxwR5dlkeKj6k0JliTBMkJWMEzgyPBpmO8jJ+GSoLkBCzU8KFVTRLcym7uSbC9//98GBIJ/imXwq7doEjwatzYsRscCS7JHWE1EiySgB4KpElAQ4LPGyAJLmHRgElwCfvkJz9IErwNJ4dMgov4rIYPrWqT4K34rsduECR4hwkJmLt1guNlsIPB32NbzTnCmiS4jI2U0kbHblAkeBd+aH8MkQRX8AWbs8ODI8FVeWKk6jrBmiS4HdfjVRVnh6skICKuxX3Nz8GtEyTz/y48lSqvE4wpn6qzuWEuia/jhpTSwSl2I/ySUjo7S39qkeB2vDfFbq7HBBdlCPq4x26+xwRxL35OKV2aYDf/JBgRB/DR+LUhzQ7fL2+c2NRgZocjYqc8DHamc25QJPgwzqa8faZt9lVJsPS3wCM4BRHxoH93jFQbEyxZBm+XF0SdjohVuQxW3zFS8hV4DBfkTvCovGOkd/tsKZV8BQ7Iq8K23DtcUkVaQNPkb8YLOJimbJ8trVKvwIsy/z93JQUP/wDTGOt5g1aRMQAAAABJRU5ErkJggg==',mirrorConvex:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAC2UlEQVR4nOWbS2sUQRCAv1oEPeya9YU5+Ag+wIP4JEQhmL+gB8+e1KNB/0COgg/0nL/gMSdvggfFS0RBEARxSbLoIcuO5Jjy0DPr7riTrOzMbDFVsMx0Vc/OdHX31NfT3aKqWBARuQncUdVbGfbeeZ7PXMvtn8aXi8DHYQYRWUjO864wSw6YAb6nlXHhlyD/woMtB1wFVvsVIjIPPAeWCuuqqjrxH6EiOindHPAKmC/y3nuKcet/ywzQShIicgl4B1xT1fdF3tiKAy4An6HX5x8Bl1V1NeuCJCqM2zWsOOAMsC4is8ALYHGUwuchVhxwOD4uA3dV9UNWxrx5wIoDTgCngAdlFh7shMHzwFNVfZOVobIkKCI1Qkt8vUOeSpNgE0BVu8OMRZOghXfAASAaZugjwYdFkaAFBxwH1tNKEZkDFgkvxrdF3dyCAw4BW/0KbyRYB9pJwiMJTgMbAJMgQQtRoAFEcc0vA/fK5AErDmgSmn3pJGihC+wDHjNin4eKkSBwFLixS+ErTYINoJNl9ECCDZyTIMB2WuGJBOvAwEDIGwkOiEcSFOIuMAkStDAnsBYfFwgTI7O75M/12S2EwU7c5ydCglJUeBn5AURawDEckyCqKp5JcEfxQIKZ4okE/xFPJIiI1FR1uy/tigQjYD/xiNAjCfbE8+xwLa75lzicHY6A68B9nH4T/A2s4JgEFbjimQQjYCrL6IEEu2Q4wAsJdgkcMCCeSHCLv4ukAH8k+AvYmyTKJkErL8E6DJDgM0+zw5vAlOfZ4TXgNI5nhzeBs8BtryTYIoTCT1kZKk2CqhoRcLg5zO5lx0gEHEwry9gxYsUBbcJ6wZ6kSDAzKowrVhzwk7BaHBggwSdFYjDYiAIA34Aj4JMEIbDA9CRI0EoLaBE2TZS+Y8RKC/hBGBG63THSJgyIXJJgUqAvwLlh9kqTYJ9sACfTSg/fBBP5Slgo0ZMyvgn+AWIYCr3NpIIQAAAAAElFTkSuQmCC',mirrorConvexMore:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAADgUlEQVR4nOXbv4tcVRTA8c8Jsjbij7gQQjRYqIEUMVFjFlkc0c5C1MK/wIBFIGI6sQhik8KghZ3Cgl0INopiFZWw6EpiUKOIRNcfmMLCwWhj4bV4b5a3k52dhX1v5jL3wIN5717mcn7e75x3R0pJjhd2od+4X8TvWGxznRvkKy/gFERED8fwbErpfKurTNvTI7w/j+9xM3o4h0e7WCvXCHgGH+AATuPFlNInXSy0o4sv3Y5ExBwew9eqNDjelfLIMgIexm68jYWU0uddLpZdBOAobsGhzZSPiF5EHNruYlkZICL24Am8mlK6tMm8RZxQFcntybQrfqPywxLeHTOvVR7IIgIiYvBxDu9tMm8Rz2mTB6bt+Yb353ABuyfh+awioFbwIVxOKV0dHq9J8LgOSDALA9TyOC4PP6yVP4k321aevAywDxebD+qcP42TKaWPO1l12vnfyPHfcFPj/gjOajnnh68sSDAiFnAxpfR3fX8Qn5kACWZhANyH71jL+RMqEtwMhnr4K6X05XYWzqUGPIgrEXEYr+O1McrPFgnivOo3wCUcHjO3VR6YuvK1UtdUBNjbgvJLbSmfhQGwFwkHJ+n5wZVDETyAM2l8weukJ5hDEdyFf0cNdk2COUTAHbiy0UCDBGe6J3gXVocfRsQRhfQEb0W/+aA0ElxngBJJcM0ARZIgflLVgZ4pkGAOKQD78byq4H0xatJM9gRVEVA0Cd6GnSmlP0dNmHUS7OO/UYMl9ASTKgquk0n0BHNIgb5qK1wnQyTYuucHkoMBrpPSSHBdBJRIgmsGmAYJ5hAB1zBfe/QNHN0CDJ3R0paYgwGu4h48qVASPKZwEvxZ4T3BVdw5arBrEpx6CtTh3ceOEWF/wZj3Bdu5cogA+FXVE1iTknqC8I3qBemPTJYEc4mAb3E/azn/isLOCf6ggqHyeoJ1sduPFQW/HVYr9dQWlF9qS/mU8gChgXyKG0cNtv0bYCBZ1IDau8u4d6PxUs4JLqtOhq2TIkiwkeMrmB/K+SJIcCArquPyxZHgQJaxEBFfmRAJRmMbmrpExF68g3/wUiqkJ9iUX1TNkY/GKD9TPUGs+9PEWezZZF6rPJBFBDSUh/exLyJ2bjCv9Z5gFgYYSL01reIPPNIca3j+rZkkwaFi/CGeHtyUQoJNOYfbI+Lurkkwq22wKRHxsuoY7QM6PCf4P+YrwG7bs8azAAAAAElFTkSuQmCC',mirrorPlane:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAABLUlEQVR4nO3WsU0DQRBG4TeImF7IQe6CCgiJoAGacBN0gURMS0OytixLZ+Pg/r3gvcjB6m5n7+T7qruZUVUdfnZ316W1a3Y346Ynw19bt6uqxzX3Ej+A0+EvvX1V9QR8AA9r7ud+zYufd+PwX8BLd/+suafYG3Dj8K8EhofwGwDbefKHYgdw7WtTVTvgjeDwMOkrcN4Y/hPYJ4cHqFkOOG6gqoFf4L27v+P3n3kA44+xgef0kz/uQQlOSAmOlODyOiWIElSCkZSgElSCSjCeEhwpweV1ShAlqAQjKUElqASVYDwlOFKCy+uUIEpQCUZSgkpQCSrBeEpwpASX1ylBlKASjKQElaASVILxlOBICS6vU4IoQSUYSQkqQSWoBOP9V4KJNivBVNED2NrwAH+gn5InJVoetgAAAABJRU5ErkJggg==',screen:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMjEvMTXu5QccAAAAwUlEQVR4nO3b0Q2DQAzAUK7q/iunv9ABeB+xF8BYOl0UwZmZazMfLaApgBbQFEALaAqgBTTrA3zlw885jylsZs7bDjTAdZmXvrP+CBRAC2gKoAU0BdAC/7PA2/AAzQGYAmgBTQG0gIYH6BrsGrQUQAtoCqAFNOsD8K3wfQ5oLQ5YfwQKoAU0BdACmgJogfYBzQGWAmgBTQG0gIYH6BrsGrQUQAtoCqAFNOsD8K2w/mL89N/gcgqgBTQF0AKaAmgBzQ8DMSh/3VpjewAAAABJRU5ErkJggg==',mode:['#c73838','#3333cc'],drawMethod:'wireframe'};window.LaserCanvas.theme.set=(function(){"use strict";var style=document.createElement('style');style.appendChild(document.createTextNode(''));document.head.appendChild(style);return function(name,fnComplete){var current=window.LaserCanvas.theme[name],themeDomElements=function(image){var k,el,html='<img src="image_url" />',url=current[image],els=document.querySelectorAll('[data-theme-image="'+image+'"]');for(k=els.length-1;k>=0;k-=1){el=els[k];el.innerHTML=html.replace('image_url',window.LaserCanvas.theme.baseUrl+url);}},loadImages=function(){var k,img,images=current,semaphore=1,ready=function(){if((semaphore-=1,semaphore)>0)return;fnComplete&&fnComplete();};delete window.LaserCanvas.theme.current.drawMethod;for(k in images){if(images.hasOwnProperty(k)&&k!=='grid'&&k!=='drawMethod'&&typeof images[k]==='string'){semaphore+=1;img=new Image();img.onload=ready;img.src=window.LaserCanvas.theme.baseUrl+images[k];themeDomElements(k);window.LaserCanvas.theme.current[k]=img;}else{window.LaserCanvas.theme.current[k]=images[k];}}
ready();};if(current.grid){style.sheet.insertRule(`[data-theme="${name}"] .laserCanvasFrame { background-image: url(${window.LaserCanvas.theme.baseUrl + current.grid}); }`,0);}
document.body.setAttribute('data-theme',name);loadImages();};}());window.LaserCanvas.localize=(function(){"use strict";var
dict={"buttondark":"Dark","buttoninspect":"Inspect","buttonlayout":"Layout","buttonlight":"Light","buttonline":"Line","symboldielectric":"D","symboldispersion":"DC","symbollens":"L","symbolmirror":"M","symbolprism":"Pr","symbolscreen":"I","elementdistancetonext":"Distance To Next","abcdsag":"Sagittal ABCD","abcdtan":"Tangential ABCD",},localizeAttribute=function(parent,attr){window.LaserCanvas.Utilities.foreach(parent.querySelectorAll('[data-'+attr+']'),function(){if(attr==='localize'){this.innerHTML=localizeString(this.getAttribute('data-'+attr));}else{this.setAttribute(attr,localizeString(this.getAttribute('data-'+attr)));}});},localizeElement=function(parent){localizeAttribute(parent,'localize');localizeAttribute(parent,'placeholder');return parent;},localizeString=function(phrase){var str;if(dict&&phrase){str=dict[phrase.toLowerCase()];}
return str||phrase;},loc=function(arg){if(typeof arg==='string'){return localizeString(arg);}else{return localizeElement(arg);}};loc.set=function(lang){dict=loc[lang];};loc.elements=function(){var k,el,text,els=document.querySelectorAll('[data-localize]');for(k=els.length-1;k>=0;k-=1){el=els[k];text=loc(el.getAttribute('data-localize'));el.innerHTML=text;}};return loc;}());window.LaserCanvas.localize.de={"buttondark":"Dunkel","buttonlayout":"Arrangieren","buttoninspect":"Untersuchen","buttonlight":"Hell","buttonline":"Liniert","symboldielectric":"D","symboldispersion":"DK","symbollens":"Li","symbolmirror":"Sp","symbolscreen":"i","Plane mirror":"Flacher Spiegel","No lens":"Keine Linse",'linear resonator':'Standwellenresonator','end coated resonator':'Resonator mit Endkristall','ring resonator':'Ringresonator','propagation system':'Lichtausbreitung','system':'Optisches System',"angle of incidence":"Einfallswinkel","brewster":"Brewsterwinkel","crystal":"Kristall","curvature":"Kr&uuml;mmungsradius","curvature face 1":"Kr&uuml;mmungsradius 1","curvature face 2":"Kr&uuml;mmungsradius 2","delete":"L&ouml;schen","distance to next":"Abstand","face angle":"Schnittwinkel","flip":"Wenden","focal length":"Brennweite","plate":"Blockelement","radius of curvature":"Kr&uuml;mmungsradius","refractive index":"Brechungsindex","thermal lens":"Thermische Linse","thickness":"L&auml;nge","type":"Schnittart","abcd sagittal":"ABCD Senkrecht","abcd tangential":"ABCD Waagrecht","annotations":"Anmerkungen anzeigen","calculated values":"Berechnete Werte anzeigen","distance":"Distanz","element properties":"Elementeigenschaften anzeigen","extended data":"Erweiterte Daten","mode":"Modenradius","mode size":"Modenradius","mode spacing":"Modenabstand","optical length":"Optische L&auml;nge","physical length":"Physikalische L&auml;nge","property":"Eigenschaft","rayleigh":"Rayleigh","sagittal":"Senkrecht","separations":"Entfernungen anzeigen","stability":"Stabilit&auml;t","symbol":"Symbol","tangential":"Waagrecht","unit":"Einheit","waist":"Taille","wavelength":"Wellenl&auml;nge"};(function(lang){var la=/^(de)/.exec(lang);if(la){window.LaserCanvas.localize.set(la[1]);}}(navigator.language));window.LaserCanvas.Math={};(function(){"use strict";var Vector,Matrix2x2;Vector=function(els){var k;if(els.length){this.length=els.length;for(k=0;k<this.length;k+=1){this[k]=els[k];}}else{return new Vector(Array.prototype.slice.call(arguments,0));}};Vector.fn=Vector.prototype={constructor:Vector,length:0,push:[].push,splice:[].splice,foreach:function(fn,bvec){var k,val;for(k=0;k<this.length;k+=1){val=fn(k,this[k],bvec?bvec[k]:undefined);if(val!==undefined){this[k]=val;}}},norm2:function(){var norm2=0;this.foreach(function(k_notused,vk){norm2+=vk*vk;});return norm2;},norm:function(){return Math.sqrt(this.norm2());},normalize:function(){var norm=this.norm(),u=new Vector(this);if(norm!==0){u.foreach(function(k_notused,uk){return uk/norm;});}
return u;},atan2:function(){return Math.atan2(this[1],this[0]);},add:function(bvec){var a=new Vector(this);a.foreach(function(k_notused,ak,bk){return ak+bk;},bvec);return a;},subtract:function(bvec){var a=new Vector(this);a.foreach(function(k_notused,ak,bk){return ak-bk;},bvec);return a;},scale:function(s){var a=new Vector(this);a.foreach(function(k_notused,ak){return s*ak;});return a;},negate:function(){return this.scale(-1);},dot:function(bvec){var dot=0;this.foreach(function(k_notused,ak,bk){dot+=ak*bk;},bvec);return dot;},normalizeDot:function(bvec){var ndot=this.dot(bvec)/
Math.sqrt(this.norm2()*bvec.norm2());return ndot<-1?-1:ndot>+1?+1:ndot;},cross:function(bvec){if(this.length===2){return this[0]*bvec[1]-this[1]*bvec[0];}
if(this.length===3){return new Vector([this[1]*bvec[2]-this[2]*bvec[1],this[2]*bvec[0]-this[0]*bvec[2],this[0]*bvec[1]-this[1]*bvec[0]]);}
throw'Cannot calculate cross product for '+this.length+'-vectors.';},normalizeCross:function(bvec){return this.normalize().cross(bvec.normalize());},rotate:function(q){var cs=Math.cos(q),sn=Math.sin(q);return new Vector([this[0]*cs+this[1]*sn,-this[0]*sn+this[1]*cs]);},matrixMultiply:function(mx){var self=this,n=this.length,ret=new Vector(this);ret.foreach(function(r,ak_notused){var c,s=0;for(c=0;c<n;c+=1){s+=mx[r][c]*self[c];}
return s;});return ret;}};Matrix2x2=function(a,b,c,d){this[0]=[a,b];this[1]=[c,d];this.length=2;};Matrix2x2.fn=Matrix2x2.prototype={constructor:Matrix2x2,length:0,push:[].push,splice:[].push,multiply:function(mx){return new Matrix2x2(this[0][0]*mx[0][0]+this[0][1]*mx[1][0],this[0][0]*mx[0][1]+this[0][1]*mx[1][1],this[1][0]*mx[0][0]+this[1][1]*mx[1][0],this[1][0]*mx[0][1]+this[1][1]*mx[1][1])},trace:function(){return this[0][0]+this[1][1];},toString:function(){var mx=this,fmt=function(r,c){var str=mx[r][c].toFixed(3);return str;};return'[['+fmt(0,0)+'  '+fmt(0,1)+'] ['+fmt(1,0)+'  '+fmt(1,1)+']]';},isEqual:function(mx,tol){if(tol===undefined){tol=1e-15;}
if(this.length!==mx.length){return false;}
for(var r=0;r<this.length;r+=1){if(this[r].length!==mx[r].length){return false;}
for(var c=0;c<this[r].length;c+=1){if(isNaN(this[r][c])||isNaN(mx[r][c])){return false;}
if(tol<1){if(tol<1&&Math.abs(this[r][c]-mx[r][c])>tol){return false;}}else{if(tol>=1&&this[r][c].toPrecision(tol)!==mx[r][c].toPrecision(tol)){return false;}}}}
return true;}};Matrix2x2.eye=function(){return new Matrix2x2(1,0,0,1);};window.LaserCanvas.Math={Vector:Vector,Matrix2x2:Matrix2x2};}());(function(LaserCanvas){LaserCanvas.Sellmeier=function(fnReady,thisArg){this.search='';this.eq=null;this.applyAction={fn:null,thisArg:null};this.panel=this.init();this.activate();this.load(fnReady,thisArg);};LaserCanvas.Sellmeier.refractiveIndexUrl='js/refractiveIndex.js';LaserCanvas.Sellmeier.formula=(function(){var
createFormula={"1":function(c){return function(l){var k,l2=l*l,n2_1=c[0];for(k=1;k<c.length-1;k+=2){n2_1+=c[k]*l2/(l2-c[k+1]*c[k+1]);}
return Math.sqrt(n2_1+1);};},"2":function(c){return function(l){var k,l2=l*l,n2_1=c[0];for(k=1;k<c.length-1;k+=2){n2_1+=c[k]*l2/(l2-c[k+1]);}
return Math.sqrt(n2_1+1);};},"4":function(c){return function(l){var k,l2=l*l,n2=c[0]
+c[1]*Math.pow(l,c[2])/(l2-Math.pow(c[3],c[4]))
+c[5]*Math.pow(l,c[6])/(l2-Math.pow(c[7],c[8]));for(k=9;k<c.length-1;k+=2){n2+=c[k]*Math.pow(l,c[k+1]);}
return Math.sqrt(n2);};},"notSupported":function(l){return l;}};return function(type,coeff){if(!createFormula.hasOwnProperty(type)){alert(LaserCanvas.Utilities.stringFormat('Sellmeier type `{0}` not supported',type));createFormula.notSupported;}
return createFormula[type](coeff);};}());LaserCanvas.Sellmeier.prototype={init:function(){var panel=document.createElement('div');panel.innerHTML=LaserCanvas.Sellmeier.panelHtml;panel.className='sellmeierPanel';LaserCanvas.localize(panel);panel.querySelector(".toggleReferences").onclick=function(){var attr="data-show-references";if(panel.hasAttribute(attr)){panel.removeAttribute(attr);}else{panel.setAttribute(attr,"true");}};document.body.appendChild(panel);LaserCanvas.Utilities.draggable(panel,{handle:panel.querySelector('.dragbar')});return panel;},activate:function(){var self=this;this.panel.querySelector('[data-action="close"]').onclick=function(){self.hide();};this.panel.querySelector('.materials input').onkeyup=function(){self.search=this.value;self.updateBooks();};this.panel.querySelector('input[data-field="wavelength"]').onkeyup=function(){self.updateCalculation();};this.panel.querySelector('button[data-action="apply"]').onclick=function(){if(self.applyAction.fn){self.applyAction.fn.call(self.applyAction.thisArg,self.updateCalculation());}};},load:function(fnReady,thisArg){var
ready=function(){this.ready();if(fnReady){fnReady.call(thisArg);}};if(!LaserCanvas.Sellmeier.refractiveIndex){LaserCanvas.getScript(LaserCanvas.Sellmeier.refractiveIndexUrl,ready,this);}else{ready.call(this);}},ready:function(){this.updateBooks();},show:function(){this.panel.setAttribute('data-visible','true');},hide:function(){this.panel.setAttribute('data-visible','false');},destroy:function(){this.panel.parentNode.removeChild(this.panel);},setPanelTitle:function(title){this.panel.querySelector('h1 label').innerHTML=title||LaserCanvas.localize('Refractive index');},setPanelElement:function(sel,html){this.panel.querySelector(sel).innerHTML=html;},clearList:function(field){var k,opts=this.panel.querySelectorAll('ul[data-field="'+field+'"] > li');for(k=opts.length-1;k>=0;k-=1){opts[k].parentNode.removeChild(opts[k]);}},activateList:function(field,fn,thisArg){var
onclick=function(){fn.call(thisArg,this.getAttribute('data-value'));};LaserCanvas.Utilities.foreach(this.panel.querySelectorAll('ul[data-field="'+field+'"] > li[data-value]'),function(){this.onclick=onclick;});},selectListItem:function(field,value){LaserCanvas.Utilities.foreach(this.panel.querySelectorAll('ul[data-field="'+field+'"] > li[data-value]'),function(){if(this.getAttribute('data-value')===value.toString()){this.setAttribute('data-selected','true');}else{this.removeAttribute('data-selected');}});},updateBooks:function(){var re=null,sel=this.panel.querySelector('ul[data-field="book"]'),mats={};this.clearList('book');if(this.search&&this.search.length>1){try{re=new RegExp(this.search,"i");}catch(e){re=null;}}
LaserCanvas.Utilities.foreach(LaserCanvas.Sellmeier.refractiveIndex,function(k,mat){var opt,title=mat.book;if(!mats.hasOwnProperty(title)&&(!re||re.test(title)||re.test(mat.comments))){mats[title]=true;opt=document.createElement('li');opt.innerHTML=title;opt.setAttribute('data-value',mat.book);sel.appendChild(opt);}});this.activateList('book',this.selectBook,this);if(!re){this.selectBook(LaserCanvas.Sellmeier.refractiveIndex[0].book);}},selectBook:function(book){var selectedValue=null,sel=this.panel.querySelector('ul[data-field="source"]');this.selectListItem('book',book);this.clearList('source');LaserCanvas.Utilities.foreach(LaserCanvas.Sellmeier.refractiveIndex,function(k,mat){var opt;if(mat.book===book){opt=document.createElement('li');opt.innerHTML=mat.source;opt.setAttribute('data-value',k);sel.appendChild(opt);if(selectedValue===null){selectedValue=k;}}});this.activateList('source',this.selectSource,this);if(selectedValue!==null){sel.value=selectedValue;this.selectSource(selectedValue);}},selectSource:function(source){var mat=LaserCanvas.Sellmeier.refractiveIndex[+source];if(!mat){return;}
this.selectListItem('source',source);this.setPanelTitle(LaserCanvas.Utilities.stringFormat('{0} - {1}',mat.book,mat.source));this.setPanelElement('[data-field="comments"]',mat.comments||'');this.setPanelElement('[data-field="references"]',mat.references||'');this.setPanelElement('[data-field="rangeMin"]',mat.range?mat.range[0]:'');this.setPanelElement('[data-field="rangeMax"]',mat.range?mat.range[1]:'');if(!mat.hasOwnProperty('eq')){mat.eq=LaserCanvas.Sellmeier.formula(mat.formula,mat.coefficients);}
this.eq=mat.eq;this.updateCalculation();},setApplyAction:function(fn,thisArg){this.applyAction.fn=fn;this.applyAction.thisArg=thisArg;this.panel.setAttribute('data-has-apply-action',fn?'true':'false');},updateCalculation:function(wavelength){var prop={},Utilities=LaserCanvas.Utilities,numberFormat=Utilities.numberFormat,input=this.panel.querySelector('input[data-field="wavelength"]'),l=+input.value,dl=1e-3,n=this.eq;if(typeof wavelength==='number'){l=wavelength;input.value=numberFormat(l);}
if(n){prop.refractiveIndex=n(l);prop.indexDispersion=(n(l+dl/2)-n(l-dl/2))/dl;prop.groupVelocityDispersion=(n(l+dl)-2*n(l)+n(l-dl))/(dl*dl);Utilities.foreach(prop,function(propertyName,value,self){self.setPanelElement('[data-value="'+propertyName+'"]',value.toPrecision(6));},this);}
return prop;}};LaserCanvas.Sellmeier.panelHtml=['<div class="dragbar"></div>','<h1>','<label data-localize="Sellmeier"></label>','<button data-action="close">X</button>','</h1>','<div class="materials">','<input type="text" class="laserCanvasInput" data-placeholder="Search..." />','<ul data-field="book"><li data-localize="Loading..."></li></ul>','<ul data-field="source"><li>&larr;</li></ul>','</div>','<div class="scroller">','<div class="parameters">','<table>','<tbody>','<tr>','<td><label data-localize="Wavelength"></label></td>','<td><i>&lambda;</i></td>','<td><input type="text" class="laserCanvasInput" data-field="wavelength" value="1.064" /></td>','<td>&micro;m</td>','</tr>','<tr>','<td><label data-localize="Refractive index"></label></td>','<td><i>n</i></td>','<td><span data-value="refractiveIndex"></span></td>','<td></td>','</tr>','<tr>','<td><label data-localize="Dispersion"></label></td>','<td><span class="infrac"><span><i>dn</i></span><span><i>d&lambda;</i></span></span></td>','<td><span data-value="indexDispersion"></span></td>','<td>&micro;m&#8315;&#185;</td>','</tr>','<tr>','<td><label data-localize="GVD"></label></td>','<td><span class="infrac"><span><i>d</i>&#178;<i>n</i></span><span><i>d&lambda;</i>&#178;</span></span></td>','<td><span data-value="groupVelocityDispersion"></span></td>','<td>&micro;m&#8315;&#178;</td>','</tr>','</tbody>','</table>','</div>','<div class="comments">','<span data-field="comments"></span> ','<span class="wavelengthRange"><span data-field="rangeMin"></span>-<span data-field="rangeMax"></span> &micro;m</span>',' <span class="toggleReferences">ⓘ</span>','</div>','<div data-field="references"></div>','<a class="attribution" href="https://refractiveindex.info" target="_blank">Data from RefractiveIndex.INFO</a>','</div>','<button class="lcbutton" data-action="apply" data-localize="Apply"></button>'].join('');}(window.LaserCanvas));window.LaserCanvas.Utilities={foreach:function(objs,fn,extraArg){"use strict";var k,n=objs.length;if(objs.hasOwnProperty('length')){for(k=0;k<n;k+=1){if(fn.call(objs[k],k,objs[k],extraArg)===false){break;}}}else{for(k in objs){if(objs.hasOwnProperty(k)){if(fn.call(objs[k],k,objs[k],extraArg)===false){break;}}}}
return objs;},first:function(objs,predicate){var index=LaserCanvas.Utilities.firstIndex(objs,predicate);if(index>=0){return objs[index];}else{return null;}},firstIndex:function(objs,predicate){var index,obj,n=objs.length;for(index=0;index<n;index+=1){obj=objs[index];if(predicate.call(obj,index,obj,objs)){return index;}}
return-1;},elementOffset:function(el){"use strict";var offset={left:0,top:0};do{offset.left+=el.offsetLeft;offset.top+=el.offsetTop;el=el.offsetParent;}while(el);return offset;},closest:function(node,selectorString){"use strict";if(node){do{node=node.parentNode;}while(node&&!node.matches(selectorString));}
return node;},extend:function(obj,src){"use strict";var
recursive=function(o,s){var k;for(k in s){if(s.hasOwnProperty(k)){if(Array.isArray(s)){o[k]=[];recursive(o[k],s[k]);}else if(s[k]!==null&&s[k]!==undefined&&typeof s[k]!=='string'&&typeof s[k]!=='number'&&typeof s[k]!=='boolean'&&!(s[k]instanceof Element)&&!(s[k].prototype)){o[k]={};recursive(o[k],s[k]);}else{o[k]=s[k];}}}
return o;};window.LaserCanvas.Utilities.foreach(Array.prototype.slice.call(arguments,1),function(index,s){recursive(obj,s);});return obj;},stringFormat:function(fmt,args){"use strict";args=Array.prototype.slice.call(arguments,1);return fmt.replace(/\{(\d+)\}/g,function(m,d){return+d<args.length?args[+d]:m;});},stringFormatPrecision:function(precision,fmt,args){"use strict";var k;args=Array.prototype.slice.call(arguments,2);for(k=0;k<args.length;k+=1){if(typeof args[k]==='number'){args[k]=precision>=0?args[k].toFixed(precision):args[k].toPrecision(-precision);}}
return this.stringFormat.apply(this,[fmt].concat(args));},prettify:function(propertyName){"use strict";var localized=window.LaserCanvas.localize(propertyName);if(localized!==propertyName){return localized;}
return propertyName[0].toUpperCase()+propertyName.slice(1).replace(/([a-z])([A-Z0-9])/g,'$1 $2');},numberFormat:function(val,useFixed){"use strict";var str,c,pt;if(isNaN(val)){str='-';}else if(typeof val!=='number'){str=val;}else if(Math.abs(val)===Infinity){str=(val<0?'−':'')+'∞';}else if(Math.abs(val)>1e4){str=val.toPrecision(2);}else if(Math.abs(val)>=100){str=Math.round(val).toString();}else{str=useFixed?val.toFixed(3):val.toPrecision(3);pt=str.indexOf('.');if(pt>-1){while(str.length>pt&&((c=str[str.length-1])==='0'||c==='.')){str=str.slice(0,str.length-1);}}}
return str;},draggable:function(el,optionsIn,thisArg){"use strict";var ptDown=null,options=LaserCanvas.Utilities.extend({axis:undefined,handle:el,onDrag:undefined,onEnd:undefined},optionsIn),up=function(){document.removeEventListener('mousemove',move,false);document.removeEventListener('mouseup',up,false);if(options.onEnd){options.onEnd.call(thisArg);}},move=function(e){var pt={x:options.axis==="y"?ptDown.x:e.clientX-ptDown.dx+ptDown.x,y:options.axis==="x"?ptDown.y:e.clientY-ptDown.dy+ptDown.y};if(options.onDrag){options.onDrag.call(thisArg,e,pt);}
el.style.left=pt.x+'px';el.style.top=pt.y+'px';e.preventDefault&&e.preventDefault();},down=function(e){var style,left,top;if(e.target===options.handle){style=window.getComputedStyle(el);left=parseFloat(style.getPropertyValue('left'));top=parseFloat(style.getPropertyValue('top'));if(isNaN(left)){left=0;}
if(isNaN(top)){top=0;}
ptDown={x:left,y:top,dx:e.clientX,dy:e.clientY};document.addEventListener('mousemove',move,false);document.addEventListener('mouseup',up,false);e.preventDefault&&e.preventDefault();}},tend=function(ev){if(ev.touches.length===0){up();document.removeEventListener('touchmove',tmove,false);document.removeEventListener('touchend',tend,false);}},tmove=function(ev){move(ev.touches.item(0));},tstart=function(ev){if(ev.touches.length===1){down(ev.touches.item(0));document.addEventListener('touchmove',tmove,false);document.addEventListener('touchend',tend,false);ev.preventDefault();}};if(!options.handle.hasAttribute('data-draggable')){options.handle.addEventListener('mousedown',down,false);options.handle.addEventListener('touchstart',tstart,false);options.handle.setAttribute('data-draggable',options.axis||'true');}},Debounce:(function(){var Debounce=function(defaultDelay){this.timeout=null;this.defaultDelay=defaultDelay||0;};Debounce.prototype.delay=function(action,thisArg,args){var extraArgs=Array.prototype.slice.call(arguments,2);this.cancel();this.timeout=setTimeout((function(self){return function(){action.apply(thisArg,extraArgs);};}(this)),this.defaultDelay);};Debounce.prototype.execute=function(action,thisArg,args){var extraArgs=Array.prototype.slice.call(arguments,2);this.cancel();action.apply(thisArg,extraArgs);};Debounce.prototype.cancel=function(){if(this.timeout){clearTimeout(this.timeout);}
this.timeout=null;};return Debounce;}())};(function(){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;}}());(function(LaserCanvas){var Variables=function(){this.names=["x","y"];this.byName={x:0.5,y:0.5};this.eventListeners={change:[]};};Variables.prototype.forEach=function(fn,thisArg){for(var variableName of this.names){fn.call(thisArg,variableName,this.byName[variableName]);}};Variables.prototype.set=function(variableName,value,silent){this.byName[variableName]=value;if(!silent){this.fireEvent("change");}};Variables.prototype.value=function(){return LaserCanvas.Utilities.extend({},this.byName);},Variables.prototype.scan=function(variableName,range,steps,iterator){var step=(range.max-range.min)/steps||1,current=this.byName[variableName];for(var val=range.min;val<=range.max;val+=step){this.byName[variableName]=val;iterator(val);}
this.byName[variableName]=current;};Variables.prototype.addEventListener=function(eventName,handler){this.eventListeners[eventName].push(handler);};Variables.prototype.fireEvent=function(eventName,args){for(handler of this.eventListeners[eventName]){handler.apply(this,Array.prototype.slice.call(arguments,1));}};LaserCanvas.Variables=Variables;}(window.LaserCanvas));window.LaserCanvas.Sellmeier.refractiveIndex=[{"book":"Al2O3","coefficients":[0,1.503976,0.0740288,0.5506914,0.1216529,6.592738,20.07225],"comments":"Synthetic sapphire, Extraordinary ray (e), 20 °C","formula":1,"range":[0.2,5],"references":"1) I. H. Malitson and M. J. Dodge. Refractive Index and Birefringence of Synthetic Sapphire, <a href=\"http://www.opticsinfobase.org/josa/abstract.cfm?uri=josa-62-11-1336\"><i>J. Opt. Soc. Am.</i> <b>62</b>, 1405 (1972)</a><br>2) M. J. Dodge, \"Refractive Index\" in Handbook of Laser Science and Technology, Volume IV, Optical Materials: Part 2, CRC Press, Boca Raton, 1986, p. 30<br>* Ref. 1 is a talk abstract in a conference program; Ref. 2 provides Sellmeier equation","source":"Malitson-e"},{"book":"Al2O3","coefficients":[0,1.431349,0.0726631,0.6505471,0.1193242,5.341402,18.02825],"comments":"Synthetic sapphire, Ordinary ray (o), 20 °C","formula":1,"range":[0.2,5],"references":"1) I. H. Malitson and M. J. Dodge. Refractive Index and Birefringence of Synthetic Sapphire, <a href=\"http://www.opticsinfobase.org/josa/abstract.cfm?uri=josa-62-11-1336\"><i>J. Opt. Soc. Am.</i> <b>62</b>, 1405 (1972)</a><br>2) M. J. Dodge, \"Refractive Index\" in Handbook of Laser Science and Technology, Volume IV, Optical Materials: Part 2, CRC Press, Boca Raton, 1986, p. 30<br>* Ref. 1 is a talk abstract in a conference program; Ref. 2 provides Sellmeier equation","source":"Malitson-o"},{"book":"Al2O3","coefficients":[0,1.023798,0.06144821,1.058264,0.1106997,5.280792,17.92656],"comments":"Synthetic sapphire, Ordinary ray (o), 24 °C","formula":1,"range":[0.2652,5.577],"references":"I. H. Malitson. Refraction and dispersion of synthetic sapphire, <a href=\"https://doi.org/10.1364/JOSA.52.001377\"><i>J. Opt. Soc. Am.</i> <b>52</b>, 1377-1379 (1962)</a>","source":"Malitson"},{"book":"BaB2O4","coefficients":[2.373,0.0128,0,0.0156,1,0,0,0,1],"comments":"Beta barium borate (β-BaB<sub>2</sub>O<sub>4</sub>, BBO). Extraordinary ray (e).","formula":4,"range":[0.22,1.06],"references":"D. Eimerl, L. Davis, S. Velsko, E. K. Graham and A. Zalkin. Optical, mechanical, and thermal properties of barium borate , <a href=\"https://doi.org/10.1063/1.339536\"><i>J. Appl. Phys.</i>, <b>62</b>, 1968-1983 (1987)</a>","source":"Eimerl-e"},{"book":"BaB2O4","coefficients":[2.7405,0.0184,0,0.0179,1,0,0,0,1],"comments":"Beta barium borate (β-BaB<sub>2</sub>O<sub>4</sub>, BBO). Ordinary ray (o).","formula":4,"range":[0.22,1.06],"references":"D. Eimerl, L. Davis, S. Velsko, E. K. Graham and A. Zalkin. Optical, mechanical, and thermal properties of barium borate , <a href=\"https://doi.org/10.1063/1.339536\"><i>J. Appl. Phys.</i>, <b>62</b>, 1968-1983 (1987)</a>","source":"Eimerl-o"},{"book":"BaB2O4","coefficients":[2.3753,0.01224,0,0.01667,1,0,0,0,1],"comments":"Beta barium borate (β-BaB<sub>2</sub>O<sub>4</sub>, BBO). Extraordinary ray (e). Near infrared.","formula":4,"range":[0.64,3.18],"references":"D. Zhang, Y. Kong, J.-Y. Zhang. Optical parametric properties of 532-nm-pumped beta-barium-borate near the infrared absorption edge, <a href=\"https://doi.org/10.1016/S0030-4018(00)00968-8\"><i>Optics Communications</i>, <b>184</b>, 485-491 (2000)</a>","source":"Zhang-e"},{"book":"BaB2O4","coefficients":[2.7359,0.01878,0,0.01822,1,0,0,0,1],"comments":"Beta barium borate (β-BaB<sub>2</sub>O<sub>4</sub>, BBO). Ordinary ray (o). Near infrared.","formula":4,"range":[0.64,3.18],"references":"D. Zhang, Y. Kong, J.-Y. Zhang. Optical parametric properties of 532-nm-pumped beta-barium-borate near the infrared absorption edge, <a href=\"https://doi.org/10.1016/S0030-4018(00)00968-8\"><i>Optics Communications</i>, <b>184</b>, 485-491 (2000)</a>","source":"Zhang-o"},{"book":"BaF2","coefficients":[0.33973,0.8107,0.10065,0.19652,29.87,4.52469,53.82],"comments":"293 K (20 °C).","formula":1,"range":[0.15,15],"references":"H. H. Li. Refractive index of alkaline earth halides and its wavelength and temperature derivatives. <a href=\"https://doi.org/10.1063/1.555616\"><i>J. Phys. Chem. Ref. Data</i> <b>9</b>, 161-289 (1980)</a> and references therein.<br> <sup>*</sup> Sellmeier formula is derived by critical analysis of experimental data from several sources.","source":"Li"},{"book":"BaF2","coefficients":[0,0.643356,0.057789,0.506762,0.10968,3.8261,46.3864],"comments":"25 °C","formula":1,"range":[0.2652,10.346],"references":"I. H. Malitson. Refractive properties of barium fluoride, <a href=\"https://doi.org/10.1364/JOSA.54.000628\"><i>J. Opt. Soc. Am.</i> <b>54</b>, 628-630 (1964)</a>","source":"Malitson"},{"book":"BaTiO3","coefficients":[0,4.064,0.211],"comments":"Extraordinary ray (e). Room temperature","formula":1,"range":[0.4,0.7],"references":"S.H. Wemple, M. Didomenico Jr., and I. Camlibel. Dielectric and optical properties of melt-grown BaTiO<sub>3</sub>, <a href=\"https://doi.org/10.1016/0022-3697(68)90164-9\"><i>J. Phys. Chem. Solids</i> <b>29</b>, 1797-1803 (1968)</a>","source":"Wemple-e"},{"book":"BaTiO3","coefficients":[0,4.187,0.223],"comments":"Ordinary ray (o). Room temperature.","formula":1,"range":[0.4,0.7],"references":"S.H. Wemple, M. Didomenico Jr., and I. Camlibel. Dielectric and optical properties of melt-grown BaTiO<sub>3</sub>, <a href=\"https://doi.org/10.1016/0022-3697(68)90164-9\"><i>J. Phys. Chem. Solids</i> <b>29</b>, 1797-1803 (1968)</a>","source":"Wemple-o"},{"book":"BiB3O6","coefficients":[3.07403,0.03231,0,0.03163,1,0,0,0,1],"comments":"n<sub>α</sub>; 20 °C.","formula":4,"range":[0.48,3.1],"references":"N. Umemura, K. Miyata, and K. Kato. New data on the optical properties of BiB<sub>3</sub>O<sub>6</sub>, <a href=\"https://doi.org/10.1016/j.optmat.2006.12.014\"><i>Opt. Mat.</i> <b>30</b>, 532-534 (2007)</a>","source":"Umemura-alpha"},{"book":"BiB3O6","coefficients":[3.1694,0.03717,0,0.03483,1,0,0,0,1],"comments":"n<sub>β</sub>; 20 °C.","formula":4,"range":[0.48,3.1],"references":"N. Umemura, K. Miyata, and K. Kato. New data on the optical properties of BiB<sub>3</sub>O<sub>6</sub>, <a href=\"https://doi.org/10.1016/j.optmat.2006.12.014\"><i>Opt. Mat.</i> <b>30</b>, 532-534 (2007)</a>","source":"Umemura-beta"},{"book":"BiB3O6","coefficients":[3.6545,0.05112,0,0.03713,1,0,0,0,1],"comments":"n<sub>γ</sub>; 20 °C.","formula":4,"range":[0.48,3.1],"references":"N. Umemura, K. Miyata, and K. Kato. New data on the optical properties of BiB<sub>3</sub>O<sub>6</sub>, <a href=\"https://doi.org/10.1016/j.optmat.2006.12.014\"><i>Opt. Mat.</i> <b>30</b>, 532-534 (2007)</a>","source":"Umemura-gamma"},{"book":"CaF2","coefficients":[0,0.44375,0.001780279,0.4449301,0.00788536,0.150134,0.01241195,8.853199,2752.282],"comments":"20 °C, Nitrogen atmosphere","formula":2,"range":[0.138,2.326],"references":"M. Daimon and A. Masumura. High-accuracy measurements of the refractive index and its temperature coefficient of calcium fluoride in a wide wavelength range from 138 to 2326 nm, <a href=\"https://doi.org/10.1364/AO.41.005275\"><i>Appl. Opt.</i> <b>41</b>, 5275-5281 (2002)</a>","source":"Daimon-20"},{"book":"CaF2","coefficients":[0,0.4373876,0.001737993,0.4492114,0.007827186,0.1520687,0.01240861,13.00204,4039.765],"comments":"25 °C, Nitrogen atmosphere","formula":2,"range":[0.138,2.326],"references":"M. Daimon and A. Masumura. High-accuracy measurements of the refractive index and its temperature coefficient of calcium fluoride in a wide wavelength range from 138 to 2326 nm, <a href=\"https://doi.org/10.1364/AO.41.005275\"><i>Appl. Opt.</i> <b>41</b>, 5275-5281 (2002)</a>","source":"Daimon-25"},{"book":"CaF2","coefficients":[0.33973,0.69913,0.09374,0.11994,21.18,4.35181,38.46],"comments":"293 K (20 °C).","formula":1,"range":[0.15,12],"references":"H. H. Li. Refractive index of alkaline earth halides and its wavelength and temperature derivatives. <a href=\"https://doi.org/10.1063/1.555616\"><i>J. Phys. Chem. Ref. Data</i> <b>9</b>, 161-289 (1980)</a> and references therein.<br> <sup>*</sup> Sellmeier formula is derived by critical analysis of experimental data from several sources.","source":"Li"},{"book":"CaF2","coefficients":[0,0.5675888,0.05026361,0.4710914,0.1003909,3.848472,34.64904],"comments":"24 °C","formula":1,"range":[0.23,9.7],"references":"I. H. Malitson. A redetermination of some optical properties of calcium fluoride, <a href=\"https://doi.org/doi:10.1364/AO.2.001103\"><i>Appl. Opt.</i> <b>2</b>, 1103-1107 (1963)</a>","source":"Malitson"},{"book":"KNbO3","coefficients":[4.4222,0.09972,0,0.05496,1,0,0,0,1],"comments":"n<sub>α</sub>; 22 °C.","formula":4,"range":[0.4,5.3],"references":"N. Umemura, K. Yoshida, and K. Kato. Phase-matching properties of KNbO<sub>3</sub> in the mid-infrared, <a href=\"https://doi.org/10.1364/AO.38.000991\"><i>Appl Opt.</i> <b>38</b>, 991-994 (1999)</a>","source":"Umemura-alpha"},{"book":"KNbO3","coefficients":[4.8353,0.12808,0,0.05674,1,0,0,0,1],"comments":"n<sub>β</sub>; 22 °C.","formula":4,"range":[0.4,5.3],"references":"N. Umemura, K. Yoshida, and K. Kato. Phase-matching properties of KNbO<sub>3</sub> in the mid-infrared, <a href=\"https://doi.org/10.1364/AO.38.000991\"><i>Appl Opt.</i> <b>38</b>, 991-994 (1999)</a>","source":"Umemura-beta"},{"book":"KNbO3","coefficients":[4.9856,0.15266,0,0.06331,1,0,0,0,1],"comments":"n<sub>γ</sub>; 22 °C.","formula":4,"range":[0.4,5.3],"references":"N. Umemura, K. Yoshida, and K. Kato. Phase-matching properties of KNbO<sub>3</sub> in the mid-infrared, <a href=\"https://doi.org/10.1364/AO.38.000991\"><i>Appl Opt.</i> <b>38</b>, 991-994 (1999)</a>","source":"Umemura-gamma"},{"book":"KTiOPO4","coefficients":[3.291,0.0414,0,0.03978,1,9.35522,0,31.45571,1],"comments":"n<sub>α</sub>; 20 °C.","formula":4,"range":[0.43,3.54],"references":"K. Kato and E. Takaoka. Sellmeier and thermo-optic dispersion formulas for KTP, <a href=\"https://doi.org/10.1364/AO.41.005040\"><i>Appl. Opt.</i> <b>41</b>, 5040-5044 (2002)</a>.","source":"Kato-alpha"},{"book":"KTiOPO4","coefficients":[3.45018,0.04341,0,0.04597,1,16.98825,0,39.43799,1],"comments":"n<sub>β</sub>; 20 °C.","formula":4,"range":[0.43,3.54],"references":"K. Kato and E. Takaoka. Sellmeier and thermo-optic dispersion formulas for KTP, <a href=\"https://doi.org/10.1364/AO.41.005040\"><i>Appl. Opt.</i> <b>41</b>, 5040-5044 (2002)</a>.","source":"Kato-beta"},{"book":"KTiOPO4","coefficients":[4.59423,0.06206,0,0.04763,1,110.8067,0,86.12171,1],"comments":"n<sub>γ</sub>; 20 °C.","formula":4,"range":[0.43,3.54],"references":"K. Kato and E. Takaoka. Sellmeier and thermo-optic dispersion formulas for KTP, <a href=\"https://doi.org/10.1364/AO.41.005040\"><i>Appl. Opt.</i> <b>41</b>, 5040-5044 (2002)</a>.","source":"Kato-gamma"},{"book":"LaF3","coefficients":[0,1.5149,0.0878],"comments":"Extraordinary ray (e)","formula":1,"range":[0.35,0.7],"references":"R. Laihoa and M. Lakkistoa. Investigation of the refractive indices of LaF<sub>3</sub>, CeF<sub>3</sub>, PrF<sub>3</sub> and NdF<sub>3</sub>, <a href=\"https://doi.org/10.1080/13642818308226470\"><i>Phil. Mag. B</i> <b>48</b>, 203-207 (1983)</a> (As cited in Handbook of Optics, 2nd edition, Vol. 2. McGraw-Hill 1994).","source":"Laihoa-e"},{"book":"LaF3","coefficients":[0,1.5376,0.0881],"comments":"Ordinary ray (o)","formula":1,"range":[0.35,0.7],"references":"R. Laihoa and M. Lakkistoa. Investigation of the refractive indices of LaF<sub>3</sub>, CeF<sub>3</sub>, PrF<sub>3</sub> and NdF<sub>3</sub>, <a href=\"https://doi.org/10.1080/13642818308226470\"><i>Phil. Mag. B</i> <b>48</b>, 203-207 (1983)</a> (As cited in Handbook of Optics, 2nd edition, Vol. 2. McGraw-Hill 1994).","source":"Laihoa-o"},{"book":"LiNbO3","coefficients":[0,2.9804,0.02047,0.5981,0.0666,8.9543,416.08],"comments":"21 °C. Extraordinary ray (e). Congruently grown lithium niobate.","formula":2,"range":[0.4,5],"references":"D. E. Zelmon, D. L. Small, and D. Jundt. Infrared corrected Sellmeier coefficients for congruently grown lithium niobate and 5 mol.% magnesium oxide-doped lithium niobate, <a href=\"https://doi.org/10.1364/JOSAB.14.003319\"><i>J. Opt. Soc. Am. B</i> <b>14</b>, 3319-3322 (1997)</a>","source":"Zelmon-e"},{"book":"LiNbO3","coefficients":[0,2.6734,0.01764,1.229,0.05914,12.614,474.6],"comments":"21 °C. Ordinary ray (o). Congruently grown lithium niobate.","formula":2,"range":[0.4,5],"references":"D. E. Zelmon, D. L. Small, and D. Jundt. Infrared corrected Sellmeier coefficients for congruently grown lithium niobate and 5 mol.% magnesium oxide-doped lithium niobate, <a href=\"https://doi.org/10.1364/JOSAB.14.003319\"><i>J. Opt. Soc. Am. B</i> <b>14</b>, 3319-3322 (1997)</a>","source":"Zelmon-o"},{"book":"MgF2","coefficients":[0,0.4134402,0.03684262,0.504975,0.09076162,2.490486,23.772],"comments":"19 °C. Extraordinary ray (e).","formula":1,"range":[0.2,7],"references":"M. J. Dodge. Refractive properties of magnesium fluoride, <a href=\"https://doi.org/10.1364/AO.23.001980\"><i>Appl. Opt.</i> <b>23</b>, 1980-1985 (1984)</a>","source":"Dodge-e"},{"book":"MgF2","coefficients":[0,0.4875511,0.04338408,0.3987503,0.09461442,2.312035,23.7936],"comments":"19 °C. Ordinary ray (o).","formula":1,"range":[0.2,7],"references":"M. J. Dodge. Refractive properties of magnesium fluoride, <a href=\"https://doi.org/10.1364/AO.23.001980\"><i>Appl. Opt.</i> <b>23</b>, 1980-1985 (1984)</a>","source":"Dodge-o"},{"book":"MgF2","coefficients":[0.25385,0.66405,0.08504,1.0899,22.2,0.1816,24.4,2.1227,40.6],"comments":"293 K (20 °C). Extraordinary ray (e).","formula":1,"range":[0.14,7.5],"references":"H. H. Li. Refractive index of alkaline earth halides and its wavelength and temperature derivatives. <a href=\"https://doi.org/10.1063/1.555616\"><i>J. Phys. Chem. Ref. Data</i> <b>9</b>, 161-289 (1980)</a> and references therein.<br> <sup>*</sup> Sellmeier formula is derived by critical analysis of experimental data from several sources.","source":"Li-e"},{"book":"MgF2","coefficients":[0.2762,0.60967,0.08636,0.008,18,2.14973,25],"comments":"293 K (20 °C). Ordinary ray (o).","formula":1,"range":[0.14,7.5],"references":"H. H. Li. Refractive index of alkaline earth halides and its wavelength and temperature derivatives. <a href=\"https://doi.org/10.1063/1.555616\"><i>J. Phys. Chem. Ref. Data</i> <b>9</b>, 161-289 (1980)</a> and references therein.<br> <sup>*</sup> Sellmeier formula is derived by critical analysis of experimental data from several sources.","source":"Li-o"},{"book":"NaF","coefficients":[0.41572,0.32785,0.117,3.18248,40.57],"comments":"297 K (24 °C).","formula":1,"range":[0.15,17],"references":"H. H. Li. Refractive index of alkali halides and its wavelength and temperature derivatives. <a href=\"https://doi.org/10.1063/1.555536\"><i>J. Phys. Chem. Ref. Data</i> <b>5</b>, 329-528 (1976)</a> and references therein.<br> <sup>*</sup> Sellmeier formula is derived by critical analysis of experimental data from several sources.","source":"Li"},{"book":"RbTiOPO4","coefficients":[1.6795,1.4281,2,0.0325,1,0,0,0,1],"comments":"n<sub>α</sub>; 293 K (20 °C).","formula":4,"range":[0.4,1.5],"references":"J. J. Carvajal, P. Segonds, A. Peña, J. Zaccaro, B. Boulanger, F. Díaz and M. Aguiló. Structural and optical properties of RbTiOPO<sub>4</sub>:Nb crystals , <a href=\"https://doi.org/10.1088/0953-8984/19/11/116214\"><i>J. Phys.: Condens. Matter</i> <b>19</b>, 116214, 2007</a>","source":"Carvajal-alpha"},{"book":"RbTiOPO4","coefficients":[2.036,1.0883,2,0.0437,1,0,0,0,1],"comments":"n<sub>β</sub>; 293 K (20 °C).","formula":4,"range":[0.4,1.5],"references":"J. J. Carvajal, P. Segonds, A. Peña, J. Zaccaro, B. Boulanger, F. Díaz and M. Aguiló. Structural and optical properties of RbTiOPO<sub>4</sub>:Nb crystals , <a href=\"https://doi.org/10.1088/0953-8984/19/11/116214\"><i>J. Phys.: Condens. Matter</i> <b>19</b>, 116214, 2007</a>","source":"Carvajal-beta"},{"book":"RbTiOPO4","coefficients":[2.2864,1.128,2,0.0562,1,0,0,0,1],"comments":"n<sub>γ</sub>; 293 K (20 °C).","formula":4,"range":[0.4,1.5],"references":"J. J. Carvajal, P. Segonds, A. Peña, J. Zaccaro, B. Boulanger, F. Díaz and M. Aguiló. Structural and optical properties of RbTiOPO<sub>4</sub>:Nb crystals , <a href=\"https://doi.org/10.1088/0953-8984/19/11/116214\"><i>J. Phys.: Condens. Matter</i> <b>19</b>, 116214, 2007</a>","source":"Carvajal-gamma"},{"book":"N-BK7","coefficients":[0,1.039612,0.006000699,0.2317923,0.02001791,1.010469,103.5607],"comments":"step 0.5 available","formula":2,"range":[0.3,2.5],"references":"1) <a href=\"https://refractiveindex.info/download/data/2015/schott-optical-glass-collection-datasheets-july-2015-us.pdf\">SCHOTT optical glass data sheets 2015-07-22</a><br>2) <a href=\"https://refractiveindex.info/download/data/2015/schottzemax-20150722.agf\">SCHOTT Zemax catalog 2015-07-22</a>","source":"Schott","tabulated":[[0.3,2.8607],[0.31,1.3679],[0.32,6.6608],[0.334,2.6415],[0.35,9.2894],[0.365,3.4191],[0.37,2.7405],[0.38,2.074],[0.39,1.3731],[0.4,1.0227],[0.405,9.0558],[0.42,9.3912],[0.436,1.1147],[0.46,1.0286],[0.5,9.5781],[0.546,6.9658],[0.58,9.2541],[0.62,1.1877],[0.66,1.2643],[0.7,8.9305],[1.06,1.0137],[1.53,9.839],[1.97,1.0933],[2.325,4.2911],[2.5,8.13],[6,1.31]]},{"book":"N-LAF2","coefficients":[0,1.809842,0.01017116,0.1572956,0.04424318,1.093004,100.6878],"formula":2,"range":[0.35,2.5],"references":"1) <a href=\"https://refractiveindex.info/download/data/2015/schott-optical-glass-collection-datasheets-july-2015-us.pdf\">SCHOTT optical glass data sheets 2015-07-22</a><br>2) <a href=\"https://refractiveindex.info/download/data/2015/schottzemax-20150722.agf\">SCHOTT Zemax catalog 2015-07-22</a>","source":"Schott","tabulated":[[0.35,4.1097],[0.365,1.3607],[0.37,9.9398],[0.38,5.5887],[0.39,3.4069],[0.4,2.2199],[0.405,1.8696],[0.42,1.1876],[0.436,8.5873],[0.46,5.6725],[0.5,2.7289],[0.546,1.0459],[0.58,1.2969],[0.62,1.5852],[0.66,1.4758],[0.7,8.9305],[1.06,1.0137],[1.53,4.8947],[1.97,4.5507],[2.325,2.7461],[2.5,7.2916],[6,9.2]]},{"book":"N-LAK8","coefficients":[0,1.331832,0.006200239,0.5466232,0.02164654,1.19084,82.58277],"formula":2,"range":[0.31,2.5],"references":"1) <a href=\"https://refractiveindex.info/download/data/2015/schott-optical-glass-collection-datasheets-july-2015-us.pdf\">SCHOTT optical glass data sheets 2015-07-22</a><br>2) <a href=\"https://refractiveindex.info/download/data/2015/schottzemax-20150722.agf\">SCHOTT Zemax catalog 2015-07-22</a>","source":"Schott","tabulated":[[0.31,4.5442],[0.32,3.2787],[0.334,1.794],[0.35,8.4116],[0.365,3.8167],[0.37,2.9262],[0.38,1.6845],[0.39,1.1028],[0.4,7.4725],[0.405,6.3414],[0.42,4.0721],[0.436,2.9455],[0.46,1.916],[0.5,9.5781],[0.546,8.7117],[0.58,1.1111],[0.62,1.1877],[0.66,1.0531],[0.7,8.9305],[1.06,2.0305],[1.53,1.0336],[1.97,8.0161],[2.325,6.4201],[2.5,1.8323],[6,1.25]]},{"book":"N-SF10","coefficients":[0,1.621539,0.01222415,0.2562878,0.05957368,1.644476,147.4688],"formula":2,"range":[0.38,2.5],"references":"1) <a href=\"https://refractiveindex.info/download/data/2015/schott-optical-glass-collection-datasheets-july-2015-us.pdf\">SCHOTT optical glass data sheets 2015-07-22</a><br>2) <a href=\"https://refractiveindex.info/download/data/2015/schottzemax-20150722.agf\">SCHOTT Zemax catalog 2015-07-22</a>","source":"Schott","tabulated":[[0.38,1.9467],[0.39,9.9127],[0.4,5.6823],[0.405,4.5981],[0.42,2.6531],[0.436,1.9327],[0.46,1.3809],[0.5,9.0035],[0.546,4.757],[0.58,4.107],[0.62,4.5921],[0.66,5.1035],[0.7,3.8205],[1.06,3.3911],[1.53,7.3606],[1.97,4.5507],[2.325,2.031],[2.5,3.3066],[6,7.41]]},{"book":"P-BK7","coefficients":[0,1.183185,0.007221419,0.08717564,0.02682168,1.031337,101.7024],"comments":"suitable for precision molding","formula":2,"range":[0.31,2.5],"references":"1) <a href=\"https://refractiveindex.info/download/data/2015/schott-optical-glass-collection-datasheets-july-2015-us.pdf\">SCHOTT optical glass data sheets 2015-07-22</a><br>2) <a href=\"https://refractiveindex.info/download/data/2015/schottzemax-20150722.agf\">SCHOTT Zemax catalog 2015-07-22</a>","source":"Schott","tabulated":[[0.31,3.8602],[0.32,1.4536],[0.334,3.3459],[0.35,8.085],[0.365,3.1801],[0.37,2.4996],[0.38,1.7054],[0.39,1.2477],[0.4,1.0227],[0.405,9.0558],[0.42,8.0456],[0.436,8.3521],[0.46,7.3395],[0.5,6.379],[0.546,5.2218],[0.58,5.5469],[0.62,5.9295],[0.66,6.312],[0.7,6.6946],[1.06,3.3758],[1.53,1.0336],[1.97,5.2286],[2.325,2.6396],[2.5,6.1794]]},{"book":"SF10","coefficients":[0,1.61626,0.01275346,0.2592293,0.0581984,1.077623,116.6077],"comments":"lead containing glass type","formula":2,"range":[0.38,2.5],"references":"1) <a href=\"https://refractiveindex.info/download/data/2015/schott-optical-glass-collection-datasheets-july-2015-us.pdf\">SCHOTT optical glass data sheets 2015-07-22</a><br>2) <a href=\"https://refractiveindex.info/download/data/2015/schottzemax-20150722.agf\">SCHOTT Zemax catalog 2015-07-22</a>","source":"Schott","tabulated":[[0.38,3.403],[0.39,1.2343],[0.4,4.7245],[0.405,3.0388],[0.42,1.1147],[0.436,5.5209],[0.46,3.2573],[0.5,1.7604],[0.546,8.7117],[0.58,9.2541],[0.62,1.3863],[0.66,1.4758],[0.7,1.1169],[1.06,1.0137],[1.53,6.3727],[1.97,5.2286],[2.325,2.031],[2.5,2.9528],[6,1.59]]},{"book":"Y3Al5O12","coefficients":[0,2.282,0.01185,3.27644,282.734],"formula":2,"range":[0.4,5],"references":"D. E. Zelmon, D. L. Small and R. Page. Refractive-index measurements of undoped yttrium aluminum garnet from 0.4 to 5.0 µm, <a href=\"https://doi.org/10.1364/AO.37.004933\"><i>Appl. Opt.</i> <b>37</b>, 4933-4935 (1998)</a>","source":"Zelmon"},{"book":"YLiF4","coefficients":[0.31021,0.84903,0.00876,0.53607,134.9566],"comments":"Room temperature. Extraordinary ray (e).","formula":2,"range":[0.225,2.6],"references":"N. P. Barnes and D. J. Gettemy. Temperature variation of the refractive indices of yttrium lithium fluoride, <a href=\"https://doi.org/10.1364/JOSA.70.001244\"><i>J. Opt. Soc. Am.</i> <b>70</b>, 1244-1247 (1980)</a>","source":"Barnes-e"},{"book":"YLiF4","coefficients":[0.38757,0.70757,0.00931,0.18849,50.99741],"comments":"Room temperature. Ordinary ray (o).","formula":2,"range":[0.225,2.6],"references":"N. P. Barnes and D. J. Gettemy. Temperature variation of the refractive indices of yttrium lithium fluoride, <a href=\"https://doi.org/10.1364/JOSA.70.001244\"><i>J. Opt. Soc. Am.</i> <b>70</b>, 1244-1247 (1980)</a>","source":"Barnes-o"},{"book":"YVO4","coefficients":[4.6072,0.108087,0,0.052495,1,0,0,0,1],"comments":"Extraordinary ray (e)","formula":4,"range":[0.48,1.34],"references":"H. S. Shi, G. Zhang and H. Y. Shen. Measurement of principal refractive indices and the thermal refractive index coefficients of yttrium vanadate, <a href=\"http://caod.oriprobe.com/articles/3152847/Measurement_of_Principal_Refractive_Indices_and_the_Thermal_Refractive.htm\"><i>J. Synthetic Cryst.</i> <b>30</b>, 85-88 (2001)</a>, as cited in Handbook of Optics, 3rd edition, Vol. 4. McGraw-Hill 2009","source":"Shi-e"},{"book":"YVO4","coefficients":[3.77879,0.07479,0,0.045731,1,0,0,0,1],"comments":"Ordinary ray (o)","formula":4,"range":[0.48,1.34],"references":"H. S. Shi, G. Zhang and H. Y. Shen. Measurement of principal refractive indices and the thermal refractive index coefficients of yttrium vanadate, <a href=\"http://caod.oriprobe.com/articles/3152847/Measurement_of_Principal_Refractive_Indices_and_the_Thermal_Refractive.htm\"><i>J. Synthetic Cryst.</i> <b>30</b>, 85-88 (2001)</a>, as cited in Handbook of Optics, 3rd edition, Vol. 4. McGraw-Hill 2009","source":"Shi-o"},{"book":"ZnS","coefficients":[8.393,0.14383,0,0.2421,2,4430.99,0,36.71,2],"comments":"Cubic ZnS, 20 °C","formula":4,"range":[0.405,13],"references":"1) M. Debenham. Refractive indices of zinc sulfide in the 0.405-13-µm wavelength range, <a href=\"https://doi.org/10.1364/AO.23.002238\"><i>Appl. Opt.</i>, <b>23</b>, 2238-2239 (1984)</a><br>2) C. A. Klein. Room-temperature dispersion equations for cubic zinc sulfide, <a href=\"https://doi.org/10.1364/AO.25.001873\"><i>Appl. Opt.</i> <b>25</b>, 1873-1875 (1986)</a><br>*Ref. 2 provides a modified Sellmeier equation based on the data from Ref. 1","source":"Debenham"},{"book":"ZnSe","coefficients":[0,4.458138,0.2008599,0.4672163,0.3913712,2.895663,47.13621],"comments":"CVD ZnSe, 23 °C","formula":1,"range":[0.54,18.2],"references":"1) J. Connolly, B. diBenedetto, and R. Donadio. Specifications of Raytran material, <a href=\"https://doi.org/10.1117/12.957359\"><i>Proc. SPIE</i>, <b>181</b>, 141-144 (1979)</a><br>2) B. Tatian. Fitting refractive-index data with the Sellmeier dispersion formula, <a href=\"https://doi.org/10.1364/AO.23.004477\"><i>Appl. Opt.</i> <b>23</b>, 4477-4485 (1984)</a><br>*Ref. 2 provides Sellmeier equation based on the data from Ref. 1","source":"Connolly"},{"book":"ZnSe","coefficients":[3,1.9,0.113],"comments":"Room temperature","formula":2,"range":[0.48,2.5],"references":"D. T. F. Marple. Refractive index of ZnSe, ZnTe, and CdTe, <a href=\"https://doi.org/10.1063/1.1713411\"><i>J. Appl. Phys.</i> <b>35</b>, 539-542 (1964)</a>","source":"Marple"}];LaserCanvas.SHA_SHORT="30b87da";}();